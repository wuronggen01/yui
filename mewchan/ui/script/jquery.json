{"/library/lab.common/async.js":{"url":"/library/lab.common/async.js","content":{"encoding":"text","data":"var foundation=require(\"./foundation.js\"),PENDING=\"pending\",SUSPENDED=\"suspended\",CALLING=\"calling\",HELD=\"hold\",FULFILLED=\"fulfilled\",REJECTED=\"rejected\",setHiddenField=function(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:n})},Async=function(e,t,n){n||(n=[]),this.pool=foundation.objectize(t),this.state=PENDING,setHiddenField(this,\"action\",e),this.fulfilled=n,setHiddenField(this,\"followingAsyncs\",[]),setHiddenField(this,\"pendingTaskAsyncs\",[]),setHiddenField(this,\"pendingRejectedActions\",[function(e){this.followingAsyncs.forEach(function(e){if(e.state!==PENDING)throw new Error(\"Invalid state for following async\");e.state=REJECTED,e.fulfilled=this.fulfilled,e.pendingRejectedActions.length>0&&e.pendingRejectedActions.forEach(function(t){t.call(e.step,e.fulfilled)})}.bind(this)),this.followingAsyncs=[]}.bind(this)]),setHiddenField(this,\"pendingTests\",[]),this.testState=PENDING;var s=this,a=!1,i={pool:this.pool,hold:function(){var e=0,t=null;if(foundation.isKindOf(arguments[0],Number)&&(e=arguments[0]),foundation.isKindOf(arguments[arguments.length-1],Function)&&(t=arguments[arguments.length-1]),s.state!==CALLING)throw new Error(\"Invalid state for async step\");return s.state=HELD,e&&async.delay(e,function(){s.state===HELD&&(i.reject(new Error(\"The hold of the async step has been timeout\")),a=!0)}),t&&t.call(i),i},test:function(e){return e?i.reject(e):i.next.apply(i,Array.prototype.slice.call(arguments,1))},next:function(){if(!a){if(s.state!==HELD&&s.state!==CALLING)throw new Error(\"Invalid state for async step\");s.fulfilled=Array.prototype.slice.call(arguments,0),s.state=FULFILLED;var e=s.pendingTaskAsyncs;setHiddenField(async,\"pendingTaskAsyncs\",[]),setHiddenField(async,\"pendingRejectedActions\",[]),e.forEach(function(e){call.call(e,s.fulfilled)}),setHiddenField(async,\"followingAsyncs\",[])}},reject:function(e){if(!a){if(s.state!==HELD&&s.state!==CALLING)throw new Error(\"Invalid state for async step\");foundation.isKindOf(e,Error)||(e=new Error(e)),s.fulfilled=e,s.state=REJECTED;var t=s.pendingRejectedActions;setHiddenField(async,\"pendingTaskAsyncs\",[]),setHiddenField(async,\"pendingRejectedActions\",[]),t.forEach(function(e){e.call(i,s.fulfilled)}),setHiddenField(async,\"followingAsyncs\",[])}}};setHiddenField(this,\"step\",i)};Async.prototype.state=PENDING,Async.prototype.fulfilled=null;var call=function(e){if(this.state!==PENDING)throw new Error(\"Invalid state to call async task\");this.state=CALLING,foundation.isArrayLike(e)||(e=[e]);this.action.apply(this.step,e)};setHiddenField(Async.prototype,\"then\",function(e){var t=new Async(e,this.pool,Array.prototype.slice.call(arguments,1));switch(this.followingAsyncs.push(t),this.state){case PENDING:case CALLING:case HELD:this.pendingTaskAsyncs.push(t);break;case FULFILLED:call.call(t,this.fulfilled);break;case REJECTED:default:t.fulfilled=this.fulfilled,t.state=REJECTED}return t}),Object.defineProperty(Async.prototype,\"result\",{enumerable:!1,get:function(){return this.state===FULFILLED?this.fulfilled[0]:null}}),setHiddenField(Async.prototype,\"rejected\",function(e){switch(this.state){case PENDING:case CALLING:case HELD:this.pendingRejectedActions.push(e);break;case REJECTED:e.call(this.step,this.fulfilled);break;case FULFILLED:}return this}),setHiddenField(Async.prototype,\"pipe\",function(e){return this.then(function(){e.next.apply(e,arguments),this.next.apply(e,arguments)}).rejected(e.reject)}),setHiddenField(Async.prototype,\"async\",function(){var e=this;return async(function(){e.then(function(){e.next.apply(e,arguments),this.next.apply(this,arguments)}).rejected(e.reject)})}),setHiddenField(Async.prototype,\"finished\",function(e){this.then.call(this,function(){e.call(this,this.pool)});return this}),setHiddenField(Async.prototype,\"all\",function(e,t){return this.then(function(){e=foundation.copyAsArray(foundation.isKindOf(e,String)?this.pool[e]:e);var n=this,s=0,a=function(){if(s<e.length){var i=e[s];++s;var r=CALLING,o=!1,c={hold:function(){var e=0,t=null;if(foundation.isKindOf(arguments[0],Number)&&(e=arguments[0]),foundation.isKindOf(arguments[arguments.length-1],Function)&&(t=arguments[arguments.length-1]),r!==CALLING)throw new Error(\"Invalid state for async all\");return r=HELD,e&&async.delay(e,function(){r===HELD&&(c.reject(new Error(\"The hold of the async all has been timeout\")),o=!0)}),t&&t.call(c),c},test:function(e){return e?c.reject(e):c.next.apply(c,Array.prototype.slice.call(arguments,1))},next:function(){if(!o){if(r!==HELD&&r!==CALLING)throw new Error(\"Invalid state for async all\");r=FULFILLED,a()}},reject:function(){if(!o){if(r===FULFILLED||r===REJECTED)throw new Error(\"Invalid state for async all\");r=REJECTED,n.reject.apply(n,arguments)}},pool:n.pool};t.call(c,i,s-1,e)}else n.next()};a()})}),setHiddenField(Async.prototype,\"race\",function(){return this.any(arguments,function(e){e.call(this)})}),setHiddenField(Async.prototype,\"any\",function(e,t){return this.then(function(){e=foundation.copyAsArray(foundation.isKindOf(e,String)?this.pool[e]:e);var n=this,s=0,a=0;e.forEach(function(i,r){var o=CALLING,c=!1,l={hold:function(){var e=0,t=null;if(foundation.isKindOf(arguments[0],Number)&&(e=arguments[0]),foundation.isKindOf(arguments[arguments.length-1],Function)&&(t=arguments[arguments.length-1]),o!==CALLING)throw new Error(\"Invalid state for async step\");return o=HELD,e&&async.delay(e,function(){o===HELD&&(l.reject(new Error(\"The hold of the async step has been timeout\")),c=!0)}),t&&t.call(l),l},test:function(e){return e?l.reject(e):l.next.apply(l,Array.prototype.slice.call(arguments,1))},next:function(){if(!c){if(o!==HELD&&o!==CALLING)throw new Error(\"Invalid state for async all\");o=FULFILLED,++s,1===s&&n.next()}},reject:function(){if(!c){if(o===FULFILLED||o===REJECTED)throw new Error(\"Invalid state for async all\");o=REJECTED,++a,0===s&&a===e.length&&n.reject.apply(n,arguments)}},pool:n.pool};t.call(l,i,r,e)})})}),setHiddenField(Async.prototype,\"test\",function(e){switch(this.state){case PENDING:case CALLING:case HELD:this.pendingTests.push(e);break;case FULFILLED:switch(this.testState){case PENDING:var t=this;this.pendingTests.push(e);var n=!1,s={fail:function(){if(!n){if(t.testState!==CALLING&&t.testState!==HELD)throw new Error(\"Invalid test state for async test\");t.testState=PENDING,a()}},succeed:function(){if(!n){if(t.testState!==CALLING&&t.testState!==HELD)throw new Error(\"Invalid test state for async test\");t.testState=FULFILLED}},hold:function(){var e=0,a=null;if(foundation.isKindOf(arguments[0],Number)&&(e=arguments[0]),foundation.isKindOf(arguments[arguments.length-1],Function)&&(a=arguments[arguments.length-1]),t.testState!==CALLING)throw new Error(\"Invalid test state for async test\");return t.testState=HELD,e&&t.delay(e,function(){t.testState===HELD&&(this.fail(new Error(\"The hold of the async test has been timeout\")),n=!0)}.bind(this)),a&&a.call(s),s},pool:t.pool},a=function(){if(t.pendingTests.length>0){var e=t.pendingTests.shift();t.testState=CALLING,e.call(s)}};a();break;case CALLING:case HELD:this.pendingTests.push(e);break;case FULFILLED:}break;case REJECTED:}return this});var async=function(e){var t=e;foundation.isKindOf(e,Function)||(t=function(){this.next(e)});var n=new Async(t);return call.call(n),n};async.resolve=function(){var e=foundation.copyAsArray(arguments);return async(function(){this.next.apply(this,e)})},async.all=function(e,t){return async().all(e,t)},async.race=function(){var e=async();return e.race.apply(e,arguments)},async.any=function(e,t){return async().any(e,t)},async.reject=function(e){return async(function(){this.reject(e)})},async.test=function(e){return async().test(e)};var nextJobs=[],scheduledJobs=[],Job=function(e,t,n,s){this.id=null,this.type=e,this.time=t,this.state=SUSPENDED,this.called=!1,this.action=s,this.name=n};Object.defineProperty(Job.prototype,\"act\",{enumerable:!1,get:function(){var e=this,t=function(){return\"once\"===e.type.split(\".\")[0]&&e.called?void 0:(\"repeated.schedule\"===e.type&&e.handle&&(clearTimeout(e.handle),delete e.handle),-1===[REJECTED,SUSPENDED].indexOf(e.state)&&(e.called=!0,e.action.apply(this,arguments),\"once\"===e.type.split(\".\")[0]&&e.cancel()),e)};return t.job=e,t}}),Object.defineProperty(Job.prototype,\"cancel\",{enumerable:!1,get:function(){var e=this;return function(){if(e.state!==REJECTED){var t=scheduledJobs.indexOf(e);switch(-1!==t&&scheduledJobs.splice(t,1),e.state=REJECTED,e.type){case\"once.next\":var t=nextJobs.indexOf(e);-1!==t&&nextJobs.splice(t,1);break;case\"once.timeout\":case\"once.date\":case\"repeated.schedule\":clearTimeout(e.handle),delete e.handle;break;case\"repeated.timer\":clearInterval(e.handle);break;case\"once.tick\":}}return e}}}),Object.defineProperty(Job.prototype,\"suspend\",{enumerable:!1,get:function(){var e=this;return function(){if(\"once\"!==e.type.split(\".\")||!e.called){if(e.state!==SUSPENDED&&e.state!==REJECTED){e.state=SUSPENDED;var t=scheduledJobs.indexOf(e);switch(-1!==t&&scheduledJobs.splice(t,1),e.type){case\"once.next\":var t=nextJobs.indexOf(e);-1!==t&&nextJobs.splice(t,1);break;case\"once.timeout\":case\"repeated.schedule\":case\"once.date\":clearTimeout(e.handle),delete e.handle;break;case\"repeated.timer\":clearInterval(e.handle),delete e.handle;break;case\"once.tick\":}}return e}}}}),Object.defineProperty(Job.prototype,\"resume\",{enumerable:!1,get:function(){var e=this;return function(){if(e.state===SUSPENDED)switch(e.state=PENDING,scheduledJobs.push(e),e.type){case\"once.next\":0===nextJobs.length&&process.nextTick(function(){var e=nextJobs;nextJobs=[],e.forEach(function(e){e.act()})}),nextJobs.push(e);break;case\"once.timeout\":case\"once.date\":e.handle=setTimeout(e.act,e.time-(new Date).getTime());break;case\"repeated.schedule\":e.handle=setTimeout(e.act,e.time);break;case\"repeated.timer\":e.handle=setInterval(e.act,e.time);break;case\"once.tick\":process.nextTick(e.act)}return e}}}),Object.defineProperty(Job.prototype,\"schedule\",{enumerable:!1,get:function(){var e=this;return function(){return e.state===PENDING&&\"repeated.schedule\"===e.type&&e.called&&(e.called=!1,e.handle&&clearTimeout(e.handle),e.handle=setTimeout(e.act,e.time)),e}}}),Object.defineProperty(async,\"jobs\",{enumerable:!1,get:function(){return scheduledJobs.slice(0)}}),async.delay=function(){var e=null,t=null,n=null;foundation.isKindOf(arguments[0],Function)?(e=-1,t=arguments[0],n=arguments[1]):(e=arguments[0],t=arguments[1],n=arguments[2]);var s=null;if(-2===e)s=new Job(\"once.tick\",0,n,t);else if(-1===e)s=new Job(\"once.next\",0,n,t);else if(foundation.isKindOf(e,Number))s=new Job(\"once.timeout\",(new Date).getTime()+e,n,t);else{if(!foundation.isKindOf(e,Date))throw new Error(\"Unknown type of time for job to delay\");s=new Job(\"once.date\",e.getTime(),n,t)}return s.resume(),s},async.plan=function(e,t,n){return foundation.isKindOf(e,Number)&&(e=new Date(e)),async.delay(e,t,n)},async.schedule=function(e,t,n){return new Job(\"repeated.schedule\",e,n,t).resume()},async.timer=function(e,t,n){return new Job(\"repeated.timer\",e,n,t).resume()},async.isAsync=function(e){return e instanceof Async},async.ensure=function(e){return async.isAsync(e)?e:async.resolve(e)},module.exports=async;"}},"/library/lab.common/cache_pool.js":{"url":"/library/lab.common/cache_pool.js","content":{"encoding":"text","data":"var CachePool=function(e){this.timeout=parseInt(e),isNaN(this.timeout)&&(this.timeout=12e5),Object.defineProperty(this,\"pool\",{enumerable:!1,value:{}})},define=function(e,t){Object.defineProperty(CachePool.prototype,e,{enumerable:!1,value:t})};define(\"has\",function(e){return this.pool.hasOwnProperty(e)}),CachePool.prototype.working=!0,Object.defineProperty(CachePool.prototype,\"count\",{enumerable:!0,get:function(){return Object.keys(this.pool).length}}),define(\"get\",function(e,t,o,i){if(i||(i=this.timeout),this.pool.hasOwnProperty(e)){var n=this.pool[e];return t&&this.refresh(e,i),n.content}if(o){var r=o();return this.pool[e]={content:r},this.refresh(e,i),r}return null}),define(\"fetch\",function(e){return Object.keys(this.pool).filter(function(t){return e?e(t,this.pool[t].content):!0}.bind(this)).map(function(e){return{id:e,content:this.pool[e].content}}.bind(this))}),define(\"put\",function(e,t,o){o||(o=this.timeout),this.pool.hasOwnProperty(e)?(this.pool[e].content=t,this.pool[e].expiredDate=(new Date).getTime()+o):this.pool[e]={content:t,expiredDate:(new Date).getTime()+o},this.refresh(e)}),define(\"refresh\",function(e,t){t||(t=this.timeout),this.pool.hasOwnProperty(e)&&(this.pool[e].expiredDate=(new Date).getTime()+t)}),define(\"clearExpired\",function(){var e=(new Date).getTime();Object.keys(this.pool).slice(0).forEach(function(t){this.pool[t].expiredDate<e&&delete this.pool[t]}.bind(this))}),module.exports=CachePool;"}},"/library/lab.common/comparator.js":{"url":"/library/lab.common/comparator.js","content":{"encoding":"text","data":"var foundation=null,numberComparator=function(a,r){return r>a?-1:a>r?1:a===r?0:-1},dateComparator=function(a,r){return a=a.getTime(),r=r.getTime(),r>a?-1:a>r?1:a===r?0:-1},stringComparator=function(a,r){return a.localeCompare(r)},naturalComparator=function(a,r){var t,e,n=/(^([+\\-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?$|^0x[\\da-fA-F]+$|\\d+)/g,o=/^\\s+|\\s+$/g,i=/\\s+/g,u=/(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,p=/^0x[0-9a-f]+$/i,l=/^0/,s=function(a){return(!1||\"\"+a).replace(o,\"\")},c=s(a)||\"\",d=s(r)||\"\",f=c.replace(n,\"\\x00$1\\x00\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\x00\"),m=d.replace(n,\"\\x00$1\\x00\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\x00\"),g=parseInt(c.match(p),16)||1!==f.length&&Date.parse(c),C=parseInt(d.match(p),16)||g&&d.match(u)&&Date.parse(d)||null,h=function(a,r){return a?(!a.match(l)||1==r)&&parseFloat(a)||a.replace(i,\" \").replace(o,\"\")||0:0};if(C){if(C>g)return-1;if(g>C)return 1}for(var x=0,N=f.length,w=m.length,$=Math.max(N,w);$>x;x++){if(t=h(f[x],N),e=h(m[x],w),isNaN(t)!==isNaN(e))return isNaN(t)?1:-1;if(typeof t!=typeof e&&(t+=\"\",e+=\"\"),e>t)return-1;if(t>e)return 1}return 0},insensitiveNaturalComparator=function(a,r){var t,e,n=/(^([+\\-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?$|^0x[\\da-fA-F]+$|\\d+)/g,o=/^\\s+|\\s+$/g,i=/\\s+/g,u=/(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,p=/^0x[0-9a-f]+$/i,l=/^0/,s=function(a){return(!0&&(\"\"+a).toLocaleLowerCase()||\"\"+a).replace(o,\"\")},c=s(a)||\"\",d=s(r)||\"\",f=c.replace(n,\"\\x00$1\\x00\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\x00\"),m=d.replace(n,\"\\x00$1\\x00\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\x00\"),g=parseInt(c.match(p),16)||1!==f.length&&Date.parse(c),C=parseInt(d.match(p),16)||g&&d.match(u)&&Date.parse(d)||null,h=function(a,r){return a?(!a.match(l)||1==r)&&parseFloat(a)||a.replace(i,\" \").replace(o,\"\")||0:0};if(C){if(C>g)return-1;if(g>C)return 1}for(var x=0,N=f.length,w=m.length,$=Math.max(N,w);$>x;x++){if(t=h(f[x],N),e=h(m[x],w),isNaN(t)!==isNaN(e))return isNaN(t)?1:-1;if(typeof t!=typeof e&&(t+=\"\",e+=\"\"),e>t)return-1;if(t>e)return 1}return 0},generatePathComparator=function(a,r,t){return foundation||(foundation=require(\"./foundation.js\")),function(e,n){var o=foundation.getProperty(e,a),i=n;switch(t||(i=foundation.getProperty(n,a)),r){case\"date\":{foundation.convert(o,\"date\"),foundation.convert(i,\"date\")}case\"string\":return foundation.isNull(o)?foundation.isNull(i)?0:-1:foundation.isNull(i)?1:(o+\"\").localeCompare(i+\"\");case\"natural\":return naturalComparator(o,i);case\"insensitive-natural\":return insensitiveNaturalComparator(o,i);case\"number\":default:return i>o?-1:o>i?1:o===i?0:-1}}};module.exports={numberComparator:numberComparator,dateComparator:dateComparator,stringComparator:stringComparator,naturalComparator:naturalComparator,insensitiveNaturalComparator:insensitiveNaturalComparator,generatePathComparator:generatePathComparator};"}},"/library/lab.common/foundation.js":{"url":"/library/lab.common/foundation.js","content":{"encoding":"text","data":"var comparator=require(\"./comparator.js\"),template=require(\"./template.js\"),uuid=require(\"./uuid.js\"),Logger=null,Buffer=global.Buffer;Buffer||(Buffer=function(){},Buffer.prototype.toString=function(){},global.Buffer=Buffer);var Symbol=global.Symbol;Symbol||(Symbol=function(){this.key=uuid.createUUID()},Symbol.prototype.toString=function(){return this.key},global.Symbol=Symbol);var deprecated=function(e,r,t){var n=!1;return function(){if(!n){n=!0;var i=require(\"./logger.js\");(new i).warn(\"Function \"+e+\" is deprecated, please use \"+r)}return t.apply(this,arguments)}},getScriptEngineName=function(){return Object.prototype.toSource&&Object.prototype.watch&&Object.prototype.unwatch?\"SM\":\"V8\"},objectize=function(e){return isNull(e)&&(e={}),function(){return this}.bind(e)()},isNull=function(e){return null===e||void 0===e},isKindOf=function(e,r){if(isNull(e))return!1;switch(typeof e){case\"boolean\":return r===Boolean;case\"number\":return r===Number;case\"string\":return r===String;case\"function\":return r===Function;case\"symbol\":return r===Symbol;case\"undefined\":return!1;case\"object\":default:return e instanceof r}},simplify=function(e){if(isNull(e))return null;switch(typeof e){case\"boolean\":case\"number\":case\"string\":case\"function\":case\"symbol\":return e;case\"undefined\":return!1;case\"object\":default:return e instanceof Boolean?e&&!0:e instanceof Number?e+0:e instanceof String?e+\"\":e}},prepadZero=function(e,r){for(e+=\"\";e.length<r;)e=\"0\"+e;return e},jsonizeIndentUnit=\"    \",jsonizeMaximumLevel=3,jsonize=function(e,r,t){if(t=parseInt(t),isFinite(t)||(t=jsonizeMaximumLevel),null===e)return\"null\";if(void 0===e)return\"undefined\";if(isKindOf(e,Boolean))return e?\"true\":\"false\";if(isKindOf(e,Number))return e+\"\";if(isKindOf(e,String))return'\"'+e.replace(/\\\\/gim,\"\\\\\\\\\").replace(/\\n/gim,\"\\\\n\").replace(/\\r/gim,\"\\\\r\").replace(/\"/gim,'\\\\\"')+'\"';if(isKindOf(e,RegExp))return\"/\"+e.source+\"/\"+(e.global?\"g\":\"\")+(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\");if(isKindOf(e,Function))return e.name?\"function \"+e.name+\"() { /* code */ }\":\"function () { /* code */ }\";if(isKindOf(e,Date))return'new Date(\"'+formatDate(e)+'\")';if(isKindOf(e,Error))return r=r?r:\"\",\"new \"+e.name+'(\"'+e.message.replace(/\\\\/gim,\"\\\\\\\\\").replace(/\\n/gim,\"\\\\n\").replace(/\\r/gim,\"\\\\r\").replace(/\"/gim,'\\\\\"')+'\") /*\\n'+getStack(e).split(\"\\n\").map(function(e){return r+e}).join(\"\\n\")+\"\\n\"+r+\"*/\";if(isKindOf(e,Array)){if(e.length>0){if(r&&r.length/jsonizeIndentUnit.length>=t)return\"[ /* \"+e.length+\" items ... */ ]\";var n=[\"[\",\" \",\"/* \",e.length,\" \",\"items\",\" */\",\"\\n\"],i=(r?r:\"\")+jsonizeIndentUnit;return e.forEach(function(r,a){n.push(i),n.push(jsonize(r,i,t)),a<e.length-1&&n.push(\",\"),n.push(\"\\n\")}),r&&n.push(r),n.push(\"]\"),n.join(\"\")}return\"[]\"}var a=[],u=[];for(var s in e)isKindOf(e[s],Function)?-1===u.indexOf(s)&&u.push(s):-1===a.indexOf(s)&&void 0!==e[s]&&a.push(s);a=a.sort(comparator.insensitiveNaturalComparator),u=u.sort(comparator.insensitiveNaturalComparator);var l=e.constructor.name;if(l=l?\" /* \"+l:\"\",e.constructor===Object&&(l=\"\"),a.length>0||u.length>0){if(r&&r.length/jsonizeIndentUnit.length>=t)return l?\"{\"+l+\" ... */ }\":\"{ /* ... */ }\";var n=[\"{\",l];l&&n.push(\" */\"),n.push(\"\\n\");var i=(r?r:\"\")+jsonizeIndentUnit;return a.forEach(function(r,s){n.push(i),n.push(jsonize(r)),n.push(\": \"),n.push(jsonize(e[r],i,t)),(s<a.length-1||u.length>0)&&n.push(\",\"),n.push(\"\\n\")}),u.forEach(function(r,a){n.push(i),n.push(jsonize(r)),n.push(\": \"),n.push(jsonize(e[r],i,t)),a<u.length-1&&n.push(\",\"),n.push(\"\\n\")}),r&&n.push(r),n.push(\"}\"),n.join(\"\")}return l?\"{\"+l+\" */ }\":\"{}\"},isArrayLike=function(e,r){return isNull(e)?!1:e.constructor===String?r?!0:!1:isFinite(parseInt(e.length))},iterateArray=function(e,r){isArrayLike(e)&&Array.prototype.forEach.call(e,r)},copyAsArray=function(e){return isArrayLike(e)?Array.prototype.slice.call(e,0):[]},formatDate=function(e,r,t){var n=function(e,r){for(e+=\"\";e.length<r;)e=\"0\"+e;return e};e||(e=new Date),r||(r=\"YYYY-MM-DD hh:mm:ss.SSS\");for(var i=[],a=0;a<r.length;)switch(r[a]){case\"Y\":\"Y\"==r[a+1]?\"Y\"==r[a+2]&&\"Y\"==r[a+3]?(i.push(n(t?e.getUTCFullYear():e.getFullYear(),4)),a+=4):(i.push(n((t?e.getUTCFullYear():e.getFullYear())%100,2)),a+=2):(i.push((t?e.getUTCFullYear():e.getFullYear())+\"\"),++a);break;case\"M\":\"M\"==r[a+1]?(i.push(n((t?e.getUTCMonth():e.getMonth())+1,2)),a+=2):(i.push((t?e.getUTCMonth():e.getMonth())+1+\"\"),++a);break;case\"D\":\"D\"==r[a+1]?(i.push(n(t?e.getUTCDate():e.getDate(),2)),a+=2):(i.push((t?e.getUTCDate():e.getDate())+\"\"),++a);break;case\"h\":\"h\"==r[a+1]?(i.push(n(t?e.getUTCHours():e.getHours(),2)),a+=2):(i.push((t?e.getUTCHours():e.getHours())+\"\"),++a);break;case\"m\":\"m\"==r[a+1]?(i.push(n(t?e.getUTCMinutes():e.getMinutes(),2)),a+=2):(i.push((t?e.getUTCMinutes():e.getMinutes())+\"\"),++a);break;case\"s\":\"s\"==r[a+1]?(i.push(n(t?e.getUTCSeconds():e.getSeconds(),2)),a+=2):(i.push((t?e.getUTCSeconds():e.getSeconds())+\"\"),++a);break;case\"S\":\"S\"==r[a+1]&&\"S\"==r[a+2]?(i.push(n(t?e.getUTCMilliseconds():e.getMilliseconds(),3)),a+=3):(i.push((t?e.getUTCMilliseconds():e.getMilliseconds())+\"\"),++a);break;case'\"':case\"'\":for(var u=1;r[a+u]!=r[a]&&a+u<r.length;)\"\\\\\"==r[a+u]?(i.push(r[a+u+1]),u+=2):(i.push(r[a+u]),++u);a+=u+1;break;default:i.push(r[a]),++a}return i.join(\"\")},iterateObject=function(e){if(!(isNull(e)||isKindOf(e,Boolean)||isKindOf(e,Number)||isKindOf(e,String)||isKindOf(e,Date)||isKindOf(e,RegExp))){var r=!1;3===arguments.length&&(r=arguments[1]?!0:!1);var t=arguments[arguments.length-1];Object.keys(e).slice(0).forEach(function(n){(e.hasOwnProperty(n)||r)&&t(n,e[n])})}},couldBeAcceptedAs=function(e,r){var t=\"m\";switch(r&&0===r.indexOf(\"regex-source-\")&&(t=r.split(\"-\")[2],r=\"regex-source\"),r){case\"boolean\":return isKindOf(e,Boolean);case\"number\":return isKindOf(e,Number);case\"string\":return isKindOf(e,String);case\"buffer\":return isKindOf(e,Buffer);case\"date\":return isKindOf(e,Date);case\"regex\":return isKindOf(e,RegExp);case\"function\":return isKindOf(e,Function);case\"array\":return isKindOf(e,Array);case\"array-like\":return isArrayLike(e);case\"object\":return isNull(e)||isKindOf(e,Boolean)||isKindOf(e,Number)||isKindOf(e,String)||isKindOf(e,RegExp)||isKindOf(e,Date)||isKindOf(e,Function)?!1:!0;case\"any\":return!0;default:return isKindOf(r,Function)&&isKindOf(e,r)?!0:!1}},getStack=function(e){var r=null;switch(e?(r=e.stack.split(\"\\n\"),\"V8\"===getScriptEngineName()&&(r=r.slice(1))):(r=new Error(\"Get stack\").stack.split(\"\\n\"),r=r.slice(\"V8\"===getScriptEngineName()?2:1)),getScriptEngineName()){case\"SM\":return\"    at \"!==r[0].substring(0,7)?r.join(\"\\n\").trim().split(\"\\n\").map(function(e){var r=e.split(\"@\");return r[0].trim().length>0?\"    at \"+r[0]+\" (\"+r.slice(1).join(\"@\")+\")\":\"    at Object.<anonymous> (\"+r.slice(1).join(\"@\")+\")\"}).join(\"\\n\"):r.join(\"\\n\");case\"V8\":return r.join(\"\\n\");default:return r.join(\"\\n\")}},convert=function(e,r,t){var n=\"m\";r&&0===r.indexOf(\"regex-source-\")&&(n=r.split(\"-\")[2],r=\"regex-source\");var i=function(e){if(t&&t.validator){if(template.execute(t.validator,{data:e},{functors:{isArrayLike:function(e,r,t,n,i){return isArrayLike(i)},\"enum\":function(e,r,t,n){var i=Array.prototype.slice.call(arguments,4);return-1!==i.indexOf(t.data)},range:function(e,r,t,n,i,a,u,s){return t.data>=i&&t.data<=a?u&&t.data===i?!1:s&&t.data===a?!1:!0:!1},notNull:function(e,r,t,n){return null!==t.data&&void 0!==t.data},notEmpty:function(e,r,t,n){return isKindOf(t.data,String)?t.data.length>0:isKindOf(t.data,Array)?t.data.length>0:isArrayLike(t.data)?t.data.length>0:null!==t.data&&void 0!==t.data}}}))return e;if(t.hasOwnProperty(\"failedValue\"))return t.failedValue;throw new Error(\"Invalid value: \"+e)}return e};switch(r){case\"boolean\":return i(isNull(e)&&t?t.defaultValue?!0:!1:e?!0:!1);case\"number\":var a=NaN;a=t&&t.numberAsInteger?parseInt(e):parseFloat(e);var u=!1;return u=t&&t.numberShouldFinite?!isFinite(a):isNaN(a),u&&(t&&t.numberAsInteger?a=parseInt(t.defaultValue):t&&(a=parseFloat(t.defaultValue))),i(a);case\"string\":if(isKindOf(e,Date))return i(formatDate(e,\"YYYY-MM-DDThh:mm:ss.SSSZ\",!0));if(isArrayLike(e)&&t&&t.stringDelimiter)return i(copyAsArray(e).join(t.stringDelimiter));var s;return isNull(e)||(s=t&&t.autotrim?(\"\"+e).trim():\"\"+e),t&&t.emptyAsNull&&0===s.length&&(s=null),isNull(s)&&t&&!isNull(t.defaultValue)&&(s=\"\"+t.defaultValue),i(s);case\"buffer\":return isKindOf(e,String)?i(new Buffer(e,\"utf8\")):isKindOf(e,Buffer)?i(e):(e=t.defaultValue,isKindOf(e,String)?i(new Buffer(e,\"utf8\")):isKindOf(e,Buffer)?i(e):null);case\"date\":return i(isKindOf(e,String)?/^(\\-?)[0-9]+$/.test(e)?new Date(parseInt(e)):new Date(e):isKindOf(e,Number)?new Date(e):isKindOf(e,Date)?e:t?isNull(t.defaultValue)?null:t.defaultValue:null);case\"regex\":case\"regex-ignore-case\":if(isNull(e)&&t&&(e=t.defaultValue),isKindOf(e,RegExp))return i(e);if(isNull(e))return i(null);var l=new RegExp(\"^\"+(e+\"\").replace(/[\\$\\^\\*\\(\\)\\-\\+\\[\\]\\{\\}\\\\\\|\\,\\?\\/\\.]/g,function(e){return\"\\\\\"+e})+\"$\",\"m\");return l.fromString=e,i(l);case\"regex-asterisk\":if(isNull(e)&&t&&(e=t.defaultValue),isKindOf(e,RegExp))return i(e);if(isNull(e))return i(null);var l=new RegExp(\"^\"+(e+\"\").replace(/[\\$\\^\\(\\)\\-\\+\\[\\]\\{\\}\\\\\\|\\,\\?\\/\\.]/g,function(e){return\"\\\\\"+e}).replace(/\\*/g,\".*\")+\"$\",\"m\");return l.fromString=e,i(l);case\"regex-asterisk-dot\":if(isNull(e)&&t&&(e=t.defaultValue),isKindOf(e,RegExp))return i(e);if(isNull(e))return i(null);var l=new RegExp(\"^\"+(e+\"\").replace(/[\\$\\^\\(\\)\\-\\+\\[\\]\\{\\}\\\\\\|\\,\\?\\/\\.]/g,function(e){return\"\\\\\"+e}).replace(/(\\\\\\.)*(\\*+)(\\\\\\.)*/g,function(e){return\"\\\\.\"===e.slice(0,2)?\"\\\\.\"===e.slice(-2)?\"(\\\\.|\\\\..+\\\\.)\":\"(\\\\..+)?\":\"\\\\.\"===e.slice(-2)?\"(.+\\\\.)?\":\".*\"})+\"$\",\"m\");return l.fromString=e,i(l);case\"regex-path\":if(isNull(e)&&t&&(e=t.defaultValue),isKindOf(e,RegExp))return i(e);if(isNull(e))return i(null);var l=new RegExp(\"^\"+(e+\"\").replace(/[\\\\\\/]+$/,\"\").replace(/((^|[^\\\\\\/])[\\\\\\/]([^\\\\\\/]|$))|([\\$\\^\\(\\)\\-\\+\\[\\]\\{\\}\\|\\,\\\\\\/\\.])/g,function(e){return e.length>1?e.replace(/[\\\\\\/]/g,\"[\\\\\\\\\\\\/]\"):\"\\\\\"+e}).replace(/^(\\\\\\/){2,}/g,\"(.+[\\\\/\\\\\\\\])?\").replace(/(\\\\\\/){2,}/g,\"([\\\\/\\\\\\\\].+[\\\\/\\\\\\\\]|[\\\\/\\\\\\\\])\").replace(/\\*/g,\"[^\\\\/\\\\\\\\\\\\*\\\\?]+\")+\"$\",\"im\");return l.fromString=e,i(l);case\"regex-source\":if(isNull(e)&&t&&(e=t.defaultValue),isKindOf(e,RegExp))return i(e);if(isNull(e))return i(null);var l=new RegExp(e+\"\",n);return l.fromString=e,i(l);case\"function\":return i(isKindOf(e,Function)?e:isNull(e)?t&&t.hasOwnProperty(\"defaultValue\")?isKindOf(t.defaultValue,Function)?t.defaultValue:function(){return t.defaultValue}:function(){return e}:function(){return e});case\"array\":var o=null;if(isNull(e)&&t&&(e=t.defaultValue),isKindOf(e,String))if(t&&t.stringDelimiter)if(isArrayLike(t.stringDelimiter)){var l=new RegExp(\"(\"+t.stringDelimiter.map(function(e){return(e+\"\").replace(/[\\$\\^\\*\\(\\)\\-\\+\\[\\]\\{\\}\\\\\\|\\,\\?\\/\\.]/g,function(e){return\"\\\\\"+e})}).join(\")|(\")+\")\");o=e.split(l).filter(function(e){return isNull(e)?!1:!l.test(e)})}else o=e.split(t.stringDelimiter);else t&&t.autowrapAsArray&&(o=[e]);else isArrayLike(e)?o=copyAsArray(e):t&&t.autowrapAsArray&&(o=[e]);if(o){if(t&&t.autotrim&&(o=o.map(function(e){return isKindOf(e,String)?e.trim():e})),t&&t.ignoreEmptyElement&&(o=o.filter(function(e){return e?!0:!1})),t&&t.uniqueElement){var c=[];o.forEach(function(e){-1===c.indexOf(e)&&c.push(e)}),o=c}}else o=[];return i(o);case\"array-autoindex\":isNull(e)&&t&&(e=t.defaultValue);var o=[];if(e&&Object.keys(e).forEach(function(r){o.push(e[r])}),t&&t.autotrim&&(o=o.map(function(e){return isKindOf(e,String)?e.trim():e})),t&&t.ignoreEmptyElement&&(o=o.filter(function(e){return e?!0:!1})),t&&t.uniqueElement){var c=[];o.forEach(function(e){-1===c.indexOf(e)&&c.push(e)}),o=c}return i(o);case\"object\":if(isNull(e)&&t&&(e=t.defaultValue),isNull(e)||isKindOf(e,Boolean)||isKindOf(e,Number)||isKindOf(e,String)||isKindOf(e,RegExp)||isKindOf(e,Date))return i({});var s={};return iterateObject(e,function(e,r){s[e]=r}),i(s);default:return i(isKindOf(r,Function)?isKindOf(e,r)?e:new r(e):e)}},merge=function(){var e=copyAsArray(arguments);return e.unshift({}),advancedMerge.apply(this,e)},advancedMerge=function(e){var r=null;e&&e[\"!noLogger\"]?r={warn:function(e){}}:(Logger||(Logger=require(\"./logger.js\")),r=new Logger);var t=null;return copyAsArray(arguments).slice(1).forEach(function(n){var i=function(e,t,n,a,u){if(n||(n={}),a){var s={};Object.keys(a).forEach(function(e){s[e]=a[e]}),a=s}else a={};if(u){var l={};Object.keys(a).forEach(function(e){l[e]=u[e]}),u=l}else u={};n[\"!templateData\"]&&Object.keys(n[\"!templateData\"]).forEach(function(e){a[e]=n[\"!templateData\"][e]}),n[\"!templateFunctors\"]&&Object.keys(n[\"!templateFunctors\"]).forEach(function(e){u[e]=n[\"!templateFunctors\"][e]}),n[\"!warningMessage\"]&&r.warn(n[\"!warningMessage\"]);var o=\"unknown\",c=function(e,r){if(o=r,n[e]){var i={};n[e].split(/[\\s,]+/g).forEach(function(e){i[e]=t}),t=i}},f=function(e){if(n[\"!postscript\"]){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.data=e,template.execute(n[\"!postscript\"],r,{functors:u})}return e};if(isNull(t)||isKindOf(t,Symbol))n[\"!nullOperation\"]?operation=n[\"!nullOperation\"]:operation=\"omit\",o=\"null\";else if(isKindOf(t,Boolean))c(\"!booleanFields\",\"boolean\");else if(isKindOf(t,Number))c(\"!numberFields\",\"number\");else if(isKindOf(t,String))c(\"!stringFields\",\"string\");else if(isKindOf(t,Buffer))c(\"!bufferFields\",\"buffer\");else if(isKindOf(t,Date))c(\"!dateFields\",\"date\");else if(isKindOf(t,RegExp))c(\"!regexFields\",\"regex\");else if(isKindOf(t,Function)&&n[\"!functionField\"])c(\"!functionFields\",\"function\");else if(Array.isArray(t))if(n[\"!arrayFields\"]){var d={};n[\"!arrayFields\"].split(/[\\s,]+/g).forEach(function(e){d[e]=t}),t=d}else n[\"!arrayOperation\"]&&(operation=n[\"!arrayOperation\"]),o=\"array\";else o=\"object\";var p={stringDelimiter:n[\"!stringDelimiter\"],autowrapAsArray:!0,autotrim:n[\"!autotrimString\"],ignoreEmptyElement:n[\"!ignoreEmptyElement\"],defaultValue:n[\"!defaultValue\"],numberAsInteger:n[\"!numberAsInteger\"],validator:n[\"!validator\"]};if(n.hasOwnProperty(\"!failedValue\")&&(p.failedValue=n[\"!failedValue\"]),t=convert(t,n[\"!valueType\"],p),isNull(t)||\"null\"===o)return f(\"overwrite\"===n[\"!nullOperation\"]?isNull(n[\"!defaultValue\"])?null:i(null,n[\"!defaultValue\"],n,a,u):isNull(e)&&!isNull(n[\"!defaultValue\"])?i(null,n[\"!defaultValue\"],n,a,u):e);var g=n[\"!valueType\"];g&&0===g.indexOf(\"regex\")&&(g=\"regex\");var m=function(r){return isNull(e)?isNull(n[\"!defaultValue\"])?t:r(convert(n[\"!defaultValue\"],n[\"!valueType\"]),t):r(e,t)};switch(g){case\"boolean\":switch(n[\"!operation\"]){case\"and\":return f(m(function(e,r){return e&&r}));case\"or\":return f(m(function(e,r){return e||r}));case\"overwrite\":default:return f(t)}case\"number\":switch(n[\"!operation\"]){case\"plus\":return f(m(function(e,r){return e+r}));case\"multiply\":return f(m(function(e,r){return e*r}));case\"and\":return f(m(function(e,r){return e&r}));case\"or\":return f(m(function(e,r){return e|r}));case\"xor\":return f(m(function(e,r){return e^r}));case\"min\":return f(m(function(e,r){return Math.min(e,r)}));case\"max\":return f(m(function(e,r){return Math.max(e,r)}));case\"overwrite\":default:return f(t)}case\"string\":switch(n[\"!operation\"]){case\"plus\":case\"concat\":return f(m(function(e,r){return isNull(n[\"!stringDelimiter\"])?e+r:e&&r?e+n[\"!stringDelimiter\"]+r:e+r}));case\"overwrite\":default:return f(t)}case\"buffer\":switch(n[\"!operation\"]){case\"concat\":return f(m(function(e,r){return Buffer.concat([e,r])}));case\"overwrite\":default:return f(t)}case\"date\":switch(n[\"!operation\"]){case\"min\":return f(m(function(e,r){return e.getTime()<r.getTime()?e:r}));case\"max\":return f(m(function(e,r){return e.getTime()>r.getTime()?e:r}));case\"overwrite\":default:return f(t)}case\"regex\":return f(t);case\"function\":var h=function(e,r,t){return function(){if(e){var n=e.apply(this,arguments);return r?t(n,r.apply(this,arguments)):t(n)}return r?t(r.apply(this,arguments)):t()}},y=function(r){return isNull(e)?isNull(n[\"!defaultValue\"])?t:h(t,convert(n[\"!defaultValue\"],n[\"!valueType\"]),r):h(t,convert(e,n[\"!valueType\"]),r)};switch(n[\"!operation\"]){case\"multicall\":return f(y(function(){}));case\"plus\":return f(y(function(){var e=0;return copyAsArray(arguments).forEach(function(r){e+=r}),e}));case\"multiply\":return f(y(function(){var e=1;return copyAsArray(arguments).forEach(function(r){e*=r}),e}));case\"and\":return f(y(function(){var e=1;return copyAsArray(arguments).forEach(function(r){e=e&&r}),e}));case\"or\":return f(y(function(){var e=0;return copyAsArray(arguments).forEach(function(r){e=e||r}),e}));case\"min\":return f(y(function(){return Math.min.apply(Math,arguments)}));case\"max\":return f(y(function(){return Math.max.apply(Math,arguments)}));case\"concat\":return f(y(function(){var e=[];return copyAsArray(arguments).forEach(function(r){e.push(i(null,r,n[\"!resultVariant\"],a,u))}),e}));case\"union\":return f(y(function(){var e=[];return copyAsArray(arguments).forEach(function(r){-1===e.indexOf(r)&&e.push(i(null,r,n[\"!resultVariant\"],a,u))}),e}));case\"merge\":return f(y(function(){var e=copyAsArray(arguments);return e.unshift(n[\"!resultVariant\"]),advancedMerge.call(this,e)}));case\"overwrite\":default:return f(t)}case\"array\":case\"array-autoindex\":switch(n[\"!operation\"]){case\"concat\":var O=[];return iterateArray(e,function(e){O.push(i(null,e,n[\"!arrayElement\"],a,u))}),iterateArray(t,function(e){O.push(i(null,e,n[\"!arrayElement\"],a,u))}),f(O);case\"union\":var O=[];return iterateArray(e,function(e){e=i(null,e,n[\"!arrayElement\"],a,u);var r=getIndex(O,n[\"!comparatorPath\"],n[\"!comparatorType\"],getProperty(e,n[\"!comparatorPath\"]));-1===r?O.push(e):O[r]=i(O[r],e,n[\"!arrayElement\"],a,u)}),iterateArray(t,function(e){e=i(null,e,n[\"!arrayElement\"],a,u);var r=getIndex(O,n[\"!comparatorPath\"],n[\"!comparatorType\"],getProperty(e,n[\"!comparatorPath\"]));-1===r?O.push(e):O[r]=i(O[r],e,n[\"!arrayElement\"],a,u)}),f(O);case\"overwrite\":return f(t.slice(0));case\"merge\":default:var O=[];return iterateArray(e,function(e,r){O[r]=i(null,e,n[\"!arrayElement\"],a,u)}),iterateArray(t,function(e,r){O[r]=i(O[r],e,n[\"!arrayElement\"],a,u)}),f(O)}case\"object\":default:var v=function(e,t,s){for(;n[t]&&n[t][\"!aliasField\"];){var l=n[t][\"!aliasField\"];n[t][\"!aliasDeprecated\"]&&r.warn('Field \"'+t+'\" is deprecated, please use field \"'+l+'\"'),s=i(e[t],s,n[t],a,u),t=l}n[t]?e[t]=i(e[t],s,n[t],a,u):n[\"!objectProperty\"]?e[t]=i(e[t],s,n[\"!objectProperty\"],a,u):n[\"!objectElement\"]?(r.warn('Template definition \"!objectElement\" is deprecated for adavanced merge, please use \"!objectProperty\"'),e[t]=i(e[t],s,n[\"!objectElement\"],a,u)):e[t]=i(e[t],s,null,a,u)};if(isKindOf(t,Boolean)||isKindOf(t,Number)||isKindOf(t,String)||isKindOf(t,Buffer)||isKindOf(t,Date)||isKindOf(t,RegExp)||isKindOf(t,Function)||isKindOf(t,Error)||isKindOf(t,Symbol)||isNull(e)||isKindOf(e,Boolean)||isKindOf(e,Number)||isKindOf(e,String)||isKindOf(e,Date)||isKindOf(e,Function)||isKindOf(e,Error)||isKindOf(e,Symbol)||isKindOf(e,RegExp)){if(isKindOf(t,Boolean)||isKindOf(t,Number)||isKindOf(t,String)||isKindOf(t,Buffer)||isKindOf(t,Date)||isKindOf(t,RegExp)||isKindOf(t,Function)||isKindOf(t,Error)||isKindOf(t,Symbol))return f(t);if(\"assign\"===n[\"!operation\"]||t&&t.constructor!==Object)return iterateObject(n,function(e,r){\"!\"!==e[0]&&!isNull(r)&&n[e].hasOwnProperty(\"!defaultValue\")&&v(t,e,null)}),f(t);var O=isKindOf(t,Array)&&!g?[]:{};return iterateObject(t,function(e,r){v(O,e,r)}),iterateObject(n,function(e,r){\"!\"!==e[0]&&!isNull(r)&&n[e].hasOwnProperty(\"!defaultValue\")&&isNull(O[e])&&v(O,e,null)}),f(O)}switch(n[\"!operation\"]){case\"assign\":return iterateObject(n,function(e,r){\"!\"!==e[0]&&!isNull(r)&&n[e].hasOwnProperty(\"!defaultValue\")&&isNull(O[e])&&v(t,e,null)}),f(t);case\"overwrite\":var O=isKindOf(t,Array)&&!g?[]:{};return iterateObject(t,function(e,r){v(O,e,r)}),iterateObject(n,function(e,r){\"!\"!==e[0]&&!isNull(r)&&n[e].hasOwnProperty(\"!defaultValue\")&&isNull(O[e])&&v(O,e,null)}),f(O);case\"merge\":default:var O=t;return t.constructor===Object&&(O=isKindOf(t,Array)&&!g?[]:{}),iterateObject(e,function(e,r){v(O,e,r)}),O!==t&&iterateObject(t,function(e,r){v(O,e,r)}),iterateObject(n,function(e,r){\"!\"!==e[0]&&!isNull(r)&&n[e].hasOwnProperty(\"!defaultValue\")&&isNull(O[e])&&v(O,e,null)}),f(O)}}};t=i(t,n,e,{},{})}),t},matchArguments=function(e,r,t){var n={};iterateObject(r,function(e,r){n[e]=advancedMerge({\"!noLogger\":!0,\"!stringFields\":\"acceptsTypes\",\"!arrayFields\":\"acceptsTypes\",acceptTypes:{\"!valueType\":\"array-autoindex\",\"!stringFields\":\"type\",\"!defaultValue\":[\"any\"]},mergeOptions:{\"!valueType\":\"object\"},defaultValue:null},r)});var i=null;if(iterateObject(e,function(e,r){if(r.length===t.length){for(var a={},u=!1,s=0;s<r.length;){var l=n[r[s]],o=!1;l.acceptTypes.forEach(function(e){o||(o=couldBeAcceptedAs(t[s],e))}),o?l.mergeOptions?a[r[s]]=advancedMerge(l.mergeOptions,t[s]):a[r[s]]=t[s]:u=!0,++s}u||(i=a)}}),i)return iterateObject(n,function(e,r){i.hasOwnProperty(e)||(i[e]=advancedMerge(r.mergeOptions,r.defaultValue))}),i;throw new Error(\"Invalid arguments to match with settings\")},getProperty=function(e,r){return r=convert(r,\"string\"),isNull(r)&&(r=\"\"),r=r.replace(/[\\.\\s]+/g,\".\"),r.length>0&&\".\"!==r&&r.split(\".\").forEach(function(r){e=isNull(e)?null:e[r]}),e},getIndex=function(e,r,t,n){r=convert(r,\"string\"),isNull(r)&&(r=\"\");for(var i=comparator.generatePathComparator(r,t,!0),a=0;a<e.length;){if(0===i(e[a],n))return a;++a}return-1},keys=function(e){var r=[];for(var t in e)-1===r.indexOf(t)&&r.push(t);return r.sort(comparator.insensitiveNaturalComparator)},stringHash=function(e){var r,t,n,i=0;if(0==e.length)return i;for(r=0,n=e.length;n>r;r++)t=e.charCodeAt(r),i=(i<<5)-i+t,i|=0;return i};module.exports={deprecated:deprecated,getScriptEngineName:getScriptEngineName,objectize:objectize,isNull:isNull,isKindOf:isKindOf,isArrayLike:isArrayLike,copyAsArray:copyAsArray,iterateArray:iterateArray,iterateObject:iterateObject,formatDate:formatDate,couldBeAcceptedAs:couldBeAcceptedAs,simplify:simplify,convert:convert,merge:merge,advancedMerge:advancedMerge,prepadZero:prepadZero,getStack:getStack,jsonize:jsonize,matchArguments:matchArguments,getProperty:getProperty,getIndex:getIndex,keys:keys,stringHash:stringHash};"}},"/library/lab.common/home.js":{"url":"/library/lab.common/home.js","content":{"encoding":"text","data":"var fs=require(\"fs\"),path=require(\"path\"),Module=require(\"module\"),foundation=require(\"./foundation.js\"),storage=require(\"./storage.js\"),configCaches={},registeredConfigs={},utilHomeDir=null,getConfig=function(e,t,i){var n=getUtilFS(e);!configCaches.hasOwnProperty(e)||t?n.exists(e,function(t){t?n.stat(e,function(t,r){t?(configCaches[e]={},i(configCaches[e])):r.isFile()?n.readFile(e,function(t,n){if(t)configCaches[e]={};else try{configCaches[e]=JSON.parse(n.toString(\"utf8\"))}catch(t){configCaches[e]={}}i(configCaches[e])}):(configCaches[e]={},i(configCaches[e]))}):(configCaches[e]={},i(configCaches[e]))}):i(configCaches[e])},getConfigSync=function(e,t){var i=getUtilFS(e);if(!configCaches.hasOwnProperty(e)||t)try{i.existsSync(e)&&i.statSync(e).isFile()?(console.log(\">>>>>> \"+e),configCaches[e]=JSON.parse(i.readFileSync(e).toString(\"utf8\"))):configCaches[e]={}}catch(n){configCaches[e]={}}return configCaches[e]},getUtilHomeDir=function(e){return e?utilHomeDir?path.resolve(utilHomeDir,e):path.resolve(process.cwd(),e):utilHomeDir?utilHomeDir:process.cwd()},setUtilHomeDir=function(e,t){utilHomeDir=e;var i=0,n=function(){i<registeredConfigs.length?(++i,getUtilConfig(registeredConfigs[i-1],null,n)):t()};n()},getUtilConfig=function(e,t){t||(t=registeredConfigs[e]);var i=foundation.copyAsArray(arguments).slice(2),n=function(){};foundation.isKindOf(i[i.length-1]),Function&&(n=i.pop());var r=path.resolve(storage.getHomeDir(\".mew/conf\"),e+\".json\"),o=path.resolve(getUtilHomeDir(\"conf\"),e+\".json\");getConfig(r,t[\"!noCache\"],function(e){i.unshift(e),r!==o?getConfig(o,t[\"!noCache\"],function(e){i.unshift(e),i.unshift(t),n(foundation.advancedMerge.apply(foundation,i))}):(i.unshift(t),n(foundation.advancedMerge.apply(foundation,i)))})},getUtilConfigSync=function(e,t){t||(t=registeredConfigs[e]);var i=foundation.copyAsArray(arguments).slice(2),n=path.resolve(storage.getHomeDir(\".mew/conf\"),e+\".json\"),r=path.resolve(getUtilHomeDir(\"conf\"),e+\".json\");return i.unshift(getConfigSync(n,t[\"!noCache\"])),n!==r&&i.unshift(getConfigSync(r,t[\"!noCache\"])),i.unshift(t),foundation.advancedMerge.apply(foundation,i)},registerUtilConfig=function(e,t){registeredConfigs.hasOwnProperty(e)||(registeredConfigs[e]=t)},fses={},requires={},registerUtilFS=function(e,t,i){var n=path.resolve(e);fses[n]=t,i&&(requires[n]=i)},getUtilFS=function(e){e=path.resolve(e);var t=null;return Object.keys(fses).forEach(function(i){(e===i||0===e.indexOf(i+path.sep))&&(!t||t.length<i.length)&&(t=i)}),t?fses[t]:fs},requireModule=function(e,t){var i=resolveModule(e,t),n=null;return Object.keys(requires).forEach(function(e){(filePath===e||0===filePath.indexOf(e+path.sep))&&(!n||n.length<e.length)&&(n=e)}),n?requires[n].require(i):void require(\"module\").prototype.require.call(e,i)},resolveModule=function(e,t){if(\".\"===t[0]){var i=path.normalize(path.join(path.dirname(e.id),t)),n=getUtilFS(i);if(n.existsSync(i))return i;throw new Error(\"Module not found \"+t)}if(storage.isRootPath(t)){var n=getUtilFS(i);if(n.existsSync(i))return i;throw new Error(\"Module not found \"+t)}if(-1!==[\"child_process\",\"cluster\",\"crypto\",\"debugger\",\"dgram\",\"dns\",\"domain\",\"events\",\"fs\",\"http\",\"https\",\"module\",\"net\",\"os\",\"path\",\"process\",\"punycode\",\"querystring\",\"readline\",\"repl\",\"smalloc\",\"stream\",\"string_decoder\",\"timers\",\"tls\",\"tty\",\"url\",\"util\",\"vm\",\"zlib\"].indexOf(t))return t;for(var r=e.id;r!==path.dirname(r);){r=path.dirname(r);var i=path.normalize(path.join(r,\"node_modules\",t)),n=getUtilFS(i);if(n.existsSync(i)&&n.statSync(i).isDirectory())return i;if(n.existsSync(i+\".js\")&&n.statSync(i+\".js\").isFile())return i+\".js\";if(n.existsSync(i+\".json\")&&n.statSync(i+\".json\").isFile())return i+\".json\"}var i=path.normalize(path.join(storage.getHomeDir(\".node_modules\"),t)),n=getUtilFS(i);if(n.existsSync(i)&&n.statSync(i).isDirectory())return i;if(n.existsSync(i+\".js\")&&n.statSync(i+\".js\").isFile())return i+\".js\";if(n.existsSync(i+\".json\")&&n.statSync(i+\".json\").isFile())return i+\".json\";var i=path.normalize(path.join(storage.getHomeDir(\".node_libraries\"),t)),n=getUtilFS(i);if(n.existsSync(i)&&n.statSync(i).isDirectory())return i;if(n.existsSync(i+\".js\")&&n.statSync(i+\".js\").isFile())return i+\".js\";if(n.existsSync(i+\".json\")&&n.statSync(i+\".json\").isFile())return i+\".json\";throw new Error(\"Module not found \"+t)},mewJSes={},registerMewJS=function(e,t){mewJSes[e]=foundation.merge(mewJSes[e],t)},getMewJSInfo=function(){var e=null;if(e=foundation.isKindOf(arguments[0],Number)?storage.standardizePath(getFileLine(offset+1,0).split(\":\").slice(0,-1).join(\":\")):arguments[0],\".mew-js\"===path.extname(e)){var t=e.split(\".\").slice(-2)[0];return mewJSes[t]}return null},getFileLine=function(e,t,i){var n=(new Error).stack,r=\"@\";\"V8\"===foundation.getScriptEngineName()&&(++e,r=\"at\"),foundation.isKindOf(t,Number)||(t=3);var t=n.split(\"\\n\")[e+1].split(r).slice(1).join(r).split(path.sep).slice(-t).join(\"/\").split(\":\");return\".jx\"===path.extname(t[0])&&(t[0]=t[0].substring(0,t[0].length-3)),i?t.join(\":\").trim():t.slice(0,t.length-1).join(\":\").trim()};require(\"module\")._extensions[\".mew-js\"]=function(e,t,i){var n=path.normalize(path.join(path.dirname(t),path.basename(t).split(\".\").slice(0,-2).join(\".\")+\".js\")),r=fs.readFileSync(n,\"utf8\");65279===r.charCodeAt(0)&&(r=r.slice(1)),e._compile(r,t,void 0,void 0)};var evaluateScript=function(e,t,i){var n={};for(var r in global)n[r]=global[r];return i?n.require=i:n.require=module.require,n.exports={},n.__filename=t,n.__dirname=path.dirname(t),n.module=n,n.global=global,n.root=root,process.binding(\"evals\").NodeScript.runInThisContext(Module.wrap(e),fileID,!0).call(n.exports,n.exports,n.require,n,n.__filename,n.__dirname,global.setTimeout,global.setInterval,global.process),n};module.exports={getConfig:getConfig,getConfigSync:getConfigSync,getUtilHomeDir:getUtilHomeDir,setUtilHomeDir:setUtilHomeDir,getUtilConfig:getUtilConfig,getUtilConfigSync:getUtilConfigSync,registerUtilConfig:registerUtilConfig,registerUtilFS:registerUtilFS,getUtilFS:getUtilFS,requireModule:requireModule,resolveModule:resolveModule,registerMewJS:registerMewJS,getMewJSInfo:getMewJSInfo,getFileLine:getFileLine,evaluateScript:evaluateScript};"}},"/library/lab.common/logger.js":{"url":"/library/lab.common/logger.js","content":{"encoding":"text","data":"var os=require(\"os\"),path=require(\"path\"),foundation=require(\"./foundation.js\"),home=require(\"./home.js\");home.registerUtilConfig(\"logger\",{\"!noLogger\":!0,logLevel:{\"!valueType\":\"string\",\"!defaultValue\":\"info\"},logStyle:{\"!valueType\":\"string\",\"!defaultValue\":process.isEmbedded?\"none\":\"darwin\"===os.type().toLowerCase()?\"bright\":\"dark\"},supportMultipleLine:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},autorecordFileLine:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},prefix:{\"!valueType\":\"string\",\"!defaultValue\":\"\"}});var styleCodePoints={white:[37,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39],brightBlack:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},logLevelMap={system:1,assert:2,error:3,dump:4,warn:5,celebr:6,info:7,debug:8},logLevelDisplayMap={system:\"[system]\",assert:\"[assert]\",error:\" [error]\",warn:\"  [warn]\",info:\"  [info]\",celebr:\"[celebr]\",debug:\" [debug]\",dump:\"  [dump]\"},styles={bright:{system:[\"magenta\",\"bold\"],assert:[\"magenta\"],error:[\"red\",\"bold\"],warn:[\"yellow\",\"bold\"],celebr:[\"cyan\",\"bold\"],info:[\"black\"],debug:[\"brightBlack\"],dump:[\"blue\",\"bold\"],line:[\"white\"]},dark:{system:[\"brightMagenta\",\"bold\"],assert:[\"brightMagenta\"],error:[\"brightRed\",\"bold\"],warn:[\"brightYellow\",\"bold\"],celebr:[\"brightGreen\",\"bold\"],info:[\"brightWhite\"],debug:[\"white\"],dump:[\"brightCyan\"],line:[\"brightBlack\"]}},logPlaceholder=null,Logger=function(e){e=home.getUtilConfigSync(\"logger\",null,e),this.logLevel=e.logLevel,this.prefix=e.prefix,[\"logStyle\",\"supportMultipleLine\",\"autorecordFileLine\"].forEach(function(t){Object.defineProperty(this,t,{enumerable:!1,value:e[t]})}.bind(this))};Object.defineProperty(Logger.prototype,\"logWithLevel\",{enumerable:!1,value:function(e,t){if(logLevelMap[this.logLevel]>=logLevelMap[t]){var o=!1;if(this.handler)try{o=this.handler.apply(this,arguments)}catch(r){}o||this.logInConsole.apply(this,arguments)}}}),Object.defineProperty(Logger.prototype,\"logInConsole\",{enumerable:!1,value:function(e,t,o){var r=foundation.formatDate(new Date,\"MM-DD hh:mm:ss.SSS\",!0)+\" \"+logLevelDisplayMap[t].toUpperCase()+\" \";logPlaceholder||(logPlaceholder=r.replace(/./g,function(){return\" \"})),this.prefix&&(r+=this.prefix);var o=arguments[2];arguments.length>3&&(o=foundation.copyAsArray(arguments).slice(2).join(\", \"));var l=null;if(l=null===o?\"null\":void 0===o?\"undefined\":o instanceof Error?o.message+\"\\n\"+foundation.getStack(o):o.constructor===Buffer?o.toString():o.constructor!==String?foundation.jsonize(o):o,l=l.split(\"\\n\").map(function(e,t){return t>0?this.supportMultipleLine?logPlaceholder+e:e:r+e}.bind(this)).join(\"\\n\"),this.autorecordFileLine&&(e=\"(\"+e+\")\"),styles[this.logStyle]){var i=styles[this.logStyle][t];i&&i.forEach(function(e){if(styleCodePoints[e]){var t=\"\u001b[\"+styleCodePoints[e][0]+\"m\",o=\"\u001b[\"+styleCodePoints[e][1]+\"m\";l=t+l+o}});var n=styles[this.logStyle].line;n&&n.forEach(function(t){if(styleCodePoints[t]){var o=\"\u001b[\"+styleCodePoints[t][0]+\"m\",r=\"\u001b[\"+styleCodePoints[t][1]+\"m\";e=o+e+r}})}this.autorecordFileLine&&(l+=\" \"+e),this.output(l)}}),Object.keys(logLevelMap).forEach(function(e){Object.defineProperty(Logger.prototype,e,{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(e),t.unshift(home.getFileLine(1)),this.logWithLevel.apply(this,t)}})}.bind(this)),Object.defineProperty(Logger.prototype,\"assert\",{enumerable:!1,value:function(e){if(!e){var t=Array.prototype.slice.call(arguments,1);t.unshift(\"assert\"),t.unshift(home.getFileLine(1)),this.logWithLevel.apply(this,t)}}}),Object.defineProperty(Logger.prototype,\"dump\",{enumerable:!1,value:function(e,t){t||(t=3),this.prefix||!this.supportMultipleLine?this.logWithLevel.call(this,home.getFileLine(1),\"dump\",\"\\n\"+foundation.jsonize(e,\"\",t)):this.logWithLevel.call(this,home.getFileLine(1),\"dump\",foundation.jsonize(e,\"\",t))}}),Object.defineProperty(Logger.prototype,\"clearScreen\",{enumerable:!1,value:function(){this.output(\"\u001b[2J\")}}),Object.defineProperty(Logger.prototype,\"output\",{enumerable:!1,value:function(e){console.log(e)}}),module.exports=Logger;"}},"/library/lab.common/ruler.js":{"url":"/library/lab.common/ruler.js","content":{"encoding":"text","data":"var foundation=require(\"./foundation.js\"),comparator=require(\"./comparator.js\"),SimpleRuler=function(){};SimpleRuler.prototype.exportRules=function(e){var r=[];return e.rules&&Object.keys(e.rules).forEach(function(i){e.rules[i].forEach(function(e){r.push(e)})}),r},SimpleRuler.prototype.addRules=function(e,r){if(!foundation.isKindOf(r,Array))throw new Error(\"Rule Type Not Supported\");rulesToAdd=r,e?(e.rules||(e.rules={}),e.compiled||(e.compiled={})):e={rules:{},compiled:{}};var i=this;return r.forEach(function(r){var o={};Object.keys(r).forEach(function(e){\"!\"!==e[0]&&(o[e]=r[o])});var n=\"\";Object.keys(o).sort(comparator.naturalComparator).forEach(function(e){if(!foundation.isKindOf(r[e],String)&&!foundation.isKindOf(r[e],Array))throw new Error(\"Hash Key Error : [\"+e+\"]=\"+r[e]);n=n+\"{\"+e+\"=\"+r[e].toString()+\"}\"});var t=foundation.stringHash(n).toString(16),s=i.compileRule(r),a=r[\"!operation\"]||\"merge\";if(e.compiled[t]){switch(a){case\"merge\":e.rules[t].push(r);break;case\"assign\":e.rules[t]=[r];break;case\"clear\":delete e.rules[t]}\"clear\"===a?delete e.compiled[t]:Object.keys(s.fields).forEach(function(r){Object.keys(s.fields[r]).forEach(function(i){switch(a){case\"merge\":s.fields[r][i].forEach(function(o){e.compiled[t][r][i].indexOf(o)<0&&e.compiled[t][r][i].push(o)});break;case\"assign\":e.compiled[t][r][i]=s.fields[r][i]}})})}else e.rules[t]=[r],e.compiled[t]=s.fields}),e},SimpleRuler.prototype.match=function(e,r){if(r&&foundation.isKindOf(r,Object)&&e&&e.compiled){var i=!1;return Object.keys(e.compiled).forEach(function(o){if(!i){var n=e.compiled[o],t=!0;Object.keys(n).forEach(function(e){t&&r[e]&&Object.keys(n[e]).forEach(function(i){if(t)if(foundation.isKindOf(r[e],String))switch(i){case\"not\":t=n[e][i].toString()!==r[e];break;case\"includes\":t=n[e][i].indexOf(r[e])>=0;break;case\"equals\":t=n[e][i].toString()==r[e];break;case\"excludes\":t=n[e][i].indexOf(r[e])<0}else foundation.isKindOf(r[e],Array)?r[e].forEach(function(r){if(t)if(foundation.isKindOf(r,String))switch(i){case\"not\":t=n[e][i].toString()!==r;break;case\"includes\":t=n[e][i].indexOf(r)>=0;break;case\"equals\":t=n[e][i].toString()==r;break;case\"excludes\":t=n[e][i].indexOf(r)<0}else t=!1}):t=!1})}),t&&(i=!0)}}),i}return!0},Object.defineProperty(SimpleRuler.prototype,\"compileRule\",{enumerable:!1,value:function(e){var r=e[\"!data\"];r||(r={});var i={fields:{}},o=!1;if(Object.keys(e).forEach(function(n){if(o=!0,\"!\"!==n[0]){var t,s;if(n.indexOf(\":\")<0?(t=\"equals\",s=n):(t=n.substr(n.lastIndexOf(\":\")+1),s=n.substr(0,n.lastIndexOf(\":\"))),[\"equals\",\"includes\",\"excludes\",\"not\"].indexOf(t)<0)throw new Error(\"Operation not support\");var a=e[n];if(foundation.isKindOf(a,String)){if(\"$\"==a[0]&&(a=r[a.substr(1)],!a))throw new Error(\"No Key Found In Data\")}else{if(!foundation.isKindOf(a,Array))throw new Error(\"Rule Type not supported\");if(!a.length)throw new Error(\"Useless Rule\");for(var f=0;f<a.length;++f){if(!foundation.isKindOf(a[f][0],String))throw new Error(\"Rule Body Type not supported\");if(\"$\"==a[f][0]&&(a[f]=r[a[f].substr(1)],!a[f]))throw new Error(\"No Key Found In Data\")}}i.fields[s]||(i.fields[s]={}),i.fields[s][t]||(i.fields[s][t]=[]),Array.isArray(a)?a.forEach(function(e){i.fields[s][t].indexOf(e)<0&&i.fields[s][t].push(e)}):i.fields[s][t].indexOf(a.toString())<0&&i.fields[s][t].push(a.toString())}else i[n]=e[n]}),!o)throw new Error(\"Useless Rule\");return i}}),module.exports.simple=new SimpleRuler;"}},"/library/lab.common/storage.js":{"url":"/library/lab.common/storage.js","content":{"encoding":"text","data":"var fs=require(\"fs\"),os=require(\"os\"),path=require(\"path\"),getHomeDir=function(e){var t=process.env[\"win32\"==process.platform.toLowerCase()?\"USERPROFILE\":\"HOME\"];return e?path.resolve(t,e):t},getTempDir=function(){var e=os.tmpdir();return e||(e=process.env.TMPDIR),e||(e=process.env.TMP),e||(e=process.env.TEMP),e},makeDirTree=function(e,t,i){var n,i;switch(arguments.length){case 2:arguments[1]instanceof Function?i=arguments[1]:n=arguments[1].toString().split(\",\");break;case 3:default:n=arguments[1],i=arguments[2]}n||(n=[]),i||(i=function(){});var r=function(t){if(t)i(t);else{var a=n.shift();a?makeDir(path.join(e,a),r):i()}};r()},makeDir=function(e){var t,i;switch(arguments.length){case 2:arguments[1]instanceof Function?i=arguments[1]:t=arguments[1];break;case 3:default:t=arguments[1],i=arguments[2]}i||(i=function(){}),e=path.resolve(e);var n=path.normalize(e).split(path.sep);fs.exists(e,function(r){r?i(null):makeDir(n.slice(0,-1).join(path.sep),t,function(n){n&&\"EEXIST\"!==n.code?i(n):fs.mkdir(e,t,function(e){i(e&&\"EEXIST\"!==e.code?e:null)})})})},makeDirSync=function(e,t){e=path.resolve(e);var i=path.normalize(e).split(path.sep);fs.existsSync(e)||(makeDirSync(i.slice(0,-1).join(path.sep),t),fs.mkdirSync(e,t))},copyFileSync=function(e,t){if(!fs.existsSync(e))throw new Error(\"File not found\");fs.statSync(e).isDirectory()?(fs.existsSync(t)?fs.statSync(t).isDirectory()||deleteFileSync(t):makeDirSync(t),fs.readdirSync(e).forEach(function(i){copyFileSync(path.resolve(e,i),path.resolve(t,i))})):(fs.existsSync(t)?deleteFileSync(t):makeDirSync(path.dirname(t)),fs.writeFileSync(t,fs.readFileSync(e)))},copyFile=function(e,t,i){i||(i=function(e){if(e)throw e}),fs.exists(e,function(n){n?fs.stat(e,function(n,r){if(n)i(n);else if(r.isDirectory()){var a=function(){fs.readdir(e,function(n,r){var a=0,s=function(){a<r.length?(++a,copyFile(path.resolve(e,r[a-1]),path.resolve(t,r[a-1]),function(e){e?i(e):s()})):i()};s()})};fs.exists(t,function(e){e?fs.stat(t,function(e,n){n.isDirectory()?a():deleteFile(t,function(e){e?i(e):a()})}):makeDir(t,function(e){e?i(e):a()})})}else fs.exists(t,function(n){var r=function(){var n=fs.createReadStream(e),r=fs.createWriteStream(t);n.pipe(r,{end:!0});var a=!1;n.on(\"error\",function(e){a||(a=!0,i(e))}),r.on(\"error\",function(e){a||(a=!0,i(e))}),r.on(\"finish\",function(){a||(a=!0,i())})};n?deleteFile(t,function(e){e?i(e):r()}):makeDir(path.dirname(t),function(e){e?i(e):r()})})}):i(new Error(\"File not found\"))})},deleteFile=function(e,t){t||(t=function(e){if(e)throw e}),fs.exists(e,function(i){i?fs.stat(e,function(i,n){i?t(i):n.isDirectory()?fs.readdir(e,function(i,n){if(i)t(i);else{var r=0,a=function(){r<n.length?(++r,deleteFile(path.resolve(e,n[r-1]),function(e){e?t(e):a()})):fs.rmdir(e,t)};a()}}):fs.unlink(e,t)}):t()})},deleteFileSync=function(e){fs.existsSync(e)&&(fs.statSync(e).isDirectory()?(fs.readdirSync(e).forEach(function(t){deleteFileSync(path.resolve(e,t))}),fs.rmdirSync(e)):fs.unlinkSync(e))},scanFile=function(e,t,i,n){i||(i=function(e){return!0}),(void 0===t||null===t)&&(t=1);var r=[];fs.exists(e,function(a){a?fs.stat(e,function(a,s){if(a)n(a);else{var o=s.birthtime;o||(o=new Date(Math.min(s.ctime.getTime(),s.atime.getTime())));var c={type:s.isFile()?\"file\":s.isDirectory()?\"directory\":\"unknown\",path:e,mode:s.mode,uid:s.uid,gid:s.gid,createdDate:o,lastModifiedDate:s.mtime,size:s.size},f=i(c);f?s.isDirectory()&&(-1>=t||t>0)?fs.readdir(e,function(a,s){if(a)n(a);else{var o=0,c=function(){if(o<s.length){var a=path.resolve(e,s[o]);++o,scanFile(a,t-1,function(t){return i(t)?(r.push({type:t.type,path:path.relative(e,t.path),mode:t.mode,uid:t.uid,gid:t.gid,createdDate:t.createdDate,lastModifiedDate:t.lastModifiedDate,size:t.size}),!0):!1},function(e){c()})}else n(r)};c()}}):n(s.isFile()?[c]:r):n(r)}}):n(r)})},scanFileSync=function(e,t,i){i||(i=function(e){return!0}),(void 0===t||null===t)&&(t=1);var n=[];if(fs.existsSync(e)){var r=fs.statSync(e),a=r.birthtime;a||(a=new Date(Math.min(r.ctime.getTime(),r.atime.getTime())));var s={type:r.isFile()?\"file\":r.isDirectory()?\"directory\":\"unknown\",path:e,mode:r.mode,uid:r.uid,gid:r.gid,createdDate:a,lastModifiedDate:r.mtime,size:r.size},o=i(s);if(o)if(r.isDirectory()&&(-1===t||t>0)){var n=fs.readdirSync(e);n.forEach(function(r){var a=path.resolve(e,r);scanFileSync(a,t-1,function(t){return n.push({type:t.type,path:path.relative(e,t.path),mode:t.mode,uid:t.uid,gid:t.gid,createdDate:t.createdDate,lastModifiedDate:t.lastModifiedDate,size:t.size}),i(t)})})}else r.isFile()&&n.push(s)}return n},getPathSeparator=function(){return/[\\\\\\/]+/g},ensurePosixPath=function(e){return resolvePath(e).replace(getPathSeparator(),\"/\")},standardizePath=function(e){return resolvePath(e).replace(getPathSeparator(),path.sep)},resolvePath=function(){for(var e=[],t=0;t<arguments.length;){var i=arguments[t],n=i.split(getPathSeparator());if(isRootPath(i)){var r=/^[a-z]:$/;r.test(e[0])&&!r.test(n[0])?(e=[e[0]],n=n.splice(1)):e=[]}n.forEach(function(i){switch(i){case\"\":0===t&&e.push(i);break;case\".\":break;case\"..\":e.length>0&&\"..\"!==e[e.length-1]&&\"\"!==e[e.length-1]?e.pop():e.push(i);break;default:e.push(i)}}),++t}return e.join(path.sep)},isRootPath=function(e){return/^([a-z]:)?[\\\\\\/]/gim.test(e)},isJustRootPath=function(e){return/^([a-z]:)?[\\\\\\/]$/gim.test(e)};module.exports={makeDir:makeDir,makeDirSync:makeDirSync,makeDirTree:makeDirTree,copyFile:copyFile,copyFileSync:copyFileSync,deleteFile:deleteFile,deleteFileSync:deleteFileSync,scanFile:scanFile,scanFileSync:scanFileSync,getHomeDir:getHomeDir,getTempDir:getTempDir,getPathSeparator:getPathSeparator,standardizePath:standardizePath,ensurePosixPath:ensurePosixPath,resolvePath:resolvePath,isRootPath:isRootPath,isJustRootPath:isJustRootPath};"}},"/library/lab.common/template.js":{"url":"/library/lab.common/template.js","content":{"encoding":"text","data":"var finalTemplate=function(e,t,n){if(n||(n=\"text/plain\"),n.constructor==String&&(n={parser:n}),n.parser||(n.parser=\"text/plain\"),t){if(!n.parametersMutable){var r={};for(var a in t)r[a]=t[a];t=r}}else t={};return finalTemplate.parsers[n.parser]?finalTemplate.parsers[n.parser](e,t,n):null};finalTemplate.operators={},finalTemplate.operatorQueue=[[\"right\",\"!\",\"~\"],[\"left\",\"*\",\"/\",\"%\"],[\"left\",\"+\",\"-\"],[\"left\",\"<<\",\">>\"],[\"left\",\"<\",\">\",\"<=\",\">=\"],[\"left\",\"==\",\"!=\"],[\"left\",\"&\"],[\"left\",\"^\"],[\"left\",\"|\"],[\"left\",\"&&\"],[\"left\",\"||\"],[\"right\",\";\"]],finalTemplate.functors={},finalTemplate.parsers={},finalTemplate.lexer={},finalTemplate.Operator=function(e,t,n,r,a){return this.call=function(o,l,i,u){var s=[].slice.call(arguments,4),c={};for(var f in t)c[f]=t[f];if(c.$n)for(var p=1;p<=c.$n;)delete c[\"$\"+p],++p;return r.forEach(function(e,t){c[e]=s[t]}),c.$0=this,c.$n=s.length,c.$a=s,c[\"^\"]=t,s.forEach(function(e,t){c[\"$\"+(t+1)]=e}),finalTemplate.run(e,a,c,n)},this},finalTemplate.lexer.stringify=function(e){\"blk\"!=e.type&&(e=[e],e.type=\"blk\",e.operator=\"\",e.index=e[0].index);var t={\"(\":\")\",\"[\":\"]\",\"{\":\"}\"},n=t[e.operator];n||(n=e.operator);var r=[];return r.push(e.operator),e.forEach(function(e){if(!e)return void r.push(\"\");switch(e.type){case\"qot\":r.push('\"'+e.content.replace(/\\\\/gim,\"\\\\\\\\\").replace(/\\n/gim,\"\\\\n\").replace(/\"/gim,'\\\\\"')+'\"');break;case\"num\":case\"sym\":case\"opr\":r.push(e.content);break;case\"fnc\":case\"opc\":r.push(e.content),r.push(\"(\");var t=[];e.arguments.forEach(function(e){t.push(finalTemplate.lexer.stringify(e))}),r.push(t.join(\",\")),r.push(\")\");break;case\"reg\":r.push(\"#\"+e.content.source.replace(/#/gim,\"\\\\#\")+\"#\");break;case\"blk\":r.push(finalTemplate.lexer.stringify(e))}}),r.push(n),r.join(\"\")},finalTemplate.lexer.getSymbol=function(e,t){for(;t<e.length&&-1!=[9,10,13,32].indexOf(e.charCodeAt(t));)++t;if(!(t<e.length))return{type:\"eot\",content:null,index:e.length};var n=e.charCodeAt(t);switch(n){case 34:case 39:for(var r=[],a=0,o=t+1;o<e.length&&(a=e.charCodeAt(o))!=n;)if(92==a){var l=e.charCodeAt(o+1);switch(l){case 110:r.push(\"\\n\");break;case 92:r.push(\"\\\\\");break;case 34:r.push('\"');break;case 39:r.push(\"'\");break;default:return{type:\"err\",description:\"Invalid escaped character\",content:null,index:o+1}}o+=2}else r.push(e[o]),++o;return o<e.length?{type:\"qot\",content:r.join(\"\"),index:t,next:o+1}:{type:\"err\",description:\"Quotation not be terminated\",content:null,index:e.length};case 35:for(var r=[],a=0,o=t+1;o<e.length&&35!=(a=e.charCodeAt(o));)if(92==a){var l=e.charCodeAt(o+1);r.push(35==l?\"#\":String.fromCharCode(92,l)),o+=2}else r.push(e[o]),++o;return o<e.length?{type:\"reg\",content:new RegExp(r.join(\"\"),\"gm\"),index:t,next:o+1}:{type:\"err\",description:\"Regular expression not be terminated\",content:null,index:e.length};case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var i=!1,a=0,o=t;o<e.length&&-1!=[48,49,50,51,52,53,54,55,56,57,46].indexOf(a=e.charCodeAt(o));){if(46==a){if(i)return{type:\"err\",description:\"Two dots have been found in number\",content:null,index:o};i=!0}++o}var u=e.substring(t,o);return i?{type:\"num\",content:parseFloat(u),index:t,next:o}:{type:\"num\",content:parseInt(u),index:t,next:o};case 46:case 43:case 45:case 61:case 42:case 47:case 38:case 33:case 94:case 37:case 126:case 60:case 62:case 44:case 63:case 58:case 59:case 124:case 40:case 41:case 91:case 93:case 123:case 125:var s=[\"&&\",\"||\",\">=\",\"<=\",\"!=\",\"==\",\">>\",\"<<\"];return t+1<e.length&&-1!=s.indexOf(e[t]+e[t+1])?{type:\"opr\",content:e[t]+e[t+1],index:t,next:t+2}:{type:\"opr\",content:e[t],index:t,next:t+1};default:for(var a=0,o=t;o<e.length&&-1==[9,10,13,32,34,39,35,46,43,45,61,42,47,38,33,94,37,126,60,62,44,63,58,59,124,40,41,91,93,123,125].indexOf(a=e.charCodeAt(o));)++o;var u=e.substring(t,o);return{type:\"sym\",content:u,index:t,next:o}}},finalTemplate.lexer.convertCharacter=function(e){for(var t=[],n=0;n<e.length;){var r=finalTemplate.lexer.getSymbol(e,n);switch(r.type){case\"err\":var a=r.description+\". \";throw a+=\"Code: \"+e.substring(Math.max(r.index-10,0),Math.min(r.index+10,e.length)),new Error(a);case\"eot\":n=e.length;break;case\"num\":case\"opr\":case\"sym\":case\"qot\":case\"reg\":default:t.push(r),n=r.next}}return t},finalTemplate.lexer.convertBracket=function(e,t){var n=[];n.type=\"blk\",n.operator=\"\",n.symbol=t[0];var r=n;return t.forEach(function(n){if(\"opr\"==n.type)switch(n.content){case\"(\":case\"[\":case\"{\":var a=[];a.superqueue=r,a.type=\"blk\",a.operator=n.content,a.symbol=n,a.index=n.index,r.push(a),r=a;break;case\")\":case\"]\":case\"}\":if(!r.superqueue){var o=r.symbol;r.length>0&&(o=r[r.length-1],\"blk\"==o.type&&(o=o.symbol)),o||(o=t[t.length-1]);var l=e.substring(Math.max(o.index-10,0),Math.min(o.index+10,e.length));throw new Error(\"No close brackets found. Code: \"+l)}if(\"\"==r.operator||\"(\"!=r.operator&&\")\"==n.content||\"[\"!=r.operator&&\"]\"==n.content||\"{\"!=r.operator&&\"}\"==n.content){var o=r.symbol;r.length>0&&(o=r[r.length-1],\"blk\"==o.type&&(o=o.symbol)),o||(o=t[t.length-1]);var l=e.substring(Math.max(o.index-10,0),Math.min(o.index+10,e.length));throw new Error(\"Brackets not matched. Code: \"+l)}r=r.superqueue;break;default:r.push(n)}else r.push(n)}),n},finalTemplate.lexer.convertSugar=function(e,t){var n=[];n.symbol=t.symbol,n.type=t.type,n.operator=t.operator;var r=0;return t.forEach(function(a,o){if(!(r>o))switch(a.type){case\"opr\":if(\".\"==a.content){for(var l=[];n.length>0&&\"opr\"!=n[n.length-1].type;)l.unshift(n.pop());var i=t[o+1];n.push({type:\"ops\",content:\".\",index:a.index,next:a.next});var u=[];if(u.symbol=a,u.type=\"blk\",u.operator=\"(\",l.forEach(function(e){u.push(e)}),u.push({type:\"opr\",content:\",\",index:a.index,next:a.next}),\"sym\"!=i.type){var s=e.substring(Math.max(i.index-10,0),Math.min(i.index+10,e.length));throw new Error(\"Invalid usage of dot on syntax. Code: \"+s)}u.push({type:\"qot\",content:i.content,index:i.index,next:i.next}),n.push(u),r=o+2}else\";\"==a.content?o<t.length-1&&n.push(a):n.push(a);break;case\"blk\":if(\"[\"==a.operator){for(var l=[];n.length>0&&\"opr\"!=n[n.length-1].type;)l.unshift(n.pop());var i=finalTemplate.lexer.convertSugar(e,a);n.push({type:\"ops\",content:l.length>0?\".\":\"#\",index:a.index,next:a.next});var u=[];u.symbol=a,u.type=\"blk\",u.operator=\"(\",l.length>0&&(l.forEach(function(e){u.push(e)}),u.push({type:\"opr\",content:\",\",index:a.index,next:a.next})),i.forEach(function(e){u.push(e)}),n.push(u)}else if(\"{\"==a.operator){var c=a.filter(function(e){return\"opr\"==e.type&&\":\"==e.content}).length>0,f=a.filter(function(e){return\"opr\"==e.type&&\"?\"==e.content}).length>0;if(c&&f){var s=e.substring(Math.max(a.index-10,0),Math.min(a.index+10,e.length));throw new Error(\"Undetermined definition of object or switch. Code: \"+s)}if(a.length>0&&!c&&!f){var i=finalTemplate.lexer.convertSugar(e,a);n.push({type:\"ops\",content:\"$\",index:a.index,next:a.next});var u=[];if(u.symbol=a,u.type=\"blk\",u.operator=\"(\",u.index=a.index,1==i.length&&\"opr\"==i[0].type){var p=function(e,t){return{type:e,content:t,index:i[0].index,next:i[0].next}};switch(i[0].content){case\"-\":u.push(p(\"sym\",\"if\"));var h=[];h.symbol=i[0],h.type=\"blk\",h.operator=\"(\",h.push(p(\"sym\",\"$n\")),h.push(p(\"opr\",\"==\")),h.push(p(\"num\",1)),h.push(p(\"opr\",\",\")),h.push(p(\"opr\",i[0].content)),h.push(p(\"sym\",\"$1\")),h.push(p(\"opr\",\",\")),h.push(p(\"sym\",\"$1\")),h.push(p(\"opr\",i[0].content)),h.push(p(\"sym\",\"$2\")),u.push(h);break;case\"~\":case\"!\":u.push(p(\"opr\",i[0].content)),u.push(p(\"sym\",\"$1\"));break;default:u.push(p(\"sym\",\"$1\")),u.push(p(\"opr\",i[0].content)),u.push(p(\"sym\",\"$2\"))}}else i.forEach(function(e){u.push(e)});n.push(u)}else if(2==a.length&&f&&\"sym\"==a[0].type){var p=function(e,t){return{type:e,content:t,index:a[0].index,next:a[0].next}};n.push({type:\"ops\",content:\"$\",index:a.index,next:a.next});var u=[];u.symbol=a,u.type=\"blk\",u.operator=\"(\",u.index=a.index,u.push(p(\"sym\",\"execute\"));var h=[];h.symbol=a,h.type=\"blk\",h.operator=\"(\",h.index=a.index,h.push(p(\"qot\",a[0].content)),h.push(p(\"opr\",\",\")),h.push(p(\"sym\",\"$a\")),u.push(h),n.push(u)}else{var i=finalTemplate.lexer.convertSugar(e,a);n.push({type:\"ops\",content:c?\"@\":\"?\",index:a.index,next:a.next});var u=[];u.symbol=a,u.type=\"blk\",u.operator=\"(\";var m=c?\":\":\"?\";if(i.forEach(function(t){if(\"opr\"!=t.type||\",\"!=t.content&&\":\"!=t.content&&\"?\"!=t.content)u.push(t);else{if(t.content!=m){var n=e.substring(Math.max(t.index-10,0),Math.min(t.index+10,e.length));throw new Error(\"Invalid inline object syntax. Code: \"+n)}u.push({type:\"opr\",content:\",\",index:t.index,next:t.next}),m=\",\"==t.content?c?\":\":\"?\":\",\"}}),\"opr\"==i[i.length-1].type&&(\"?\"==i[i.length-1].content||\":\"==i[i.length-1].content)){var s=e.substring(Math.max(i[i.length-1].index-10,0),Math.min(i[i.length-1].index+10,e.length));throw new Error(\"Invalid inline object syntax. Code: \"+s)}n.push(u)}}else n.push(finalTemplate.lexer.convertSugar(e,a));break;case\"num\":case\"sym\":case\"qot\":case\"reg\":default:n.push(a)}}),n},finalTemplate.lexer.convertCall=function(e,t){var n=[];n.symbol=t.symbol,n.type=t.type,n.operator=t.operator;var r=0;return t.forEach(function(t,a){if(!(r>a))switch(t.type){case\"blk\":if(\"(\"==t.operator)if(n.length>0&&(\"sym\"==n[n.length-1].type||\"ops\"==n[n.length-1].type)){var o=n.pop(),l=[],i=[];i.type=\"blk\",i.operator=\"\",i.symbol=t,l.push(i),t.forEach(function(n){if(\"opr\"==n.type&&\",\"==n.content){if(0==l[l.length-1].length){var r=e.substring(Math.max(n.index-10,0),Math.min(n.index+10,e.length));throw new Error(\"No argument found. Code: \"+r)}var a=[];a.type=\"blk\",a.operator=\"\",a.symbol=t,l.push(a)}else l[l.length-1].push(n)});for(var u=0;u<l.length;)l[u]=finalTemplate.lexer.convertCall(e,l[u]),++u;1==l.length&&0==l[0].length&&(l=[]),n.push({type:\"sym\"==o.type?\"fnc\":\"opc\",content:o.content,arguments:l,symbol:o,index:o.index,next:o.next})}else n.push(finalTemplate.lexer.convertCall(e,t));else n.push(finalTemplate.lexer.convertCall(e,t));break;case\"opr\":case\"ops\":case\"num\":case\"sym\":case\"qot\":case\"reg\":default:n.push(t)}}),n},finalTemplate.lexer.convertOperator=function(e,t){if(t.operatorNo)return t;var n=t.slice(0);n.symbol=t.symbol,n.type=t.type,n.operator=t.operator,n.operatorNo=!0;for(var r=0;r<finalTemplate.operatorQueue.length;){for(var a=\"left\"==finalTemplate.operatorQueue[r][0],o=a?0:n.length-1;o<n.length&&o>=0;){if(\"opr\"==n[o].type&&finalTemplate.operatorQueue[r].indexOf(n[o].content)>0)if(\"!\"==n[o].content||\"~\"==n[o].content||0==o&&\"-\"==n[o].content){if(o+1>=n.length){var l=e.substring(Math.max(n[o].index-10,0),Math.min(n[o].index+10,e.length));throw new Error('No operatee found for operator \"'+n[o].content+'\". Code: '+l)}var i=[],u=[];u.type=\"blk\",u.operator=\"\",u.symbol=n[o],i.push(u),u.push(n[o+1]);for(var s=o,c=1;\"opr\"==n[s+c].type;){if(s+c>=n.length){var l=e.substring(Math.max(n[s+c].index-10,0),Math.min(n[s+c].index+10,e.length));throw new Error('No operatee found for operator \"'+n[s+c].content+'\". Code: '+l)}u.push(n[s+c+1]),a?(++o,++c):(--o,--c)}n.splice(s,1+c,{type:\"opc\",content:n[s].content,arguments:i,symbol:n[s],index:n[s].index,next:n[s].next})}else{var i=[];if(o+1>=n.length||1>o){var l=e.substring(Math.max(n[o].index-10,0),Math.min(n[o].index+10,e.length));throw new Error('No operatee found for operator \"'+n[o].content+'\". Code: '+l)}var u=[];u.type=\"blk\",u.operator=\"\",u.symbol=n[o],i.push(u),u.push(n[o-1]),u=[],u.type=\"blk\",u.operator=\"\",u.symbol=n[o],i.push(u),u.push(n[o+1]);for(var s=o,c=1;\"opr\"==n[s+c].type;){if(s+c>=n.length){var l=e.substring(Math.max(n[s+c].index-10,0),Math.min(n[s+c].index+10,e.length));throw new Error('No operatee found for operator \"'+n[s+c].content+'\". Code: '+l)}u.push(n[s+c+1]),a?++o:--o,++c}n.splice(s-1,c+2,{type:\"opc\",content:n[s].content,arguments:i,symbol:n[s],index:n[s].index,next:n[s].next}),a&&--o}a?++o:--o}++r}var f=[];return f.symbol=t.symbol,f.type=t.type,f.operator=t.operator,f.operatorNo=!0,n.forEach(function(t){switch(t.type){case\"blk\":f.push(finalTemplate.lexer.convertOperator(e,t));break;case\"fnc\":case\"opc\":var n=[];t.arguments.forEach(function(t){n.push(finalTemplate.lexer.convertOperator(e,t))}),f.push({type:t.type,content:t.content,arguments:n,symbol:t.symbol,index:t.index,next:t.next});break;case\"opr\":case\"ops\":case\"num\":case\"sym\":case\"qot\":case\"reg\":default:f.push(t)}}),f},finalTemplate.lexer.convertQueue=function(e,t){if(!t||0==t.length)return null;if(t.length>1){var n=e.substring(Math.max(t[0].index-10,0),Math.min(t[0].index+10,e.length));throw console.log(t),new Error(\"Queue could not be simplfied to pure function calls. Code: \"+n)}switch(t[0].type){case\"fnc\":case\"opc\":var r=[];return t[0].arguments.forEach(function(t){r.push(finalTemplate.lexer.convertQueue(e,t))}),{type:t[0].type,content:t[0].content,arguments:r,index:t[0].index};case\"blk\":return finalTemplate.lexer.convertQueue(e,t[0]);case\"sym\":case\"qot\":case\"reg\":case\"num\":return t[0];case\"opr\":case\"ops\":default:var n=e.substring(Math.max(t[0].index-10,0),Math.min(t[0].index+10,e.length));throw new Error(\"Queue could not be simplfied to pure function calls. Code: \"+n)}},finalTemplate.run=function(e,t,n,r){switch(t.type){case\"fnc\":case\"opc\":var a=null;if(\"fnc\"==t.type?(r.functors&&(a=r.functors[t.content]),a||(a=finalTemplate.functors[t.content])):a=finalTemplate.operators[t.content],(a===Function||a===eval)&&(a=null),!a){var o=e.substring(Math.max(t.index-20,0),Math.min(t.index+20,e.length));throw new Error(\"Function or operator definition not found: \"+o)}var l=[];t.arguments.forEach(function(t){var a=null,o=!1;l.push(function(){return o||(a=finalTemplate.run(e,t,n,r),o=!0),a})}),a.lazy||(l=l.map(function(e){return e()}));var i=[e,t,n,r];l.forEach(function(e){i.push(e)});var u=null;return u=a.apply(null,i);case\"sym\":switch(t.content){case\"true\":return!0;case\"false\":return!1;case\"null\":return null;case\"undefined\":return void 0;case\"nan\":return NaN;case\"infinity\":return 1/0;default:return n[t.content]}case\"num\":case\"qot\":case\"reg\":return t.content;case\"opr\":case\"ops\":default:var o=e.content.substring(Math.max(t.index-10,0),Math.min(t.index+10,e.length));throw new Error(\"Invalid code: \"+o)}},finalTemplate.execute=function(e,t,n){if(t){if(!n.parametersMutable){var r={};for(var a in t)r[a]=t[a];t=r}}else t={};n||(n={}),n.log&&console.log(\"Code:   \"+e);var o=finalTemplate.lexer.convertCharacter(e);if(0==o.length)return null;var l=finalTemplate.lexer.convertBracket(e,o),l=finalTemplate.lexer.convertSugar(e,l),l=finalTemplate.lexer.convertCall(e,l),l=finalTemplate.lexer.convertOperator(e,l);n.log&&console.log(\"Queue:  \"+finalTemplate.lexer.stringify(l));var i=finalTemplate.lexer.convertQueue(e,l);n.log&&console.log(\"Call:   \"+finalTemplate.lexer.stringify(i));var u=finalTemplate.run(e,i,t,n);return n.log&&console.log(\"Result: \"+u),u},finalTemplate.compile=function(e,t){t||(t={}),t.log&&console.log(\"Code:   \"+e);var n=finalTemplate.lexer.convertCharacter(e);if(0==n.length)return null;var r=finalTemplate.lexer.convertBracket(e,n),r=finalTemplate.lexer.convertSugar(e,r),r=finalTemplate.lexer.convertCall(e,r),r=finalTemplate.lexer.convertOperator(e,r);t.log&&console.log(\"Queue:  \"+finalTemplate.lexer.stringify(r));var a=finalTemplate.lexer.convertQueue(e,r);return t.log&&console.log(\"Call:   \"+finalTemplate.lexer.stringify(a)),a},finalTemplate.operators[\".\"]=function(e,t,n,r,a,o){if(null===a||void 0===a)return null;var l=a[o];return r.functionAvailable?(l===Function||l===eval)&&(l=null):l&&l.constructor==Function&&(l=null),l},finalTemplate.operators[\"*\"]=function(e,t,n,r,a,o){return a*o},finalTemplate.operators[\"/\"]=function(e,t,n,r,a,o){return a/o},finalTemplate.operators[\"%\"]=function(e,t,n,r,a,o){return a%o},finalTemplate.operators[\"+\"]=function(e,t,n,r,a,o){return a+o},finalTemplate.operators[\"-\"]=function(e,t,n,r,a,o){return 5==arguments.length?-a:a-o},finalTemplate.operators[\"!\"]=function(e,t,n,r,a){return!a},finalTemplate.operators[\"~\"]=function(e,t,n,r,a){return~a},finalTemplate.operators[\"&\"]=function(e,t,n,r,a,o){return a()&o()},finalTemplate.operators[\"|\"]=function(e,t,n,r,a,o){return a()|o()},finalTemplate.operators[\"^\"]=function(e,t,n,r,a,o){return a()^o()},finalTemplate.operators[\"&&\"]=function(e,t,n,r,a,o){return a()&&o()},finalTemplate.operators[\"||\"]=function(e,t,n,r,a,o){return a()||o()},finalTemplate.operators[\">\"]=function(e,t,n,r,a,o){return a>o},finalTemplate.operators[\"<\"]=function(e,t,n,r,a,o){return o>a},finalTemplate.operators[\">=\"]=function(e,t,n,r,a,o){return a>=o},finalTemplate.operators[\"<=\"]=function(e,t,n,r,a,o){return o>=a},finalTemplate.operators[\">>\"]=function(e,t,n,r,a,o){return a>>o},finalTemplate.operators[\"<<\"]=function(e,t,n,r,a,o){return a<<o},finalTemplate.operators[\"==\"]=function(e,t,n,r,a,o){return a===o},finalTemplate.operators[\"!=\"]=function(e,t,n,r,a,o){return a!==o},finalTemplate.operators[\"#\"]=function(e,t,n,r){return[].slice.call(arguments,4)},finalTemplate.operators[\"@\"]=function(e,t,n,r){var a=[].slice.call(arguments,4);if(a.length%2==1){var o=e.substring(Math.max(t.arguments[t.arguments.length-1].index-10,0),Math.min(t.arguments[t.arguments.length-1].index+10,e.length));throw new Error(\"Invalid inline object syntax. Code: \"+o)}for(var l={},i=0;i<a.length;)l[a[i]]=a[i+1],i+=2;return l},finalTemplate.operators.$=function(e,t,n,r){var a=t.arguments.slice(0,t.arguments.length-1).map(function(t){if(\"sym\"!=t.type){var n=e.substring(Math.max(t.index-10,0),Math.min(t.index+10,e.length));throw new Error(\"Invalid argument definition. Code: \"+n)}return t.content}),o=t.arguments[t.arguments.length-1];return new finalTemplate.Operator(e,n,r,a,o)},finalTemplate.operators[\";\"]=function(e,t,n,r,a,o){var l=a();return n.$x=l,o()},finalTemplate.operators[\"?\"]=function(e,t,n,r){for(var a=n.$x,o=[].slice.call(arguments,4),l=0;l<o.length;){if(l==o.length-1)return o[l]();var i=o[l]();if(i===a)return o[l+1]();l+=2}return null},finalTemplate.operators[\"&\"].lazy=!0,finalTemplate.operators[\"|\"].lazy=!0,finalTemplate.operators[\"^\"].lazy=!0,finalTemplate.operators[\"&&\"].lazy=!0,finalTemplate.operators[\"||\"].lazy=!0,finalTemplate.operators.$.lazy=!0,finalTemplate.operators[\";\"].lazy=!0,finalTemplate.operators[\"?\"].lazy=!0,finalTemplate.functors.call=function(e,t,n,r,a){return finalTemplate.functors.execute(e,t,n,r,a,[].slice.call(arguments,5))},finalTemplate.functors.execute=function(e,t,n,r,a,o){if(!a)return null;o||(o=[]);var l=o.slice();return l.unshift(r),l.unshift(n),l.unshift(t),l.unshift(e),a.constructor==finalTemplate.Operator?a.call.apply(a,l):a.constructor==String&&finalTemplate.functors[a]?finalTemplate.functors[a].apply(this,l):null},finalTemplate.functors.echo=function(e,t,n,r,a){return r&&r.echo?r.echo(a):console.log(\"Echo:   \"+a),a},finalTemplate.functors[\"if\"]=function(e,t,n,r,a,o,l){return a()?o():l()},finalTemplate.functors[\"default\"]=function(e,t,n,r,a,o){return a()?a():o()},finalTemplate.functors.round=function(e,t,n,r,a){return Math.round(a)},finalTemplate.functors.floor=function(e,t,n,r,a){return Math.floor(a)},finalTemplate.functors.ceil=function(e,t,n,r,a){return Math.ceil(a)},finalTemplate.functors.min=function(e,t,n,r){var a=[].slice.call(arguments,4);return Math.min.apply(Math,a)},finalTemplate.functors.max=function(e,t,n,r){var a=[].slice.call(arguments,4);return Math.max.apply(Math,a)},finalTemplate.functors.trim=function(e,t,n,r,a){return a.trim()},finalTemplate.functors.split=function(e,t,n,r,a,o){return a.split(o)},finalTemplate.functors.join=function(e,t,n,r,a,o){return a.join(o)},finalTemplate.functors.slice=function(e,t,n,r,a,o,l){return a.slice(o,l)},finalTemplate.functors.search=function(e,t,n,r,a,o,l){return a.indexOf(o,l)},finalTemplate.functors.string=function(e,t,n,r){var a=[].slice.call(arguments,4);return String.fromCharCode.apply(String,a)},finalTemplate.functors.code=function(e,t,n,r,a){for(var o=[],l=0;l<a.length;)o.push(a.charCodeAt(l)),++l;return o},finalTemplate.functors.lowerCase=function(e,t,n,r,a){return a.toLocaleLowerCase()},finalTemplate.functors.upperCase=function(e,t,n,r,a){return a.toLocaleUpperCase()},finalTemplate.functors.date=function(e,t,n,r,a,o,l,i,u,s,c){if(4==arguments.length)return new Date;if(5==arguments.length)return new Date(/^(\\-?)[0-9]+(\\.[0-9]+)?$/.test(a)?1e3*a:a);if(7==arguments.length){var f=new Date(a,o-1,l);return f.setFullYear(a),f}if(10==arguments.length){var f=new Date(a,o-1,l,i,u,s);return f.setFullYear(a),f}if(11==arguments.length){var f=new Date(a,o-1,l,i,u,s,c);return f.setFullYear(a),f}return null},finalTemplate.functors.timeunit=function(e,t,n,r,a,o){switch(o){case\"year\":return a.getFullYear();case\"month\":return a.getMonth()+1;case\"date\":return a.getDate();case\"day\":return a.getDay();case\"hour\":return a.getHours();case\"minute\":return a.getMinutes();case\"second\":return a.getSeconds();case\"millisecond\":return a.getMilliseconds();case\"timestamp\":return a.getTime()/1e3;default:return null}},finalTemplate.functors.replace=function(e,t,n,r,a,o,l,i){return a.replace(o,l,i)},finalTemplate.functors.match=function(e,t,n,r,a,o){return o.test(a)},finalTemplate.functors.format=function(e,t,n,r,e,a){for(var o=function(e,t){for(e+=\"\";e.length<t;)e=\"0\"+e;return e},l=[],i=0;i<e.length;)switch(e[i]){case\"Y\":\"Y\"==e[i+1]?\"Y\"==e[i+2]&&\"Y\"==e[i+3]?(l.push(o(a.getFullYear(),4)),i+=4):(l.push(o(a.getFullYear()%100,2)),i+=2):(l.push(a.getFullYear()+\"\"),++i);break;case\"M\":\"M\"==e[i+1]?(l.push(o(a.getMonth()+1,2)),i+=2):(l.push(a.getMonth()+1+\"\"),++i);break;case\"D\":\"D\"==e[i+1]?(l.push(o(a.getDate(),2)),i+=2):(l.push(a.getDate()+\"\"),++i);break;case\"h\":\"h\"==e[i+1]?(l.push(o(a.getHours(),2)),i+=2):(l.push(a.getHours()+\"\"),++i);break;case\"m\":\"m\"==e[i+1]?(l.push(o(a.getMinutes(),2)),i+=2):(l.push(a.getMinutes()+\"\"),++i);break;case\"s\":\"s\"==e[i+1]?(l.push(o(a.getSeconds(),2)),i+=2):(l.push(a.getSeconds()+\"\"),++i);break;case\"S\":\"S\"==e[i+1]&&\"S\"==e[i+2]?(l.push(o(a.getMilliseconds(),3)),i+=3):(l.push(a.getMilliseconds()+\"\"),++i);break;case'\"':case\"'\":for(var u=1;e[i+u]!=e[i]&&i+u<e.length;)\"\\\\\"==e[i+u]?(l.push(e[i+u+1]),u+=2):(l.push(e[i+u]),++u);i+=u+1;break;default:l.push(e[i]),++i}return l.join(\"\")},finalTemplate.functors.parse=function(e,t,n,r,a){return-1!=a.indexOf(\".\")?parseFloat(a):parseInt(a)},finalTemplate.functors.fixed=function(e,t,n,r,a,o){return a.toFixed(o)},finalTemplate.functors.precision=function(e,t,n,r,a,o){return a.toPrecision(o)},finalTemplate.functors.filter=function(e,t,n,r,a,o){return a.filter(function(a,l,i){return o.call(e,t,n,r,a,l,i)})},finalTemplate.functors.map=function(e,t,n,r,a,o){return a.map(function(a,l,i){return o.call(e,t,n,r,a,l,i)})},finalTemplate.functors.count=function(e,t,n,r,a,o){return o?a.filter(function(a,l,i){return o.call(e,t,n,r,a,l,i)}).length:a.length},finalTemplate.functors.sort=function(e,t,n,r,a,o){return a=a.slice(0),o?a.sort(function(a,l){return o.call(e,t,n,r,a,l)}):a.sort()},finalTemplate.functors.fold=function(e,t,n,r,a,o,l){return a.forEach(function(a,i,u){o=l.call(e,t,n,r,o,a,i,u)}),o},finalTemplate.functors.log=function(e,t,n,r,a,o){return 5==arguments.length?Math.log(a):Math.log(a)/Math.log(o)},finalTemplate.functors.power=function(e,t,n,r,a,o){return 5==arguments.length?Math.pow(Math.E,arguments[4]):Math.pow(a,o)},finalTemplate.functors.sqrt=function(e,t,n,r,a){return Math.sqrt(a)},finalTemplate.functors.cbrt=function(e,t,n,r,a){return Math.cbrt(a)},finalTemplate.functors.sin=function(e,t,n,r,a){return Math.sin(a)},finalTemplate.functors.cos=function(e,t,n,r,a){return Math.cos(a)},finalTemplate.functors.tan=function(e,t,n,r,a){return Math.tan(a)},finalTemplate.functors.asin=function(e,t,n,r,a){return Math.asin(a)},finalTemplate.functors.acos=function(e,t,n,r,a){return Math.acos(a)},finalTemplate.functors.atan=function(e,t,n,r,a){return Math.atan(a)},finalTemplate.functors.angle=function(e,t,n,r,a,o){return Math.atan2(o,a)},finalTemplate.functors.sinh=function(e,t,n,r,a){return Math.sinh(a)},finalTemplate.functors.cosh=function(e,t,n,r,a){return Math.cosh(a)},finalTemplate.functors.tanh=function(e,t,n,r,a){return Math.tanh(a)},finalTemplate.functors.asinh=function(e,t,n,r,a){return Math.asinh(a)},finalTemplate.functors.acosh=function(e,t,n,r,a){return Math.acosh(a)},finalTemplate.functors.atanh=function(e,t,n,r,a){return Math.atanh(a)},finalTemplate.functors.e=function(e,t,n,r){return Math.E},finalTemplate.functors.pi=function(e,t,n,r){return Math.PI},finalTemplate.functors.seq=function(e,t,n,r,a,o,l){arguments.length<7&&(l=o>a?1:-1);var i=[],u=a;do i.push(u),u+=l;while(o>a?o>=u:u>=o);return i},finalTemplate.functors.fill=function(e,t,n,r,a,o){for(var l=[],i=0;o>i;)l.push(a.constructor==finalTemplate.Operator?a.call(e,t,n,r):a),++i;return l},finalTemplate.functors.push=function(e,t,n,r,a){var a=a.slice(0);return a.push.apply(a,[].slice.call(arguments,5)),a},finalTemplate.functors.pop=function(e,t,n,r,a){var a=a.slice(0);return a.pop(),a},finalTemplate.functors.unshift=function(e,t,n,r,a){var a=a.slice(0);return a.unshift.apply(a,[].slice.call(arguments,5)),a},finalTemplate.functors.shift=function(e,t,n,r,a){var a=a.slice(0);return a.shift(),a},finalTemplate.functors.splice=function(e,t,n,r,a){var a=a.slice(0);return a.splice.apply(a,[].slice.call(arguments,5)),a},finalTemplate.functors.include=function(e,t,n,r,a,o){var a=a.slice(0);return o.forEach(function(e){-1==a.indexOf(e)&&a.push(e)}),a},finalTemplate.functors.exclude=function(e,t,n,r,a,o){var a=a.slice(0);return o.forEach(function(e){var t=a.indexOf(e);-1!=t&&a.splice(t,1)}),a},finalTemplate.functors.concat=function(e,t,n,r,a,o){var a=a.slice(0);return o.forEach(function(e){a.push(e)}),a},finalTemplate.functors.keys=function(e,t,n,r,a){var o=[];for(var l in a)o.push(l);return o},finalTemplate.functors.values=function(e,t,n,r,a){var o=[];for(var l in a)-1==a.indexOf(a[l])&&o.push(a[l]);return o},finalTemplate.functors.each=function(e,t,n,r,a,o){var l={};for(var i in a)l[i]=o.call(e,t,n,r,i,a[i],a);return l},finalTemplate.functors.mix=function(e,t,n,r,a,o){var l={};for(var i in a)l[i]=a[i];for(var i in o)l[i]=o[i];return l},finalTemplate.functors.template=function(e,t,n,r,e,a){var o={};for(var l in r)o[l]=r;return o.parser=\"text/plain\",finalTemplate(e,a,o)},finalTemplate.functors.reverse=function(e,t,n,r,a){return a.slice(0).reverse()},finalTemplate.functors.define=function(e,t,n,r,a,o){if(!/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(a))throw new Error(\"Invalid variant name: \"+a);for(n.hasOwnProperty(a)||(n[a]=o);n[\"^\"];)n=n[\"^\"],n[a]=o;return n[a]},finalTemplate.functors.random=function(e,t,n,r){return Math.random()},finalTemplate.functors.sandbox=function(e,t,n,r){var a={};for(var o in n)a[o]=n[o];delete a[\"^\"];var l=finalTemplate.run(e,t.arguments[0],a,r);l.call(e,t,a,r)},finalTemplate.functors.isNumber=function(e,t,n,r,a){return null!==a&&void 0!==a&&a.constructor===Number},finalTemplate.functors.isString=function(e,t,n,r,a){return null!==a&&void 0!==a&&a.constructor===String},finalTemplate.functors.isList=function(e,t,n,r,a){return null!==a&&void 0!==a&&(a.constructor===Array||a instanceof Array)},finalTemplate.functors.isDate=function(e,t,n,r,a){return null!==a&&void 0!==a&&a.constructor===Date},finalTemplate.functors.isRegex=function(e,t,n,r,a){return null!==a&&void 0!==a&&a.constructor===RegExp},finalTemplate.functors.isObject=function(e,t,n,r,a){return null!==a&&void 0!==a},finalTemplate.functors.typeOf=function(e,t,n,r,a){return null===a||void 0===a?\"null\":a.constructor===Number?\"number\":a.constructor===String?\"string\":a.constructor===Date?\"date\":a.constructor===RegExp?\"regex\":a.constructor===Array||a instanceof Array?\"list\":\"object\"},finalTemplate.functors.via=function(e,t,n,r,a,o){var l=a;return o.split(\".\").filter(function(e){return e.length>0}).forEach(function(e){null!==l&&void 0!=l&&(l=l[e])}),l},finalTemplate.functors.data=function(e,t,n,r){return n},finalTemplate.functors[\"if\"].lazy=!0,finalTemplate.functors[\"default\"].lazy=!0,finalTemplate.functors.sandbox.lazy=!0,finalTemplate.parsers[\"text/plain\"]=function(e,t,n){for(var r=[],a=0;a<e.length;)if(\"$\"==e[a]&&a+1<e.length&&\"{\"==e[a+1]){var o=[];a+=2;for(var l=a,i=1;i>0&&a<e.length;){var u=finalTemplate.lexer.getSymbol(e,a);\"opr\"==u.type&&(\"{\"==u.content?++i:\"}\"==u.content&&--i),o.push(u),a=u.next}if(i>0){var s=e.substring(Math.max(a-10,0),Math.min(a+10,e.length));throw new Error(\"Bracket not terminated. Code: \"+s)}if(o.pop(),o.length>0){n.log&&console.log(\"Code:   \"+e.substring(l,a-1));var c=finalTemplate.lexer.convertBracket(e,o),c=finalTemplate.lexer.convertSugar(e,c),c=finalTemplate.lexer.convertCall(e,c),c=finalTemplate.lexer.convertOperator(e,c);n.log&&console.log(\"Queue:  \"+finalTemplate.lexer.stringify(c));var f=finalTemplate.lexer.convertQueue(e,c);n.log&&console.log(\"Call:   \"+finalTemplate.lexer.stringify(f));var p=finalTemplate.run(e,f,t,n);n.log&&console.log(\"Result: \"+p),r.push(p)}}else r.push(e[a]),++a;return r.join(\"\")},module.exports={format:finalTemplate,compile:finalTemplate.compile,execute:function(){return arguments[0].constructor===String?finalTemplate.execute.apply(finalTemplate,arguments):finalTemplate.run.apply(finalTemplate,arguments)}};"}},"/library/lab.common/uuid.js":{"url":"/library/lab.common/uuid.js","content":{"encoding":"text","data":"var createUUID=function(){var x=(new Date).getTime(),e=x*x>>8&65535;e=(e*e).toString(16),e=e+e+e+e;var t=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(x){var t=(parseInt(e[e.length-1],16)+16*Math.random())%15|0;return--e.length,(\"x\"===x?t:3&t|8).toString(16)});return t};module.exports={createUUID:createUUID};"}},"/library/lab.dom/activity.js":{"url":"/library/lab.dom/activity.js","content":{"encoding":"text","data":"var Activity=function(){this.storyboards={},this.rules={},this.bulletCurtain={},this.viewLayers={},this.uiAsyncStep=0;var t=/^\\/activity\\/(.*)\\/(.*)/;this.addHashRuleHandler(t,function(e){var i=e.match(t),a=i[1],n=i[2].split(\"?\")[0],o=i[2].split(\"?\")[1];o&&(o=buildQueryObject(o)),currentActivity.getMainboard().currentPage&&currentActivity.getMainboard().currentPage.id==n?currentActivity.getMainboard().update(o):currentActivity.getMainboard().switchTo(n,o,{channel:a})}),this.defaultOptions={mainStoryboard:{\"!valueType\":\"string\",\"!defaultValue\":\"content\"},interceptStartPage:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},enableBridge:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},anchorMovementDuration:{\"!valueType\":\"number\",\"!defaultValue\":500},useDefaultKeyboardSolution:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},bulletOptions:{\"!valueType\":\"object\",\"!defaultValue\":{},width:{\"!valueType\":\"number\",\"!defaultValue\":\"1\"},height:{\"!valueType\":\"number\",\"!defaultValue\":.4},defaultSpeed:{\"!valueType\":\"number\",\"!defaultValue\":400},maxCountInScreen:{\"!valueType\":\"number\",\"!defaultValue\":40},maxCountPerSec:{\"!valueType\":\"number\",\"!defaultValue\":10},fontSize:{\"!valueType\":\"number\",\"!defaultValue\":18},topBottonBulletTimeRatio:{\"!valueType\":\"number\",\"!defaultValue\":.6},enableSubtitleProtection:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},defaultPosition:{\"!valueType\":\"string\",\"!defaultValue\":\"row\"},opacity:{\"!valueType\":\"number\",\"!defaultValue\":.8},defaultColor:{\"!valueType\":\"string\",\"!defaultValue\":\"#000000\"}}},this.options=$.advancedMerge(this.defaultOptions,{});var e={},i={onKeyboardShow:function(t,e,i){$.currentActivity.lastFocused=i;var a=$(i).positionToPage({x:0,y:0}),n=a.y-t.origin.y+50;console.log(n),$(\"body\").css(\"padding-bottom\",e+\"px\"),n>0?($(\"html,body\").css(\"height\",\"auto\"),$(\"body\").scrollTop(n)):($(\"body\").scrollTop(0),$(\"html,body\").css(\"height\",\"100%\"))},onKeyboardHide:function(t,e,i){$(\"body\").css(\"padding-bottom\",\"0px\"),$(\"body\").scrollTop(0),$(\"html,body\").css(\"height\",\"100%\"),$(i).blur()}};$.uiReady(function(){$(window).resize(function(){var t=$(window).width(),e=$(window).height();$.currentActivity.getMainboard()&&$.currentActivity.getMainboard().currentPage&&$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports.onWindowResize&&$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports.onWindowResize.apply($.currentActivity.getMainboard().currentPage.data,[t,e])})}),$.uiReady(function(){var t=0;$.uiKitty.heard([\"android\",\"ios\"],\"device.didChangeKeyboardFrame\").then(function(a){0===t&&(console.log(1111),t=1,setTimeout(function(){if(2==t||3==t){console.log(t);var n=a.content[\"device.didChangeKeyboardFrame\"].frame,o=n.size.height,r=$(document.activeElement),s=2==t?\"onKeyboardShow\":\"onKeyboardHide\";if($.currentActivity.getMainboard()&&$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports[s])$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports[s].apply($.currentActivity.getMainboard().currentPage.data,[n,o,r]);else{var u=!1;Object.keys(e).forEach(function(t){r.hasClass(t)&&e[t][s]&&(e[t][s](n,o,r),u=!0)}),!u&&$.currentActivity.options.useDefaultKeyboardSolution&&(console.log(\"executing default keyboard handler\"),i[s](n,o,r))}}t=0},1e3))}),$.uiKitty.heard([\"android\",\"ios\"],\"device.didShowKeyboard\").then(function(e){t>0&&(t=2)}),$.uiKitty.heard([\"android\",\"ios\"],\"device.didHideKeyboard\").then(function(e){t>0&&(t=3)})})};Activity.prototype.uiAsync=function(t,e){var i=this,a=function(){return $.async(function(){var i=this;if($.isKindOf(t,Function)){var a=!1,n=setTimeout(function(){!a&&e&&(a=!0,i.next())},1500),o={next:function(){a||(a=!0,i.next(),clearTimeout(n))}};try{t.call(o)}catch(r){i.next()}}else i.next()})};0==i.uiAsyncStep&&(i.uiAsyncStep=1,$.async(function(){a().then(this.next)}).then(function(){i.uiAsyncStep=0,this.next()}))},Activity.prototype.shootBullet=function(){var t=this,e=this.options.bulletOptions;if(!this.bulletCurtain.viewLayer){var i=Math.round($(window).height()*this.options.bulletOptions.height/(this.options.bulletOptions.fontSize+6));1>i&&(i=1),this.bulletCurtain.viewLayer=this.createViewLayer(),this.bulletCurtain.screen={top:[],row:[],bottom:[]},Object.keys(this.bulletCurtain.screen).forEach(function(e){for(var a=0;i>a;++a)t.bulletCurtain.screen[e].push({index:a,count:0,offset:0})}),$(this.bulletCurtain.viewLayer).css(\"opacity\",this.options.bulletOptions.opacity)}var a=this.bulletCurtain,n=this.bulletCurtain.viewLayer,o=$.matchArguments([[\"bullets\"]],{bullets:{acceptTypes:\"any\",defaultValue:[],mergeOptions:{\"!valueType\":\"array\",\"!arrayElement\":{\"!valueType\":\"object\",\"!stringFields\":\"text\",\"!defaultValue\":{},position:{\"!valueType\":\"string\",\"!defaultValue\":this.options.bulletOptions.defaultPosition},text:{\"!valueType\":\"string\",\"!defaultValue\":null},speed:{\"!valueType\":\"number\",\"!defaultValue\":this.options.bulletOptions.defaultSpeed},color:{\"!valueType\":\"string\",\"!defaultValue\":this.options.bulletOptions.defaultColor},click:{\"!valueType\":\"function\",\"!defaultValue\":function(){}}},\"!stringFields\":0}}},arguments).bullets;o.forEach(function(i){if(i.text){var o=2e3*(i.text.length*t.options.bulletOptions.fontSize+$(window).width()*t.options.bulletOptions.width)/i.speed,r=2e3*i.text.length*t.options.bulletOptions.fontSize/i.speed,s=(Date.now().toString(),a.screen[i.position].sort(function(t,e){return t.count==e.count?t.index-e.index:t.count-e.count})),u=s[0].index,c=i.text.length*t.options.bulletOptions.fontSize+10,l=s[0].count;s[0].count=s[0].count+1,setTimeout(function(){var r=$(\"<div>\"+i.text+\"</div>\").css(\"position\",\"absolute\").css(\"width\",c+\"px\").css(\"line-height\",t.options.bulletOptions.fontSize+6+\"px\").css(\"font-size\",t.options.bulletOptions.fontSize+\"px\").css(\"color\",i.color);r.appendTo(n),r.on(\"click\",i.click);var s=function(){r.remove(),a.screen[i.position].forEach(function(t){t.index==u&&(t.count=t.count-1)})};switch(i.position){case\"top\":r.css({opacity:0});break;case\"row\":r.css({opacity:1,translate:[(.5*e.width+.5)*$(window).width(),u*(t.options.bulletOptions.fontSize+6)]}).transition({opacity:1,translate:[(.5-.5*e.width)*$(window).width()-c,u*(t.options.bulletOptions.fontSize+6)],easing:\"linear\"},o,s);break;case\"bottom\":r.css({opacity:0})}},r*l)}})},Activity.prototype.createViewLayer=function(t){if(t||(t=$.createUUID()),!this.viewLayers[t]){var e=1e6+Object.keys(this.viewLayers).length;this.viewLayers[t]=$(\"<div></div>\").attr(\"id\",\"view-\"+t).addClass(\"activity-view-layer\").css(\"zIndex\",e),this.viewLayers[t].appendTo(\"body\")}return this.viewLayers[t]},Activity.prototype.addHashRuleHandler=function(t,e){!this.rules.hasOwnProperty(t.toString())&&$.isKindOf(e,Function)&&(this.rules[t.toString()]={rule:t,handler:e})},Activity.prototype.addHashRewriteRule=function(t){},Activity.prototype.configure=function(t){this.options=$.advancedMerge(this.defaultOptions,t)},Activity.prototype.buildStoryboard=function(t){var e=Array.prototype.slice.call(arguments,1);return e.push($.storyboard.plugins.activity),$.storyboard(t,e)},Activity.prototype.getMainboard=function(){return this.storyboards[this.options.mainStoryboard]?this.storyboards[this.options.mainStoryboard].storyboard:null},Activity.prototype.isMainboard=function(t){return t.id==this.options.mainStoryboard},Activity.prototype.switchTo=function(){var t=this.getMainboard();return t.switchTo.apply(t,arguments)},Activity.prototype.goBackward=function(){var t=this.getMainboard();return t.goBackward.apply(t,arguments)},window.onpopstate=function(t){t.state?currentActivity.getMainboard().switchTo(t.state.pageID,t.state.query,{channel:t.state.channel}):switchToHash()};var switchToHash=function(){var t=location.hash.replace(\"#\",\"\"),e=!1;\"!\"===t[0]&&(t=t.substr(1),Object.keys($.currentActivity.rules).forEach(function(i){if(!e){var a=$.currentActivity.rules[i];if(a.rule.test(t))try{a.handler(t),e=!0}catch(n){console.error(n)}}}))},buildQueryObject=function(t){for(var e=t.split(\"&\"),i={},a=0;a<e.length;++a)for(var n=e[a],o=n.split(\"=\"),r=o[0],s=o[1],u=r.split(\".\"),c=i,l=0;l<u.length;++l)l==u.length-1?c[u[l]]=s:(c[u[l]]||(c[u[l]]={}),c=c[u[l]]);return i},buildObjectQuery=function(t,e){var i=\"\";return Object.keys(e).forEach(function(a){if(e[a]){var n=\"\";switch(t&&(n=t+\".\"+n),n+=a,typeof e[a]){case\"object\":if(Array.isArray(e[a]))for(var o=0;o<e[a].length;++o){var r=e[a][o];$.isKindOf(r,Object)||(i.length&&(i+=\"&\"),i=i+n+\"[\"+o+\"]=\"+r)}else i.length&&(i+=\"&\"),i+=buildObjectQuery(n,e[a]);break;default:i.length&&(i+=\"&\"),i=i+n+\"=\"+e[a]}}}),i},buildHashURL=function(t,e,i){var a=\"#!/activity/\"+e+\"/\"+t;if(i){var n=buildObjectQuery(null,i);n&&(a=a+\"?\"+n)}return a},anchorHandler=function(t,e){if(currentActivity.isMainboard(t)&&e.data.anchor){var i=$(e.dom).find(\"#\"+e.data.anchor);if(i.length){var a=$(i).positionToPage({x:0,y:0}),n=a.y-$(i).height(),o=$(document.body).css(\"height\");$(document.body).css(\"height\",\"auto\"),$(document.body).animate({scrollTop:n},$.currentActivity.options.anchorMovementDuration,function(){$(document.body).css(\"height\",o)})}}},currentActivity=new Activity;$.storyboard.plugins.activity={init:function(t){currentActivity.storyboards[t.id]={state:null,storyboard:t},currentActivity.isMainboard(t)&&$(t.dom).height($(window).height())},willSwitchToStartPage:function(t){if(currentActivity.isMainboard(t))if(currentActivity.options.interceptStartPage&&history.state)delete t.options.startPageID,t.switchTo(history.state.pageID,history.state.query,{channel:history.state.channel,forceAnimation:!0});else if(currentActivity.options.interceptStartPage){var e=location.hash.replace(\"#\",\"\");\"!\"===e[0]&&(delete t.options.startPageID,switchToHash())}},didPageEnterForestage:function(t,e){if(currentActivity.isMainboard(t)){var i=t.channel,a=e.data.settings;history.pushState({pageID:e.id,channel:i,query:a.data},\"\",buildHashURL(e.id,i,a.data))}anchorHandler(t,e)},willUpdatePage:function(t,e){if(currentActivity.isMainboard(t)){var i=t.channel,a=e.data.settings;history.pushState({pageID:e.id,channel:i,query:a.data},\"\",buildHashURL(e.id,i,a.update))}},didUpdatePage:function(t,e){anchorHandler(t,e)},destoryPage:function(t,e){e.data.viewLayer&&$(e.data.viewLayer).remove()}},$.template.external.viewLayer=function(t,e){var i=this,a={yes:!0,no:!1,\"true\":!0,\"false\":!1}[$(t).attr(\"shadow\")],n=t.getAttributeNS?t.getAttributeNS($.template.namespaceURI,\"on-ready\"):null;$(\"body\").hasClass(\"ui-mobile\")&&(a=!1);var o={animated:a?!1:!0,defaultAnimationDuration:1e3,defaultAnimation:a?\"none\":\"left\",parser:\"text/html\",functors:i.functors,prependNamespaces:{sb:\"http://project.spiritate.org/storyboard\",tmpl:\"http://project.spiritate.org/template\",storyboard:\"http://project.spiritate.org/storyboard\",template:\"http://project.spiritate.org/template\",templatex:\"http://project.spiritate.org/templatex\",tmplx:\"http://project.spiritate.org/templatex\",t:\"http://project.spiritate.org/template\",x:\"http://project.spiritate.org/templatex\"}},r=document.createElement(\"div\"),s=$.currentActivity.createViewLayer(i.page.uuid),u=!1;if(!i.viewLayer){u=!0,i.viewLayer=i.page.data.viewLayer=s;var c=i.storyboard.options.pageSpecs[i.page.id],l=c.styleSource,d=$(\"<style>\").html(l+\"\\n/*# sourceURL=\"+c.stylePath+\"*/\");$(s).append(d);var p=function(t){if(t instanceof CSSMediaRule||window.CSSSupportsRule&&t instanceof CSSSupportsRule||t instanceof CSSStyleSheet)t.prefixedCSSText=Array.prototype.map.call(t.cssRules,function(t){return p(t),t.prefixedCSSText?t.prefixedCSSText:t.cssText}).join(\"\\n\"),t.media&&t.media.length&&(t.prefixedCSSText=\"@media \"+t.media.mediaText+\"{\\n\"+t.prefixedCSSText+\"\\n}\");else if(t instanceof CSSStyleRule){var e=t.selectorText.split(\",\").filter(function(t){return t.trim().length>0}).map(function(t){var e=\"#\"+$(i.viewLayer).attr(\"id\")+\" \";return/\\.storyboard\\-page(\\s|{|$)/g.test(t)?t:e+t}).join(\",\");t.prefixedCSSText=e+t.cssText.substring(t.selectorText.length)}};Array.prototype.forEach.call(document.styleSheets,function(t){if(t.ownerNode===d[0]){p(t);var e=[];Array.prototype.forEach.call(t.cssRules,function(t){e.push(t.prefixedCSSText?t.prefixedCSSText:t.cssText)}),d.html(e.join(\"\\n\")),$(s).data(\"ruledCSS\",e.join(\"\\n\"))}}),s.templates={}}var y=$.template($(t).html(),i,o);y.render(r,function(){if(a){var t=document.createElement(\"div\");s.append(t);var c=t.createShadowRoot(),l=document.createElement(\"template\");l.innerHTML=\"<style>\"+$(s).data(\"ruledCSS\")+\"</style>\\n\",c.appendChild(l.content),c.appendChild($(r)[0])}else s.append(r);if(u&&n){var d={};for(var p in i)d[p]=i[p];d.template=l,$.template.execute(n,d,o)}e(null,null,r)})},module.exports=currentActivity;"}},"/library/lab.dom/animation.js":{"url":"/library/lab.dom/animation.js","content":{"encoding":"text","data":"$(function(){var e=function(e,t,i,n){this.reference=e,this.from=parseInt(t),this.to=parseInt(i),this.interpolation=n};e.prototype.calculate=function(e){return Math.round(this.from+this.interpolation(e)*(this.to-this.from))};var t=function(e,t,i,n){this.reference=e,this.from=parseFloat(t),this.to=parseFloat(i),this.interpolation=n};t.prototype.calculate=function(e){return this.from+this.interpolation(e)*(this.to-this.from)};var i={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",\"indianred \":\"#cd5c5c\",\"indigo \":\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgray:\"#d3d3d3\",lightgreen:\"#90ee90\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370db\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#db7093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\",transparent:\"rgba(0, 0, 0, 0)\"},n=function(e){if(i.hasOwnProperty(e)&&(e=i[e]),e.hasOwnProperty(\"red\")&&e.hasOwnProperty(\"green\")&&e.hasOwnProperty(\"blue\")&&e.hasOwnProperty(\"alpha\"))this.red=parseFloat(e.red),this.green=parseFloat(e.green),this.blue=parseFloat(e.blue),this.alpha=parseFloat(e.alpha);else if(\"#\"===e[0])if(4===e.length)this.red=parseInt(e.substring(1,2),16)/15,this.green=parseInt(e.substring(2,3),16)/15,this.blue=parseInt(e.substring(3,4),16)/15,this.alpha=1;else{if(!(e.length=7))throw new Error(\"Invalid color\");this.red=parseInt(e.substring(1,3),16)/255,this.green=parseInt(e.substring(3,5),16)/255,this.blue=parseInt(e.substring(5,7),16)/255,this.alpha=1}else if(\"rgb(\"===e.substring(0,4)){var t=e.slice(4,-1).split(\",\");this.red=parseInt(t[0])/255,this.green=parseInt(t[1])/255,this.blue=parseInt(t[2])/255,this.alpha=1}else{if(\"rgba(\"!==e.substring(0,5))throw new Error(\"Invalid color\");var t=e.slice(5,-1).split(\",\");this.red=parseInt(t[0])/255,this.green=parseInt(t[1])/255,this.blue=parseInt(t[2])/255,this.alpha=parseFloat(t[3])}};n.prototype.toString=function(){return\"rgba(\"+Math.round(255*this.red)+\", \"+Math.round(255*this.green)+\", \"+Math.round(255*this.blue)+\", \"+this.alpha.toFixed(2)+\")\"};var r=function(e,t,i,r){this.reference=e,this.from=new n(t),this.to=new n(i),this.interpolation=r};r.prototype.calculate=function(e){var t=this.interpolation(e);return new n({red:this.from.red+t*(this.to.red-this.from.red),green:this.from.green+t*(this.to.green-this.from.green),blue:this.from.blue+t*(this.to.blue-this.from.blue),alpha:this.from.alpha+t*(this.to.alpha-this.from.alpha)})};var s=function(e,t){if(t.hasOwnProperty(\"unit\"))this.unit=t.unit,this.number=t.number;else{var i=t.indexOf(/[^0-9]/);-1!=i?this.unit=t.substring(i):this.unit=\"px\",this.number=parseFloat(t)}this.reference=e};Object.defineProperty(s.prototype,\"numberInPixels\",{enumerable:!1,get:function(){switch(this.unit){case\"px\":return this.number;case\"pt\":return 72*this.number/96;case\"pc\":return 6*this.number/96;case\"in\":return 96*this.number;case\"cm\":return 96*this.number*2.54;case\"mm\":return 96*this.number*25.4;case\"em\":return new s(this.reference.reference,this.reference.value).numberInPixels*this.number;case\"rem\":return new s(null,$(document.body).style(\"font-size\")).numberInPixels*this.number;case\"ex\":return new s(this.reference.reference,this.reference.value).numberInPixels*this.number*.65;case\"rex\":return new s(null,$(document.body).style(\"font-size\")).numberInPixels*this.number*.65;case\"vh\":return document.body.clientHeight*this.number/100;case\"vw\":return document.body.clientWidth*this.number/100;case\"vmin\":return Math.min(document.body.clientWidth,document.body.clientHeight)*this.number/100;case\"vmax\":return Math.max(document.body.clientWidth,document.body.clientHeight)*this.number/100;case\"%\":return this.number*new s(this.reference.reference,this.reference.value).numberInPixels/100;default:return NaN}}}),s.prototype.toString=function(){return this.number.toFixed(2)+this.unit};var o=function(e,t,i,n){this.reference=e,this.from=new s(e,t),this.to=new s(e,i),this.interpolation=n};o.prototype.calculate=function(e){return new s(null,{number:(this.from.numberInPixels+this.interpolation(e)*(this.to.numberInPixels-this.from.numberInPixels))/96*25.4,unit:\"mm\"})};var a=function(e,t,i,n){},l={};[\"column-count\",\"order\",\"z-index\",\"font-weight\",\"font-stretch\"].forEach(function(t){l[t]={animation:e,field:\"style\",property:t,cssTransition:!0}}),[\"opacity\",\"flex-grow\",\"flex-shrink\",\"font-size-adjust\",\"shape-image-threshold\"].forEach(function(e){l[e]={animation:t,field:\"style\",property:e,cssTransition:!0}}),[\"perspective\",\"column-width\",\"column-gap\",\"column-rule-width\",\"flex-basis\",\"border-left-width\",\"border-right-width\",\"border-bottom-left-radius\",\"border-bottom-right-radius\",\"border-top-left-radius\",\"border-top-right-radius\",\"margin-left\",\"margin-right\",\"padding-left\",\"padding-right\",\"min-width\",\"max-width\",\"left\",\"right\",\"width\",\"outline-offset\",\"outline-width\",\"shape-margin\"].forEach(function(e){l[e]={animation:o,reference:\"width\",field:\"style\",property:e,cssTransition:!0}}),[\"border-bottom-width\",\"border-top-width\",\"margin-bottom\",\"margin-top\",\"padding-bottom\",\"padding-top\",\"min-height\",\"max-height\",\"bottom\",\"top\",\"height\"].forEach(function(e){l[e]={animation:o,reference:\"height\",field:\"style\",property:e,cssTransition:!0}}),[\"letter-spacing\",\"tab-size\",\"text-indent\",\"word-spacing\",\"font-size\",\"line-height\"].forEach(function(e){l[e]={animation:o,reference:\"font-size\",field:\"style\",property:e,cssTransition:!0}}),[\"color\",\"column-rule-color\",\"text-decoration-color\",\"background-color\",\"border-bottom-color\",\"border-left-color\",\"border-right-color\",\"border-top-color\",\"outline-color\"].forEach(function(e){l[e]={animation:r,field:\"style\",property:e,cssTransition:!0}}),[\"transform\",\"text-shadow\",\"box-shadow\"].forEach(function(e){l[e]={field:\"style\",property:e,cssTransition:!0}}),[\"transform-origin\",\"perspective-origin\",\"background-position\",\"background-size\",\"clip\",\"object-position\"].forEach(function(e){l[e]={animation:a,field:\"style\",property:e,cssTransition:!0}});var h={\"border-width\":[\"border-bottom-width\",\"border-left-width\",\"border-right-width\",\"border-top-width\"],\"border-color\":[\"border-bottom-color\",\"border-left-color\",\"border-right-color\",\"border-top-color\"],\"border-radius\":[\"border-bottom-left-radius\",\"border-bottom-right-radius\",\"border-top-left-radius\",\"border-top-right-radius\"],padding:[\"padding-bottom\",\"padding-left\",\"padding-right\",\"padding-top\"],margin:[\"margin-bottom\",\"margin-left\",\"margin-right\",\"margin-top\"]},f=function(e,t,i){this.object=e,this.field=t,this.property=i};Object.defineProperty(f.prototype,\"reference\",{enumerable:!1,get:function(){return\"style\"===this.field?this.object.parentElement:null}}),Object.defineProperty(f.prototype,\"value\",{enumerable:!1,get:function(){return\"style\"===this.field?$(this.object).style(this.property):null}});var c=\"inited\",d=\"playing\",u=\"finished\",p=\"canceled\",b=Symbol(\"animators\"),m=function(){var e={WebkitTransition:[\"webkitTransitionEnd\"],MozTransition:[\"transitionend\"],OTransition:[\"oTransitionEnd\",\"otransitionend\"],transition:[\"transitionend\"]};for(var t in e)if(document.body.style.hasOwnProperty(t))return e[t];return[\"transitionend\"]}(),g=function(e,t,i,n,r,s,o,a){this.id=$.createUUID(),this.usingCSSTransition=a,e[b]||(e[b]={});var h=l[t],d=null,u=null;\"style\"===h.field&&(u=$(e).style(h.property),d=e.parentElement),this.object=e,this.property=t,this.settings=h,this.listeners=o,this.listeners||(this.listeners={}),this.delay=n,this.duration=r,this.settings.animation?this.animation=new this.settings.animation(new f(d,h.field,h.reference),u,i,s):this.animation={interpolation:s,reference:new f(d,h.field,h.reference),from:u,to:i},this.state=c,this.version=$.createUUID(),this.listeners.inited&&this.listeners.inited(this)};g.prototype.play=function(){if(this.state!==c)throw new Error(\"Animator not prepared\");var e=this;Object.keys(this.object[b]).slice(0).forEach(function(t){this.object[b][t]instanceof Array||this.object[b][t]&&this.object[b][t].settings.field===e.settings.field&&this.object[b][t].property===e.property&&this.object[b][t].cancel()}.bind(this)),this.object[b][this.id]=this,this.state=d;var t=$.createUUID();if(this.version=t,this.listeners.prepared&&this.listeners.prepared(this),this.usingCSSTransition&&this.settings.cssTransition&&\"style\"===this.settings.field&&this.animation.interpolation.cssFunction){var i=$(this.object),n=i.style(),r=n[\"transition-property\"].split(\",\").map(function(e){return e.trim()}),s=n[\"transition-duration\"].split(\",\").map(function(e){return e.trim()}),o=n[\"transition-delay\"].split(\",\").map(function(e){return e.trim()}),a=[];n[\"transition-timing-function\"].split(\",\").forEach(function(e){if(a.length>0){var t=a[a.length-1];t.split(\"(\").length===t.split(\")\").length?a.push(e):a[a.length-1]=t+e}else a.push(e)}),a=a.map(function(e){return e.trim()});var l=r.indexOf(\"all\");-1!==l&&(r.splice(l,1),s.splice(l,1),o.splice(l,1),a.splice(l,1));var l=r.indexOf(e.settings.property);-1!==l&&(r.splice(l,1),s.splice(l,1),o.splice(l,1),a.splice(l,1),i.style(e.settings.property,i.style(e.settings.property))),r.push(e.settings.property),s.push(this.duration+\"ms\"),o.push(this.delay+\"ms\"),a.push(this.animation.interpolation.cssFunction),i.styles({\"transition-property\":r.join(\", \"),\"transition-duration\":s.join(\", \"),\"transition-delay\":o.join(\", \"),\"transition-timing-function\":a.join(\", \")}),i.on(m.map(function(t){return\"animation.\"+e.id+\".\"+e.settings.property+\".\"+t}).join(\" \"),function(n){n.propertyName===e.settings.property&&(i.off(\"animation.\"+e.id+\".\"+e.settings.property+\".*\"),y.call(this),this.state===d&&t===this.version&&this.listeners.finished&&this.listeners.finished(this))}.bind(this)),i.styles(e.settings.property,e.animation.to.toString())}else this.delayHandle=$.delay(this.delay,function(){if(delete this.delayHandle,this.state===d&&t===this.version){this.listeners.started&&this.listeners.started(this);var e=(new Date).getTime(),i=function(){window.requestAnimationFrame(function(){if(this.state===d&&t===this.version){var n=(new Date).getTime()-e;if(n<this.duration){this.listeners.playing&&this.listeners.playing(this);var r=this.animation.calculate(n/this.duration);\"style\"===this.settings.field&&$(this.object).style(this.settings.property,r.toString()),i()}else this.state=u,\"style\"===this.settings.field&&$(this.object).style(this.settings.property,this.animation.to.toString()),delete this.object[b][this.id],this.listeners.finished&&this.listeners.finished(this)}}.bind(this))}.bind(this);i()}}.bind(this))},g.prototype.reset=function(){this.state!==c&&(this.state=c,this.version=$.createUUID(),delete this.object[b][this.id],this.delayHandle&&(this.delayHandle.cancel(),delete this.delayHandle),this.state===d&&this.listeners.canceled&&this.listeners.canceled(this),this.listeners.reset&&this.listeners.reset(this),y.call(this))};var y=function(){if(this.usingCSSTransition&&this.settings.cssTransition&&\"style\"===this.settings.field&&this.animation.interpolation.cssFunction){var e=this,t=$(this.object),i=t.style(),n=i[\"transition-property\"].split(\",\").map(function(e){return e.trim()}),r=i[\"transition-duration\"].split(\",\").map(function(e){return e.trim()}),s=i[\"transition-delay\"].split(\",\").map(function(e){return e.trim()}),o=[];i[\"transition-timing-function\"].split(\",\").forEach(function(e){if(o.length>0){var t=o[o.length-1];t.split(\"(\").length===t.split(\")\").length?o.push(e):o[o.length-1]=t+e}else o.push(e)}),o=o.map(function(e){return e.trim()});var a=n.indexOf(\"all\");-1!==a&&(n.splice(a,1),r.splice(a,1),s.splice(a,1),o.splice(a,1));var a=n.indexOf(e.settings.property);-1!==a&&(n.splice(a,1),r.splice(a,1),s.splice(a,1),o.splice(a,1)),t.styles({\"transition-property\":n.join(\", \"),\"transition-duration\":r.join(\", \"),\"transition-delay\":s.join(\", \"),\"transition-timing-function\":o.join(\", \")})}};g.prototype.cancel=function(e){if(this.state===d){this.state=p,this.version=$.createUUID(),delete this.object[b][this.id],this.delayHandle&&(this.delayHandle.cancel(),delete this.delayHandle),this.listeners.canceled&&this.listeners.canceled(this);var t=$(this.object).style(this.settings.property);y.call(this),e?\"style\"===this.settings.field&&$(this.object).style(this.settings.property,t):\"style\"===this.settings.field&&$(this.object).style(this.settings.property,this.animation.to.toString())}};var v=Symbol(\"version\"),w=1;$.upgrade({domain:\"dom\",addons:{then:function(e){var t=this,i=t.clone(),n=w;return Object.defineProperty(i,\"async\",{enumerable:!1,value:$.async(function(){t.async?t.async.pipe(this):this.next()}).then(function(){0===t.filter(function(e){return e[v]?e[v]>=n:!1}).length?e.apply(this,[i]):this.reject(new Error(\"Animation canceled\"))})}),i},rejected:function(e){return this.async&&this.async.rejected(e),this},delay:function(e){var t=w;return this.then(function(i){$.delay(e,function(){0===i.filter(function(e){return e[v]?e[v]>=t:!1}).length?this.next():this.reject(new Error(\"Animation canceled\"))}.bind(this))})},stop:function(e,t){var i=this;e&&(i=this.clone(),i.query(\"*\").forEach(function(e){i.include(e)}));var n=w;return++w,i.forEach(function(e){e[b]&&Object.keys(e[b]).slice(0).forEach(function(i){e[b][i].cancel(t)}),e[v]=n}),this},animate:function(){var e={},t={};1===arguments.length?e=arguments[0]:arguments.length>1&&($.isKindOf(arguments[0],String)?(e[arguments[0]]=e[arguments[1]],arguments.length>2&&(t=arguments[2])):(e=arguments[0],t=arguments[1])),t=$.advancedMerge({\"!valueType\":\"object\",\"!numberFields\":\"duration\",duration:{\"!valueType\":\"number\",\"!defaultValue\":1e3},delay:{\"!valueType\":\"number\",\"!defaultValue\":0},noCSSTransition:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},interpolation:{\"!defaultValue\":\"default\"}},t);var i=t.interpolation;$.isKindOf(i,String)&&(i=$.interpolations[i]),i||(i=$.interpolations[\"default\"]);var n={};Object.keys(e).forEach(function(t){h[t]?h[t].forEach(function(i){e.hasOwnProperty(i)||(n[i]=e[t])}):n[t]=e[t]});var r=w;return this.then(function(e){var s=this,o=0,a=0,l=!1,h=function(){l||(a>0?(l=!0,s.reject(new Error(\"Animation canceled\"))):o===e.length&&(l=!0,s.next()))};0===e.filter(function(e){return e[v]?e[v]>=r:!1}).length?e.forEach(function(e){var r={},s=0,l=0,f=!1,c=function(){f||(l>0?(f=!0,++a,h()):s===Object.keys(n).length&&(f=!0,++o,h()))};Object.keys(n).forEach(function(o){r[o]=new g(e,o,n[o],t.delay,t.duration,i,{finished:function(e){++s,c()},canceled:function(e){++l,c()}},!t.noCSSTransition)}),Object.keys(r).slice(0).forEach(function(e){r[e].play()})}):s.reject(new Error(\"Animation canceled\"))})}}});var j=function(){var e=null,t={};1===arguments.length?(e=$(\"html\"),t=arguments[0]):arguments.length>1&&(e=$(arguments[0]),t=arguments[1]),this.query=e,this.animations=t};j.prototype.play=function(e,t){var i=this;return this.animations.hasOwnProperty(e)?$.async(function(){var n=i.animations[e],r=0,s=0,o=function(){r===Object.keys(n).length&&(s>0?this.reject(new Error(\"Animation canceled\")):this.next())}.bind(this);Object.keys(n).forEach(function(e){var a=null;n[e].forEach(function(n){var r=null;n.selector?(r=\"&\"===n.selector||0===n.selector.length?i.query.clone():null===a?i.query.query(n.selector):a.query(n.selector),console.log(2)):null===a?(r=\"&\"===e||0===e.length?i.query.clone():i.query.query(e),a=r):r=a;var s={},o={};if(Object.keys(n).forEach(function(e){var i=$.template(n[e]+\"\",t);\"!\"===e[0]?o[e.substring(1)]=i:s[e]=i}),a!=r){var l=a;a=r.then(function(){var e=this;l.then(function(){r.clone().animate(s,o).then(function(){this.next(),e.next()}).rejected(function(t){e.reject(t)}),this.next()}).rejected(function(t){e.reject(t)})})}else a=a.animate(s,o)}),a.then(function(){++r,o()}).rejected(function(e){++s,++r,o()})})}):$.async.reject(new Error(\"Animation not found\"))},$.animationSet=function(e){return new j(e)}});"}},"/library/lab.dom/browser.js":{"url":"/library/lab.dom/browser.js","content":{"encoding":"text","data":"$(function(){var e=$(\"<div>\").css({width:\"10000pt\",height:\"10000mm\",\"pointer-events\":\"none\",position:\"absolute\"});$(document.body).append(e);var r=(parseFloat(e.css(\"width\"))/1e4,parseFloat(e.css(\"height\"))/1e4);e.detach();var o=0;if(window.matchMedia)for(var a=.01;8>a;)window.matchMedia(\"(min-resolution: \"+a+\"dppx)\").matches&&(o=a),window.matchMedia(\"(-webkit-min-resolution: \"+a+\"dppx)\").matches&&(o=a),window.matchMedia(\"(min-device-pixel-ratio: \"+a+\")\").matches&&(o=a),window.matchMedia(\"(-webkit-min-device-pixel-ratio: \"+a+\")\").matches&&(o=a),a+=.01;else o=1;o=parseFloat(o.toFixed(5));var t=Math.min(window.screen.width,window.screen.height)/r,s=!0;try{document.createEvent(\"TouchEvent\")}catch(i){s=!1}var n=$(document.body),d=/(ipad|iphone|ipod)/g.test(navigator.userAgent.toLowerCase()),w=-1!==navigator.userAgent.toLowerCase().indexOf(\"android\"),m=-1!==navigator.userAgent.toLowerCase().indexOf(\"windows\"),u=-1!==navigator.userAgent.toLowerCase().indexOf(\"linux\"),l=-1!==navigator.userAgent.toLowerCase().indexOf(\"macintosh\"),b=/ipad/g.test(navigator.userAgent.toLowerCase()),g=/(iphone|ipod)/g.test(navigator.userAgent.toLowerCase()),c=-1!==navigator.userAgent.toLowerCase().indexOf(\"chrome\"),h=-1!==navigator.userAgent.toLowerCase().indexOf(\"msie\")||-1!==navigator.userAgent.toLowerCase().indexOf(\"trident\"),p=-1!==navigator.userAgent.toLowerCase().indexOf(\"edge\"),x=-1!==navigator.userAgent.toLowerCase().indexOf(\"firefox\"),v=-1!==navigator.userAgent.toLowerCase().indexOf(\"safari\"),f=-1!==navigator.userAgent.toLowerCase().indexOf(\"presto\"),C=120;c&&(v=!1),(h||p)&&(c=!1,v=!1),(w||-1!==navigator.userAgent.toLowerCase().indexOf(\"mobile\"))&&(t>C?(b=!0,g=!1):(b=!1,g=!0)),c||w?$.browser={name:\"chrome\",layout:\"blink\"}:h?$.browser={name:\"msie\",layout:\"trident\"}:p?$.browser={name:\"edge\",layout:\"trident\"}:x?$.browser={name:\"firefox\",layout:\"trident\"}:v?$.browser={name:\"safari\",layout:\"webkit\"}:f?$.browser={name:\"opera\",layout:\"presto\"}:$.browser={name:\"unknown\",layout:\"unknown\"},$.browser.touchable=s,d?$.browser.system=\"ios\":w?$.browser.system=\"android\":m?$.browser.system=\"windows\":u?$.browser.system=\"linux\":l?$.browser.system=\"osx\":$.browser.system=\"unknown\",b?$.browser.ui=\"tablet\":g?$.browser.ui=\"mobile\":$.browser.ui=\"desktop\";try{$.browser.framed=window!=window.top}catch(y){$.browser.framed=!0}$.browser.realPixelate=o,$.browser.pixelate=Math.round(o),$.browser.framed&&n.addClass(\"page-framed\"),n.addClass(\"browser-\"+$.browser.name),n.addClass(\"system-\"+$.browser.system),n.addClass(\"layout-\"+$.browser.layout),n.addClass(\"ui-\"+$.browser.ui),$.browser.touchable&&n.addClass(\"screen-touchable\"),n.addClass(\"pixelate-real-\"+$.browser.realPixelate),n.addClass(\"pixelate-\"+$.browser.pixelate)});"}},"/library/lab.dom/coolcto.js":{"url":"/library/lab.dom/coolcto.js","content":{"encoding":"text","data":"var Navbar=function(t,e,n){var o=!1;return{init:function(e,n,o){t.onLeftButtonClick=function(){e.currentPage.spec.module.exports.onBackClick?e.currentPage.spec.module.exports.onBackClick.call(e.currentPage.data):e.goBackward()},t.onRightButtonClick=function(){e.currentPage.spec.module.exports.onHeaderRightButtonClick&&e.currentPage.spec.module.exports.onHeaderRightButtonClick.call(e.currentPage.data)}},willSwitchToPage:function(t,e,n,a){if(o)throw new Error(t.dom.id+\" time interval is not legal\");o=!0,setTimeout(function(){o=!1},1e3)},didSwitchToPage:function(t,e,n,a){o=!1},willPageEnterForestage:function(o,a,r){r.navnormal||$(o.dom).find(\".storyboard-page\").css(\"padding-top\",n+\"px\"),r.header&&t.currentPage&&t.switchTo(r.header,r.settings.data,{action:\"reset\",animation:\"fading\"}).then(function(){r.needupdateheader&&t.currentPage.update({rightButtonText:r.rightbuttontext,contentButtonText:r.contentbuttontext,leftButtonText:r.leftbuttontext})}),r.bottom&&e.currentPage&&e.switchTo(r.bottom,r.settings.data,{action:\"reset\",animation:\"fading\"})}}};module.exports.Navbar=Navbar;"}},"/library/lab.dom/foundation.js":{"url":"/library/lab.dom/foundation.js","content":{"encoding":"text","data":"$(function(){var e=Symbol(\"eventListeners\"),t=function(t){return t.hasOwnProperty(e)||(t[e]={}),t[e]},r=function(e){if($.isKindOf(e,RegExp))return e;if($.isNull(e))return/$^/;var t=new RegExp(\"^\"+(e+\"\").replace(/[\\$\\^\\(\\)\\-\\+\\[\\]\\{\\}\\\\\\|\\,\\?\\/\\.]/g,function(e){return\"\\\\\"+e}).replace(/(\\\\\\.)*(\\*+)(\\\\\\.)*/g,function(e){return\"\\\\.\"===e.slice(0,2)?\"\\\\.\"===e.slice(-2)?\"(\\\\.|\\\\..+\\\\.)\":\"(\\\\..+)?\":\"\\\\.\"===e.slice(-2)?\"(.+\\\\.)?\":\".*\"})+\"$\",\"m\");return t.fromString=e,t},n=function(){};n.prototype.serializeToString=function(e,t){t=t?$.merge({},t):{};var r=this;switch(e.nodeType){case Node.TEXT_NODE:return $.escapeXML(e.nodeValue);case Node.ATTRIBUTE_NODE:return $.escapeXML(e.nodeName)+'=\"'+$.escapeXML(e.nodeValue)+'\"';case Node.CDATA_SECTION_NODE:return\"<![CDATA[\"+e.nodeValue+\"]]>\";case Node.COMMENT_NODE:return\"<!--\"+e.nodeValue+\"-->\";case Node.ELEMENT_NODE:var n=[\"<\"],a=e.namespaceURI,i=e.nodeName,s=e.prefix,u={};if(\"http://www.w3.org/1999/xhtml\"===a){i=i.toLocaleLowerCase();var l=i.split(\":\");l.length>1?(s=l[0],a=t[a]):a=null}return n.push(i),e.attributes.length>0&&(n.push(\" \"),n.push(Array.prototype.map.call(e.attributes,function(e){var n=null,a=null;return\"xmlns\"===e.nodeName?(a=\"\",n=e.nodeValue):0===e.nodeName.indexOf(\"xmlns:\")&&(a=e.nodeName.substring(6),n=e.nodeValue),n&&(t[a]=n),e.namespaceURI&&\"http://www.w3.org/2000/xmlns/\"!==e.namespaceURI&&(a=e.prefix?e.prefix:\"\",u[a]=e.namespaceURI),r.serializeToString(e)}).join(\" \"))),a?t[s?s:\"\"]!==a&&a&&(s?(t[s]=a,n.push(\" xmlns:\"+s+'=\"'+a+'\"')):(t[\"\"]=a,n.push(' xmlns=\"'+a+'\"'))):!s&&t[\"\"]!==e.namespaceURI&&e.namespaceURI&&(n.push(' xmlns=\"'+e.namespaceURI+'\"'),t[\"\"]=e.namespaceURI),Object.keys(u).forEach(function(e){t[e]!==u[e]&&(t[e]=u[e],n.push(e?\" xmlns:\"+e+'=\"'+u[e]+'\"':' xmlns=\"'+u[e]+'\"'))}),e.childNodes.length>0?(n.push(\">\"),n.push(Array.prototype.map.call(e.childNodes,function(e){return r.serializeToString(e,t)}).join(\"\")),n.push(\"<\"),n.push(\"/\"),n.push(i),n.push(\">\")):(n.push(\"/\"),n.push(\">\")),n.join(\"\");case Node.DOCUMENT_FRAGMENT_NODE:case Node.DOCUMENT_NODE:var n=[];return Array.prototype.forEach.call(e.childNodes,function(e){n.push(r.serializeToString(e))}),n.join(\"\");case Node.DOCUMENT_TYPE_NODE:case Node.ENTITY_NODE:case Node.ENTITY_REFERENCE_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.NOTATION_NODE:}},$.escapeXML=function(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")};var a={\"&amp;\":\"&#x26;\",\"&lt;\":\"&#x3C;\",\"&gt;\":\"&#x3E;\",\"&nbsp;\":\"&#xA0;\",\"&iexcl;\":\"&#xA1;\",\"&cent;\":\"&#xA2;\",\"&pound;\":\"&#xA3;\",\"&curren;\":\"&#xA4;\",\"&yen;\":\"&#xA5;\",\"&brvbar;\":\"&#xA6;\",\"&sect;\":\"&#xA7;\",\"&uml;\":\"&#xA8;\",\"&copy;\":\"&#xA9;\",\"&ordf;\":\"&#xAA;\",\"&laquo;\":\"&#xAB;\",\"&not;\":\"&#xAC;\",\"&shy;\":\"&#xAD;\",\"&reg;\":\"&#xAE;\",\"&macr;\":\"&#xAF;\",\"&deg;\":\"&#xB0;\",\"&plusmn;\":\"&#xB1;\",\"&sup2;\":\"&#xB2;\",\"&sup3;\":\"&#xB3;\",\"&acute;\":\"&#xB4;\",\"&micro;\":\"&#xB5;\",\"&para;\":\"&#xB6;\",\"&middot;\":\"&#xB7;\",\"&cedil;\":\"&#xB8;\",\"&sup1;\":\"&#xB9;\",\"&ordm;\":\"&#xBA;\",\"&raquo;\":\"&#xBB;\",\"&frac14;\":\"&#xBC;\",\"&frac12;\":\"&#xBD;\",\"&frac34;\":\"&#xBE;\",\"&iquest;\":\"&#xBF;\",\"&Agrave;\":\"&#xC0;\",\"&Aacute;\":\"&#xC1;\",\"&Acirc;\":\"&#xC2;\",\"&Atilde;\":\"&#xC3;\",\"&Auml;\":\"&#xC4;\",\"&Aring;\":\"&#xC5;\",\"&AElig;\":\"&#xC6;\",\"&Ccedil;\":\"&#xC7;\",\"&Egrave;\":\"&#xC8;\",\"&Eacute;\":\"&#xC9;\",\"&Ecirc;\":\"&#xCA;\",\"&Euml;\":\"&#xCB;\",\"&Igrave;\":\"&#xCC;\",\"&Iacute;\":\"&#xCD;\",\"&Icirc;\":\"&#xCE;\",\"&Iuml;\":\"&#xCF;\",\"&ETH;\":\"&#xD0;\",\"&Ntilde;\":\"&#xD1;\",\"&Ograve;\":\"&#xD2;\",\"&Oacute;\":\"&#xD3;\",\"&Ocirc;\":\"&#xD4;\",\"&Otilde;\":\"&#xD5;\",\"&Ouml;\":\"&#xD6;\",\"&times;\":\"&#xD7;\",\"&Oslash;\":\"&#xD8;\",\"&Ugrave;\":\"&#xD9;\",\"&Uacute;\":\"&#xDA;\",\"&Ucirc;\":\"&#xDB;\",\"&Uuml;\":\"&#xDC;\",\"&Yacute;\":\"&#xDD;\",\"&THORN;\":\"&#xDE;\",\"&szlig;\":\"&#xDF;\",\"&agrave;\":\"&#xE0;\",\"&aacute;\":\"&#xE1;\",\"&acirc;\":\"&#xE2;\",\"&atilde;\":\"&#xE3;\",\"&auml;\":\"&#xE4;\",\"&aring;\":\"&#xE5;\",\"&aelig;\":\"&#xE6;\",\"&ccedil;\":\"&#xE7;\",\"&egrave;\":\"&#xE8;\",\"&eacute;\":\"&#xE9;\",\"&ecirc;\":\"&#xEA;\",\"&euml;\":\"&#xEB;\",\"&igrave;\":\"&#xEC;\",\"&iacute;\":\"&#xED;\",\"&icirc;\":\"&#xEE;\",\"&iuml;\":\"&#xEF;\",\"&eth;\":\"&#xF0;\",\"&ntilde;\":\"&#xF1;\",\"&ograve;\":\"&#xF2;\",\"&oacute;\":\"&#xF3;\",\"&ocirc;\":\"&#xF4;\",\"&otilde;\":\"&#xF5;\",\"&ouml;\":\"&#xF6;\",\"&divide;\":\"&#xF7;\",\"&oslash;\":\"&#xF8;\",\"&ugrave;\":\"&#xF9;\",\"&uacute;\":\"&#xFA;\",\"&ucirc;\":\"&#xFB;\",\"&uuml;\":\"&#xFC;\",\"&yacute;\":\"&#xFD;\",\"&thorn;\":\"&#xFE;\",\"&yuml;\":\"&#xFF;\",\"&fnof;\":\"&#x192;\",\"&Alpha;\":\"&#x391;\",\"&Beta;\":\"&#x392;\",\"&Gamma;\":\"&#x393;\",\"&Delta;\":\"&#x394;\",\"&Epsilon;\":\"&#x395;\",\"&Zeta;\":\"&#x396;\",\"&Eta;\":\"&#x397;\",\"&Theta;\":\"&#x398;\",\"&Iota;\":\"&#x399;\",\"&Kappa;\":\"&#x39A;\",\"&Lambda;\":\"&#x39B;\",\"&Mu;\":\"&#x39C;\",\"&Nu;\":\"&#x39D;\",\"&Xi;\":\"&#x39E;\",\"&Omicron;\":\"&#x39F;\",\"&Pi;\":\"&#x3A0;\",\"&Rho;\":\"&#x3A1;\",\"&Sigma;\":\"&#x3A3;\",\"&Tau;\":\"&#x3A4;\",\"&Upsilon;\":\"&#x3A5;\",\"&Phi;\":\"&#x3A6;\",\"&Chi;\":\"&#x3A7;\",\"&Psi;\":\"&#x3A8;\",\"&Omega;\":\"&#x3A9;\",\"&alpha;\":\"&#x3B1;\",\"&beta;\":\"&#x3B2;\",\"&gamma;\":\"&#x3B3;\",\"&delta;\":\"&#x3B4;\",\"&epsilon;\":\"&#x3B5;\",\"&zeta;\":\"&#x3B6;\",\"&eta;\":\"&#x3B7;\",\"&theta;\":\"&#x3B8;\",\"&iota;\":\"&#x3B9;\",\"&kappa;\":\"&#x3BA;\",\"&lambda;\":\"&#x3BB;\",\"&mu;\":\"&#x3BC;\",\"&nu;\":\"&#x3BD;\",\"&xi;\":\"&#x3BE;\",\"&omicron;\":\"&#x3BF;\",\"&pi;\":\"&#x3C0;\",\"&rho;\":\"&#x3C1;\",\"&sigmaf;\":\"&#x3C2;\",\"&sigma;\":\"&#x3C3;\",\"&tau;\":\"&#x3C4;\",\"&upsilon;\":\"&#x3C5;\",\"&phi;\":\"&#x3C6;\",\"&chi;\":\"&#x3C7;\",\"&psi;\":\"&#x3C8;\",\"&omega;\":\"&#x3C9;\",\"&thetasym;\":\"&#x3D1;\",\"&upsih;\":\"&#x3D2;\",\"&piv;\":\"&#x3D6;\",\"&bull;\":\"&#x2022;\",\"&hellip;\":\"&#x2026;\",\"&prime;\":\"&#x2032;\",\"&Prime;\":\"&#x2033;\",\"&oline;\":\"&#x203E;\",\"&frasl;\":\"&#x2044;\",\"&weierp;\":\"&#x2118;\",\"&image;\":\"&#x2111;\",\"&real;\":\"&#x211C;\",\"&trade;\":\"&#x2122;\",\"&alefsym;\":\"&#x2135;\",\"&larr;\":\"&#x2190;\",\"&uarr;\":\"&#x2191;\",\"&rarr;\":\"&#x2192;\",\"&darr;\":\"&#x2193;\",\"&harr;\":\"&#x2194;\",\"&crarr;\":\"&#x21B5;\",\"&lArr;\":\"&#x21D0;\",\"&uArr;\":\"&#x21D1;\",\"&rArr;\":\"&#x21D2;\",\"&dArr;\":\"&#x21D3;\",\"&hArr;\":\"&#x21D4;\",\"&forall;\":\"&#x2200;\",\"&part;\":\"&#x2202;\",\"&exist;\":\"&#x2203;\",\"&empty;\":\"&#x2205;\",\"&nabla;\":\"&#x2207;\",\"&isin;\":\"&#x2208;\",\"&notin;\":\"&#x2209;\",\"&ni;\":\"&#x220B;\",\"&prod;\":\"&#x220F;\",\"&sum;\":\"&#x2211;\",\"&minus;\":\"&#x2212;\",\"&lowast;\":\"&#x2217;\",\"&radic;\":\"&#x221A;\",\"&prop;\":\"&#x221D;\",\"&infin;\":\"&#x221E;\",\"&ang;\":\"&#x2220;\",\"&and;\":\"&#x2227;\",\"&or;\":\"&#x2228;\",\"&cap;\":\"&#x2229;\",\"&cup;\":\"&#x222A;\",\"&int;\":\"&#x222B;\",\"&there4;\":\"&#x2234;\",\"&sim;\":\"&#x223C;\",\"&cong;\":\"&#x2245;\",\"&asymp;\":\"&#x2248;\",\"&ne;\":\"&#x2260;\",\"&equiv;\":\"&#x2261;\",\"&le;\":\"&#x2264;\",\"&ge;\":\"&#x2265;\",\"&sub;\":\"&#x2282;\",\"&sup;\":\"&#x2283;\",\"&nsub;\":\"&#x2284;\",\"&sube;\":\"&#x2286;\",\"&supe;\":\"&#x2287;\",\"&oplus;\":\"&#x2295;\",\"&otimes;\":\"&#x2297;\",\"&perp;\":\"&#x22A5;\",\"&sdot;\":\"&#x22C5;\",\"&lceil;\":\"&#x2308;\",\"&rceil;\":\"&#x2309;\",\"&lfloor;\":\"&#x230A;\",\"&rfloor;\":\"&#x230B;\",\"&lang;\":\"&#x2329;\",\"&rang;\":\"&#x232A;\",\"&loz;\":\"&#x25CA;\",\"&spades;\":\"&#x2660;\",\"&clubs;\":\"&#x2663;\",\"&hearts;\":\"&#x2665;\",\"&diams;\":\"&#x2666;\"};$.replaceHTMLEntityForXML=function(e){return e.replace(/&[a-zA-Z0-9]+;/g,function(e){var t=a[e];return t||(t=\"\"),t})};var i={};!function(){for(var e=window.getComputedStyle(document.body),t=0;t<e.length;)\"-\"===e[t][0]&&(i[e[t][0].split(\"-\").slice(2).join(\"-\")]=e[t][0]),++t}(),$.actualStyleName=function(e){return i.hasOwnProperty(e)?i[e]:e};var s={};$.upgrade({domain:\"dom\",test:function(e){return 1===e.length&&($.isKindOf(e[0],String)||$.isKindOf(e[0],Node))},initializer:function(e){if($.isKindOf(e[0],$.Query)){var t=this;e[0].forEach(function(e){t.include(e)})}else $.isKindOf(e[0],Node)?this.include(e[0]):\"<\"===e[0].trim()[0]?$.parse(\"html\",e[0]).operateOn(this,function(e,t){e.include(t)}):$.query(document.querySelectorAll(e[0])).operateOn(this,function(e,t){e.include(t)})},addons:{feature:function(){return 0===arguments.length?this.features()[0]:1!==arguments.length||$.isKindOf(arguments[0],Array)||$.isKindOf(arguments[0],String)?this.features.apply(this,arguments):this.features.apply(this,arguments)[0]},features:function(){var e=null,t=null,r=null;if(arguments.length>0&&!$.isKindOf(arguments[0],Array)&&!$.isKindOf(arguments[0],String)){var n=arguments[0];e=n.name,e||(e=\"class\"),t=n.target,t||(t=\"attribute\"),r=n.values,r=$.isNull(r)?null:$.isKindOf(r,String)?r.split(/\\s+/):Array.prototype.slice.call(r,0),arguments.length>1&&(r||(r=[]),Array.prototype.slice.call(arguments,1).forEach(function(e){$.isKindOf(e,Array)||(e=[e]),e.forEach(function(e){e.split(/\\s+/).forEach(function(e){r.push(e)})})}))}else e=\"className\",t=\"property\",arguments.length>0&&(r=[],Array.prototype.slice.call(arguments,0).forEach(function(e){$.isKindOf(e,Array)||(e=[e]),e.forEach(function(e){e.split(/\\s+/).forEach(function(e){r.push(e)})})}));if($.isNull(r))switch(t){case\"property\":return this.map(function(t){var r=[];return t[e]&&t[e].toString().split(/\\s+/).forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r});case\"attribute\":default:return this.map(function(t){var r=[],n=null;return n=$.isKindOf(e,Array)?t.getAttributeNS(e[0],e[1]):t.getAttribute(e),n&&n.split(/\\s+/).forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r})}else{var a=[];switch(r.forEach(function(e){-1===a.indexOf(e)&&a.push(e)}),a=a.sort($.insensitiveNaturalComparator).join(\" \"),t){case\"property\":return this.forEach(function(t){t[e]=a});case\"attribute\":default:return this.forEach(function(t){$.isKindOf(e,Array)?t.setAttributeNS(e[0],e[1],a):t.setAttribute(e,a)})}}},addFeatures:function(){var e=null,t=null,r=null;if(arguments.length>0&&!$.isKindOf(arguments[0],Array)&&!$.isKindOf(arguments[0],String)){var n=arguments[0];e=n.name,e||(e=\"class\"),t=n.target,t||(t=\"attribute\"),r=n.values,r=$.isNull(r)?null:$.isKindOf(r,String)?r.split(/\\s+/):Array.prototype.slice.call(r,0),arguments.length>1&&(r||(r=[]),Array.prototype.slice.call(arguments,1).forEach(function(e){$.isKindOf(e,Array)||(e=[e]),e.forEach(function(e){e.split(/\\s+/).forEach(function(e){r.push(e)})})}))}else e=\"className\",t=\"property\",arguments.length>0&&(r=[],Array.prototype.slice.call(arguments,0).forEach(function(e){$.isKindOf(e,Array)||(e=[e]),e.forEach(function(e){e.split(/\\s+/).forEach(function(e){r.push(e)})})}));var a=[];return $.isNull(r)||r.forEach(function(e){-1===a.indexOf(e)&&a.push(e)}),this.forEach(function(r){var n=null;switch(t){case\"property\":n=r[e];break;case\"attribute\":default:n=$.isKindOf(e,Array)?r.getAttributeNS(e[0],e[1]):r.getAttribute(e)}n=n?n.split(/\\s+/):[];var i=a.slice(0);switch(n.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),i=i.sort($.insensitiveNaturalComparator).join(\" \"),t){case\"property\":r[e]=i;break;case\"attribute\":default:$.isKindOf(e,Array)?r.setAttributeNS(e[0],e[1],i):r.setAttribute(e,i)}})},removeFeatures:function(){var e=null,t=null,r=null;if(arguments.length>0&&!$.isKindOf(arguments[0],Array)&&!$.isKindOf(arguments[0],String)){var n=arguments[0];e=n.name,e||(e=\"class\"),t=n.target,t||(t=\"attribute\"),r=n.values,r=$.isNull(r)?null:$.isKindOf(r,String)?r.split(/\\s+/):Array.prototype.slice.call(r,0),arguments.length>1&&(r||(r=[]),Array.prototype.slice.call(arguments,1).forEach(function(e){$.isKindOf(e,Array)||(e=[e]),e.forEach(function(e){e.split(/\\s+/).forEach(function(e){r.push(e)})})}))}else e=\"className\",t=\"property\",arguments.length>0&&(r=[],Array.prototype.slice.call(arguments,0).forEach(function(e){$.isKindOf(e,Array)||(e=[e]),e.forEach(function(e){e.split(/\\s+/).forEach(function(e){r.push(e)})})}));var a=[];return $.isNull(r)||r.forEach(function(e){-1===a.indexOf(e)&&a.push(e)}),this.forEach(function(r){var n=null;switch(t){case\"property\":n=r[e];break;case\"attribute\":default:n=$.isKindOf(e,Array)?r.getAttributeNS(e[0],e[1]):r.getAttribute(e)}n=n?n.split(/\\s+/):[];var i=[];switch(n.forEach(function(e){-1===a.indexOf(e)&&-1===i.indexOf(e)&&i.push(e)}),i=i.sort($.insensitiveNaturalComparator).join(\" \"),t){case\"property\":r[e]=i;break;case\"attribute\":default:$.isKindOf(e,Array)?r.setAttributeNS(e[0],e[1],i):r.setAttribute(e,i)}})},attribute:function(){return 0===arguments.length||1===arguments.length&&($.isKindOf(arguments[0],String)||$.isKindOf(arguments[0],Array))?this.attributes.apply(this,arguments)[0]:this.attributes.apply(this,arguments)},attributes:function(){if(0===arguments.length||1===arguments.length&&($.isKindOf(arguments[0],String)||$.isKindOf(arguments[0],Array))){var e=null;return 1===arguments.length&&(e=arguments[0]),this.map(function(e){for(var t=[],r=0;r<e.attributes.length;){var n=e.attributes[r];t.push({prefix:n.prefix,localName:n.localName,namespaceURI:n.namespaceURI,value:n.value}),++r}return t}).map(function(t){return null!==e?$.isKindOf(e,Array)?t.filter(function(t){return $.isEqual(t.namespaceURI,e[0])&&$.isEqual(t.localName,e[1])}).map(function(e){return e.value})[0]:t.filter(function(t){return $.isEqual(t.localName,e)}).map(function(e){return e.value})[0]:t})}var t={},r={};if(2===arguments.length)if($.isKindOf(arguments[0],String))t[arguments[0]]=arguments[1];else if($.isKindOf(arguments[0],Array)){t[arguments[0][1]]=arguments[1];var n=arguments[0][1].split(\":\");n=n.length>1?n[0]:\"\",r[n]=arguments[0][0]}else t=arguments[0],r=arguments[1];else t=arguments[0];return this.forEach(function(e){for(var n in t){var a=null,i=null,s=n.split(\":\");s.length>1?(a=s[0],i=s.slice(1).join(\":\")):(a=\"\",i=s[0]);var u=r[a];u?$.isNull(t[n])?e.removeAttributeNS(u,n):e.setAttributeNS(u,n,t[n]):$.isNull(t[n])?e.removeAttribute(i,t[n]):e.setAttribute(i,t[n])}})},style:function(){return 0===arguments.length||1===arguments.length&&$.isKindOf(arguments[0],String)?this.styles.apply(this,arguments)[0]:this.styles.apply(this,arguments)},styles:function(){if(0===arguments.length||1===arguments.length&&$.isKindOf(arguments[0],String)){var e=null;return 1===arguments.length&&(e=arguments[0]),this.map(function(e){for(var t=window.getComputedStyle(e),r={},n=0;n<t.length;){var a=t[n];\"-\"===a[0]&&(a=a.split(\"-\").slice(2).join(\"-\")),r[a]=t[t[n]],++n}return r}).map(function(t){return null!==e?t[e]:t})}var t={};return 2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],this.forEach(function(e){for(var r in t)e.style[$.actualStyleName(r)]=t[r]})},ancestors:function(e,t,r){return $.isKindOf(t,String)&&(t=function(e){return function(t){return t.parentElement?-1!==Array.prototype.slice.call(t.parentElement.querySelectorAll(e),0).indexOf(t):!0}}(t)),this.map(function(n){for(var a=[];n;)a.push(n),n=n.parentElement;a.shift();var i=!1;return a=a.filter(function(r){return i?!1:t&&t(r)?void(i=!0):e?r.parentElement?-1!==Array.prototype.slice.call(r.parentElement.querySelectorAll(e),0).indexOf(r):!1:!0}),r?a:a[0]}).lifted.valueSet},parents:function(e){return this.map(function(e){return e.parentElement}).valueSet.filter(e)},children:function(e){return this.map(function(e){return e.childNodes}).lifted.filter(e)},filter:function(e){return $.isKindOf(e,String)&&(e=function(e){return function(t){var r=[];return t.parentElement&&(r=Array.prototype.slice.call(t.parentElement.querySelectorAll(e),0)),-1!==r.indexOf(t)}}(e)),arguments.callee[\"super\"].call(this,[e])},query:function(e){return this.map(function(t){return t.querySelectorAll(e)}).lifted.valueSet},prepend:function(){return $.query(arguments).lifted.operateOn(this,function(e,t){e.length>0&&e[0].insertBefore(t,e[0].firstChild)})},append:function(){return $.query(arguments).lifted.operateOn(this,function(e,t){e.length>0&&e[0].appendChild(t)})},insert:function(e,t){return $.isKindOf(t,Query)&&(t=t[0]),$.query(e).operateOn(this,function(e,r){if(e.length>0){var n=t;if($.isKindOf(n,Number))++t;else{var a=$.query(e[0].childNodes).find(n);n=a.length>0?a[0]:e[0].childNodes.length}n===e[0].childNodes.length?e[0].appendChild(r):e[0].insertBefore(r,e[0].childNodes[n])}})},detach:function(){return this.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)})},fire:function(e){return this.forEach(function(t){t.dispatchEvent(e)})},upgradeEventListener:function(e,t){return s.hasOwnProperty(e)||(s[e]=[]),s[e].push(t),this},on:function(e,r){return this.forEach(function(n){e.split(/\\s+/).forEach(function(e){var a=e.split(\".\").slice(-1)[0],i=function(e){r.apply(this,arguments)};i.listener=r,s.hasOwnProperty(a)&&s[a].forEach(function(t){i=t(e,i)}),n.addEventListener(a,i);var u=t(n);u.hasOwnProperty(a)||(u[a]=[]),u[a].push({domain:e,eventName:a,listener:i})})})},off:function(e){var n=r(e);return this.forEach(function(e){var r=t(e);Object.keys(r).forEach(function(t){r[t]instanceof Array&&r[t].forEach(function(t){n.test(t.domain)&&e.removeEventListener(t.eventName,t.listener)})})})},snapshots:function(e){return this.map(function(t){return t.cloneNode(e)})},text:function(e){return 0===arguments.length?this.map(function(e){return e.textContent}):this.forEach(function(t){t.textContent=e})},html:function(e){return 0===arguments.length?$.serialize(\"html\",this):this.forEach(function(t){for(;t.firstChild;)t.removeChild(t.firstChild);$.parse(\"html\",e).forEach(function(e){t.appendChild(e)})})},namespaces:function(){var e={};return this.forEach(function(t){for(;t&&t.attributes;)\"http://www.w3.org/1999/xhtml\"===t.namespaceURI&&Array.prototype.forEach.call(t.attributes,function(t){if(\"xmlns\"!==t.localName||t.namespaceURI){if(\"xmlns:\"===t.localName.substring(0,6)){var r=t.localName.substring(6);e[r]||(e[r]=t.value)}}else e[\"\"]||(e[\"\"]=t.value)}),t=t.parentElement}),e},xml:function(e){return 0===arguments.length?$.serialize(\"xml\",this):void this.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild);return[].slice.call($.parse(\"xml\",\"<xml>\"+code+\"</xml>\").documentElement.childNodes,0).forEach(function(e){node.appendChild(e)}),this})}}}),$.parse.parsers.html=function(e,t,r){var n=document.createElement(\"div\");return n.innerHTML=$.query(t).array.join(\"\"),$.create(\"dom\",n.childNodes)},$.serialize.serializers.html=function(e,t,r){var n=$.query(t).map(function(e){return e.innerHTML}).array.join(\"\");return n};var u=function(e,t){for(var r=[],n=0;n<e.length;){var a=e[n],i=null;if(a.nodeType===Node.ELEMENT_NODE){i=a.namespaceURI?document.createElementNS(a.namespaceURI,a.nodeName):document.createElement(a.localName);for(var s=0;s<a.attributes.length;){var l=a.attributes[s];l.namespaceURI?i.setAttributeNS(l.namespaceURI,l.nodeName,l.value):i.setAttribute(l.localName,l.value),++s}u(a.childNodes,t).forEach(function(e){i.appendChild(e)})}else i=document.importNode(a,!0);r.push(i),++n}return r};$.parse.parsers.xml=function(e,t,r){$.isNull(r)?r={defaultNamespaceHTML:!0}:$.isKindOf(r,Boolean)&&(r={defaultNamespaceHTML:r}),t=-1!==t.indexOf(\"?>\")?t.replace(\"?>\",\"?><xml>\")+\"</xml>\":\"<xml>\"+t+\"</xml>\";var n=(new DOMParser).parseFromString(t,\"text/xml\"),a=$.create(\"dom\");if(r.defaultNamespaceHTML)u(n.documentElement.childNodes).forEach(function(e){a.push(e)});else for(var i=0;i<n.documentElement.childNodes.length;)a.push(n.documentElement.childNodes[i]),++i;return a},$.serialize.serializers.xml=function(e,t,r){var a=new n,i=$.create(\"dom\",t),s=i.namespaces();return i.map(function(e){return $.parse(\"xml\",\"<xml \"+Object.keys(s).map(function(e){return e?\"xmlns:\"+e+'=\"'+$.escapeXML(s[e])+'\"':'xmlns=\"'+$.escapeXML(s[e])+'\"'}).join(\" \")+\">\"+$.replaceHTMLEntityForXML(Array.prototype.map.call(e.childNodes,function(e){return a.serializeToString(e)}).join(\"\"))+\"</xml>\").children().map(function(e){return a.serializeToString(e)}).array.join(\"\")}).array.join(\"\")}});"}},"/library/lab.dom/interpolation.js":{"url":"/library/lab.dom/interpolation.js","content":{"encoding":"text","data":"$(function(){var t=function(t,n,r,u){var e=function(e){var o=0,i=0,a=0,c=0,f=0,s=0,h=function(t){return((o*t+i)*t+a)*t},M=function(t){return((c*t+f)*t+s)*t},p=function(t){return(3*o*t+2*i)*t+a},w=function(t){return 1/(200*t)},b=function(t,n){return M(d(t,n))},d=function(t,n){for(var r,u,e=t,o=0;8>o;){if(r=h(e)-t,Math.abs(r)<n)return e;if(u=p(e),Math.abs(u)<1e-6)break;e-=r/u,++o}var i=0,a=1;if(e=t,i>e)return i;if(e>a)return a;for(;a>i;){if(r=h(e),Math.abs(r-t)<n)return e;t>r?i=e:a=e,e=.5*(a-i)+i}return e};return a=3*t,i=3*(r-t)-a,o=1-a-i,s=3*n,f=3*(u-n)-s,c=1-s-f,b(e,w(duration))};return e.cssFunction=\"cubic-bezier(\"+[t,n,r,u].join(\", \")+\")\",e},n=function(t,n){var r=function(r){return\"start\"===n?Math.ceil(r*t)/t:\"end\"===type?Math.floor(r*t)/t:void 0};return r.cssFunction=\"steps(\"+t+\", \"+n+\")\",r},r={quad:function(t){return Math.pow(t,2)},cubic:function(t){return Math.pow(t,3)},quart:function(t){return Math.pow(t,4)},quint:function(t){return Math.pow(t,5)},expo:function(t){return Math.pow(t,6)},sine:function(t){return 1-Math.cos(t*Math.PI/2)},circ:function(t){return 1-Math.sqrt(1-t*t)},elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},back:function(t){return t*t*(3*t-2)},bounce:function(t){var n=0,r=4;do--r,n=Math.pow(2,r);while((n-1)/11>t);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*n-2)/22-t,2)}},u={};u.linear=function(t){return t},u.swing=function(t){return.5-Math.cos(t*Math.PI)/2},u[\"default\"]=t(.25,.1,.25,1),u[\"ease-in\"]=t(.42,0,1,1),u[\"ease-out\"]=t(0,0,.58,1),u[\"ease-in-out\"]=t(.42,0,.58,1),u[\"step-start\"]=n(1,\"start\"),u[\"step-end\"]=n(1,\"end\"),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].forEach(function(t){u[\"step-\"+t+\"-start\"]=n(t,\"start\"),u[\"step-\"+t+\"-end\"]=n(t,\"end\")}),Object.keys(r).forEach(function(t){u[\"ease-in-\"+t]=r[t],u[\"ease-out-\"+t]=function(n){return 1-r[t](1-n)},u[\"ease-in-out-\"+t]=function(n){return.5>n?r[t](2*n)/2:1-r[t](-2*n+2)/2}}),$.interpolations=u});"}},"/library/lab.dom/position.js":{"url":"/library/lab.dom/position.js","content":{"encoding":"text","data":"$(function(){\"use strict\";function t(t,e,n){this.x=t,this.y=e,this.z=n}function e(t){var e=null;if(\"string\"==typeof t){var n=t.match(/matrix3?d?\\(([^\\)]+)\\)/i)[1].split(\",\");6===n.length&&(n=[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]),e=[];for(var r=-1;++r<4;)for(var i=-1;++i<4;)e[4*r+i]=parseFloat(n[4*i+r])}else e=t;this.data=e}function n(n){if(n.jqueryPositionMatrix&&(new Date).getTime()-n.jqueryPositionMatrix.time.getTime()<20)return n.jqueryPositionMatrix.matrix;for(var r=new e(\"matrix(1,0,0,1,0,0)\"),i=r,a=n,l=null,s=o(a.ownerDocument);null!==a&&a!==a.ownerDocument.documentElement;){var f=window.getComputedStyle(a,null);if(f){var u=new e((f.OTransform||f.WebkitTransform||f.msTransform||f.MozTransform||\"none\").replace(/^none$/,\"matrix(1,0,0,1,0,0)\"));if(s){l=a.getBoundingClientRect();var m=null!==a.parentNode&&a.parentNode.getBoundingClientRect?a.parentNode.getBoundingClientRect():l,d=r.translate(l.left-m.left,l.top-m.top,0),p=f.OTransformOrigin||f.WebkitTransformOrigin||f.msTransformOrigin||f.MozTransformOrigin||\"\";p=-1!==p.indexOf(\"%\")?\"\":p,p=new e(\"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,\"+((p||\"0 0\")+\" 0\").split(\" \").slice(0,3)+\",1)\");var y=p.inverse();i=d.multiply(p).multiply(u).multiply(y).multiply(i)}else i=u.multiply(i)}a=a.parentNode}if(!s){for(var g=n.offsetWidth,v=n.offsetHeight,x=4,c=+(1/0),w=+(1/0);--x>=0;){var h=i.transformPoint(new t(0===x||1===x?0:g,0===x||3===x?0:v,0));h.x<c&&(c=h.x),h.y<w&&(w=h.y)}l=n.getBoundingClientRect(),i=r.translate(window.pageXOffset+l.left-c,window.pageYOffset+l.top-w,0).multiply(i)}return n.jqueryPositionMatrix={time:new Date,matrix:i},i}e.prototype={multiply:function(t){for(var n=this.data,r=t.data,i=[],o=-1;++o<4;)for(var a=-1;++a<4;){for(var l=0,s=-1;++s<4;)l+=n[4*o+s]*r[4*s+a];i[4*o+a]=l}return new e(i)},translate:function(t,n,r){var i=new e([1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1]);return this.multiply(i)},inverse:function(){var t=this.data,n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],l=t[6],s=t[8],f=t[9],u=t[10],m=a*u-l*f,d=l*s-o*u,p=o*f-a*s,y=i*f-r*u,g=n*u-i*s,v=r*s-n*f,x=r*l-i*a,c=i*o-n*l,w=n*a-r*o,h=n*m+r*d+i*p,T=new e([m/h,y/h,x/h,0,d/h,g/h,c/h,0,p/h,v/h,w/h,0,0,0,0,1]),C=new e([1,0,0,-t[3],0,1,0,-t[7],0,0,1,-t[11],0,0,0,1]);return T.multiply(C)},transformPoint:function(e){var n=this.data;return new t(n[0]*e.x+n[1]*e.y+n[2]*e.z+n[3],n[4]*e.x+n[5]*e.y+n[6]*e.z+n[7],n[8]*e.x+n[9]*e.y+n[10]*e.z+n[11])}};var r=!1,i=!1,o=function(t){if(i)return r;i=!0;var e=t.createElement(\"div\");e.style.cssText=\"width:200px;height:200px;position:fixed;-moz-transform:scale(2);\",t.body.appendChild(e);var n=e.getBoundingClientRect();return r=!!(getComputedStyle(e,null).MozTransform&&n.bottom-n.top<300),e.parentNode.removeChild(e),r};$.fn.extend({positionToPage:function(e,r){if(!r){var i=window.getComputedStyle(this[0],null);e={x:e.x+parseFloat(i.borderLeftWidth),y:e.y+parseFloat(i.borderTopWidth)}}return n(this[0]).transformPoint(new t(e.x,e.y,0))},positionFromPage:function(e,r){var i=n(this[0]).inverse().transformPoint(new t(e.x,e.y,0));if(r)return i;var o=window.getComputedStyle(this[0],null);return{x:i.x-parseFloat(o.borderLeftWidth),y:i.y-parseFloat(o.borderTopWidth)}}})});"}},"/library/lab.dom/reinit.js":{"url":"/library/lab.dom/reinit.js","content":{"encoding":"text","data":"$(function(){$.reinit=function(n){n=$(n),Object.keys($.reinit.handlers).forEach(function(i){$.reinit.handlers[i](n)})},$.reinit.handlers={},$.delay(-1,function(){$.reinit($(document.body))})});"}},"/library/lab.dom/storyboard.animation.js":{"url":"/library/lab.dom/storyboard.animation.js","content":{"encoding":"text","data":"$.storyboard.animations.bubble=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scale:.001}).transition({opacity:1,translate:[0,0],scale:1,delay:.3*t},.35*t,function(){o&&o()})})},$.storyboard.animations.stamp=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scale:2}).transition({opacity:1,translate:[0,0],scale:1,delay:.2*t},.4*t,function(){o&&o()})})},$.storyboard.animations.compress=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scaleY:.001}).transition({opacity:1,translate:[0,0],scaleY:1,delay:.2*t},.4*t,function(){o&&o()})})},$.storyboard.animations.narrow=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scaleX:.001}).transition({opacity:1,translate:[0,0],scaleX:1,delay:.2*t},.4*t,function(){o&&o()})})},$.storyboard.animations.expand=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scaleY:2}).transition({opacity:1,translate:[0,0],scaleY:1,delay:.2*t},.4*t,function(){o&&o()})})},$.storyboard.animations.fat=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scaleX:2}).transition({opacity:1,translate:[0,0],scaleX:1,delay:.2*t},.4*t,function(){o&&o()})})},$.storyboard.animations.lianyi=function(t,a,n,i,o,s){n.transition({opacity:1,translate:[0,0]},0,function(){a(),i.css({opacity:0,scaleX:1e-4,scaleY:1e-4}).transition({opacity:1,translate:[0,0],scaleX:1,scaleY:1,delay:.2*t,\"-webkit-transition-timing-function\":\"ease-in\"},.4*t,function(){o&&o()})})},$.storyboard.animations.slidedown=function(t,a,n,i,o,s){a(),i.css({zIndex:1e4}),i.css({opacity:1,translate:[0,-$(window).height()]}).transition({translate:[0,0],opacity:1,delay:.2*t},.8*t,function(){i.css({zIndex:0}),n.css({zIndex:0}),o&&o(),n.transition({opacity:0,translate:[0,200]},.4*t,function(){})})};"}},"/library/lab.dom/storyboard.js":{"url":"/library/lab.dom/storyboard.js","content":{"encoding":"text","data":"\"use strict\";var WAITING=\"waiting\",SWITCHING=\"switching\",PAGE_DELEGATES=[\"willEnterForestage\",\"didEnterForestage\",\"loadData\",\"willLeaveForestage\",\"didLeaveForestage\",\"initPage\",\"destroyPage\"],manager={queue:{},switchQueue:{},initQueue:$.async()},logger=new $.Logger({logLevel:\"error\"}),storyboardSwitchNow=function(e,t,a,o,n){var r,i,s=o.step,l=o.settings,c=o.backward,d=[],u={animated:!1,defaultAnimationDuration:200,defaultAnimation:\"fading\",parser:\"text/html\",functors:{},prependNamespaces:{sb:\"http://project.spiritate.org/storyboard\",tmpl:\"http://project.spiritate.org/template\",storyboard:\"http://project.spiritate.org/storyboard\",template:\"http://project.spiritate.org/template\",templatex:\"http://project.spiritate.org/templatex\",tmplx:\"http://project.spiritate.org/templatex\",x:\"http://project.spiritate.org/templatex\",t:\"http://project.spiritate.org/template\"}};e.channels[l.options.channel]||(e.channels[l.options.channel]={stack:[],startPageID:null});var p=e.channels[l.options.channel];return t.then(function(){logger.debug(\"get fucking page from current stack\");var t,o=this;switch(l.options.action){case\"replace\":break;case\"backward\":if(p.stack.length>=2)r=p.stack[p.stack.length-2];else{if(1!=p.stack.length)return logger.error(\"No page could be go backward\"),t=new Error(\"No page could be go backward\"),logger.error(t),a(t),o.reject(t),void s.reject(t);r=p.stack[0]}break;case\"channel\":if(l.options.channel===e.channel)r=e.currentPage;else{if(!(p.stack.length>0))return t=new Error(\"chanel switched to an empty channel\"),logger.error(t),a(t),s.reject(t),void o.reject(t);r=p.stack[p.stack.length-1]}break;case\"reset\":}if(r)i=r.spec;else{if(!l.pageID)return logger.error(\"Page not found\"),t=new Error(\"Page not found\"),logger.error(t),a(t),o.reject(t),void s.reject(t);i=e.options.pageSpecs[l.pageID],r={storyboard:e,uuid:l.options.channel+\"-\"+e.channels[l.options.channel].stack.length+\"-\"+$.createUUID(),id:l.pageID,spec:e.options.pageSpecs[l.pageID],data:l.data||{},pool:{},step:$.async(),$:function(e){return $(e,r.dom)},update:function(o){return $.async(function(){var n=this;if(o||(o={}),r.data.settings.update=o,Object.keys(o).forEach(function(e){r.data[e]=o[e]}),r.spec.module.exports.willUpdate)try{r.spec.module.exports.willUpdate.call(r.data,r)}catch(i){logger.error(i)}storyboardExecuteDelegate(e,\"willUpdatePage\",r,r.data);try{r.template.fill(r.data,function(){if(r.spec.module.exports.didUpdate)try{r.spec.module.exports.didUpdate.call(r.data,r)}catch(t){logger.error(t)}storyboardExecuteDelegate(e,\"didUpdatePage\",r,r.data),n.next(r.data)})}catch(i){return logger.error(i),a(i),n.reject(t),void s.reject(t)}})}}}o.next()}).then(function(){switch(logger.debug(\"get fucking page content from cache or load resource from bundle : \"+r.uuid),l.options.action){case\"replace\":l.options.animation=l.options.animation?l.options.animation:i.animationForward;break;case\"backward\":l.options.animation=l.options.animation?l.options.animation:i.animationBackward;break;case\"channel\":l.options.animation=l.options.animation?l.options.animation:i.animationReset;break;case\"reset\":l.options.animation=l.options.animation?l.options.animation:i.animationReset;break;default:l.options.animation=l.options.animation?l.options.animation:i.animationForward}l.options.animationDuration=i.animationDuration;var t=i.cache,o=this,n={template:null,style:null,data:null,script:null,lang:null};t&&[\"template\",\"style\",\"data\",\"script\",\"lang\"].forEach(function(e){t[e]&&(n[e]=t[e])});var c=[];[\"template\",\"style\",\"data\",\"script\",\"lang\"].forEach(function(e){i[e+\"Path\"]&&\"none\"!==i[e+\"Path\"]&&!n[e]&&c.push({type:e,path:i[e+\"Path\"]})}),storyboardExecuteDelegate(e,\"willPageResourceLoad\",r,c),c.length?$.async.all(c,function(e){var t=this;$.loadResources(e.path,function(a,o){if(a)throw new Error(\"resource not found\");i.cache[e.type]=o[e.path],n[e.type]=o[e.path],t.next()})}).then(function(){e.options.cachePage&&window.localStorage&&window.localStorage.setItem(e.id+\"-page-\"+l.pageID+\"-cache\",JSON.stringify(n)),o.next(n,c.length)}).rejected(function(e){logger.error(e),a(e),s.reject(e),o.reject(e)}):o.next(n,c.length)}).then(function(t,a){if(logger.debug(\"load stylesheet and module from page content : \"+r.uuid),storyboardExecuteDelegate(e,\"didPageResourceLoad\",r,t),!i.styleSheetLoaded&&t.style){i.styleSheetLoaded=!0;var o=$(\"<style>\").html(t.style+\"\\n/*# sourceURL=\"+i.stylePath+\"*/\");$(e.dom).append(o),e.options.autoprefixStyles&&styleSheetAutoPrefixConvertor(e,i,o),i.styleSource=t.style}if(i.templateSource||(t.template?i.templateSource=t.template:i.templateSource=\"\"),!i.moduleLoaded){if(i.moduleLoaded=!0,t.script){var n={};window.eval(\"(function () { return function (module) {\"+t.script+\"}; })() //@ sourceURL=\"+i.scriptPath)(n),n.exports?i.module=$.advancedMerge({},e.commonModule,i.module,n):i.module=$.advancedMerge({},e.commonModule,i.module)}else i.module={exports:{}};if(t.lang)if($.isKindOf(t.lang,String))try{i.lang=$.advancedMerge({},e.commonModule.lang,JSON.parse(t.lang))}catch(s){i.lang={}}else i.lang=$.advancedMerge({},e.commonModule.lang,t.lang);else i.lang={};if(t.data)if($.isKindOf(t.data,String))try{i.module=$.advancedMerge({},e.commonModule,i.module,{data:JSON.parse(t.data)})}catch(s){i.module={}}else i.module=$.advancedMerge({},e.commonModule,i.module,{data:t.data})}Object.keys(e.commonModule.exports).forEach(function(t){u.functors[t]=function(a,o,n,r){return e.commonModule.exports[t].apply(n,Array.prototype.slice.call(arguments,4))}}),Object.keys(i.module.exports).forEach(function(e){u.functors[e]=function(t,a,o,n){return i.module.exports[e].apply(o,Array.prototype.slice.call(arguments,4))}}),this.next()}).then(function(){logger.debug(\"bind page function to page itself\"),r.template||(Object.keys(i.module.exports).forEach(function(e){PAGE_DELEGATES.indexOf(e)<0&&!r[e]&&(r[e]=function(){return i.module.exports[e].apply(this.data,arguments)}.bind(r))}),Object.keys(e.commonModule.exports).forEach(function(t){PAGE_DELEGATES.indexOf(t)<0&&!r[t]&&(r[t]=function(){return e.commonModule.exports[t].apply(this.data,arguments)}.bind(r))})),this.next()}).then(function(){logger.debug(\"fucking load data is the sin of everything : \"+r.id+\"@\"+r.uuid);var t=$.advancedMerge({storyboard:{\"!operation\":\"assign\"},page:{\"!operation\":\"assign\"},settings:{\"!operation\":\"assign\"},functors:{\"!operation\":\"assign\"}},r.spec.module.data,r.data,l.data),o=i.module.exports.loadData,n=0,c=this;$.isKindOf(o,Function)?(storyboardExecuteDelegate(e,\"willPageLoadData\",r,t),o.call({storyboard:e,settings:l,page:r},t,function(t,o){if(n+=1,storyboardExecuteDelegate(e,\"pageLoadDataCallbacked\",r,t,{callbacked:o,settings:l.data},n),1!=n)throw logger.error(\"Multiple callback for load data is invoked\"),new Error(\"Multiple callback for load data is invoked\");t?(logger.error(t),a(t),s.reject(t),c.reject(t)):(r.data=$.advancedMerge({storyboard:{\"!operation\":\"assign\"},page:{\"!operation\":\"assign\"},settings:{\"!operation\":\"assign\"},functors:{\"!operation\":\"assign\"}},r.data,o),storyboardExecuteDelegate(e,\"didPageLoadData\",r,r.data),c.next())})):(r.data=t,storyboardExecuteDelegate(e,\"didPageLoadData\",r,t),c.next())}).then(function(){logger.debug(\"backward is the second sin of everything : \"+r.uuid);var t=this;\"backward\"==l.options.action?(storyboardExecuteDelegate(e,\"willPageBackwardDataDecorated\",r,r.data),c(r.data).then(function(a){r.data!==a&&(r.data=$.advancedMerge({storyboard:{\"!operation\":\"assign\"},page:{\"!operation\":\"assign\"},settings:{\"!operation\":\"assign\"},functors:{\"!operation\":\"assign\"}},r.data,a)),storyboardExecuteDelegate(e,\"didPageBackwardDataDecorated\",r,r.data),t.next()}).rejected(function(e){logger.error(e),s.reject(e),t.reject(e),a(e)})):t.next()}).then(function(){logger.debug(\"you should fuck yourself with the god-like template system : \"+r.uuid);var t=this;r.dom||(r.dom=$(\"<div></div>\").attr(\"id\",r.id).addClass(\"storyboard-page\").addClass(\"storyboard-active\")),r.data=$.advancedMerge({storyboard:{\"!operation\":\"assign\"},page:{\"!operation\":\"assign\"},settings:{\"!operation\":\"assign\"},functors:{\"!operation\":\"assign\"}},{storyboard:e,settings:l,page:r,functors:u.functors},e.commonModule.data,i.module.data,r.data),Object.keys(i.data).forEach(function(e){r.data.hasOwnProperty(e)||(r.data[e]=$.template.execute(i.data[e],r.data,u))});var o=!1,n=function(){o?logger.debug(\"template render twice\"):(logger.debug(\"template callbacked\"),o=!0,\"backward\"!==l.options.action&&(i.module.exports&&i.module.exports.initPage&&i.module.exports.initPage.call(r.data,r),storyboardExecuteDelegate(e,\"initPage\",r)),t.next())};try{r.template?r.template.fill(r.data,n):(r.template=$.template(i.templateSource,r.data,u),r.template.render(r.dom,n))}catch(c){logger.error(c),a(c),t.reject(c),s.reject(c)}}).then(function(){switch(logger.debug(\"correct chennel stack data : \"+r.uuid),l.options.action){case\"replace\":d.push(p.stack.pop());break;case\"backward\":d.push(p.stack.pop()),p.stack.pop();break;case\"reset\":d.concat(p.stack),p.stack.length=0}e.channel=l.options.channel,p.stack.push(r),this.next()}).then(function(){logger.debug(\"start animation[\"+l.options.animation+\"]  : \"+r.uuid+\" ? \"+n+\" , duration : \"+l.options.duration);var t=this;if(e.nextPage=r,n){storyboardExecuteDelegate(e,\"beforePageSwitchAnimation\",r);var a=e.currentPage;if(a==r)return void t.next();if($(e.dom).append(r.dom),r.spec.module.exports.willEnterForestage)try{r.spec.module.exports.willEnterForestage.call(r.data,r)}catch(o){logger.error(o)}if(storyboardExecuteDelegate(e,\"willPageEnterForestage\",r,r.data),a||l.options.forceAnimation){if(a){if(r.spec.module.exports.willLeaveForestage)try{r.spec.module.exports.willLeaveForestage.call(a.data,a)}catch(o){logger.error(o)}storyboardExecuteDelegate(e,\"willPageLeaveForestage\",a,a.data)}var i=$.storyboard.animations[l.options.animation];if(i||(logger.warn(\"animation not found, using fading as default animation\"),i=$.storyboard.animations.fading),!i)return logger.error(new Error(\"No animation\")),t.reject(new Error(\"No animation found for storyboard\"));a&&($(a.dom).css(\"position\",\"absolute\"),$(a.dom).addClass(\"storyboard-animation\"),$(a.dom).addClass(\"prev\")),$(r.dom).addClass(\"storyboard-animation\"),$(r.dom).addClass(\"next\"),i(l.options.duration,function(){if(a){if(a.spec.module.exports.didLeaveForestage)try{a.spec.module.exports.didLeaveForestage.call(a.data,a)}catch(t){logger.error(t)}storyboardExecuteDelegate(e,\"didPageLeaveForestage\",a,a.data),$(a.dom).css(\"position\",\"relative\"),$(a.dom).removeClass(\"storyboard-active\"),$(a.dom).removeClass(\"storyboard-animation\"),$(a.dom).removeClass(\"prev\"),$(a.dom).detach()}},a?$(a.dom):$(),$(r.dom),function(){if(r.spec.module.exports.didEnterForestage)try{r.spec.module.exports.didEnterForestage.call(r.data,r)}catch(a){logger.error(a)}storyboardExecuteDelegate(e,\"didPageEnterForestage\",r,r.data),$(r.dom).addClass(\"storyboard-active\"),$(r.dom).removeClass(\"storyboard-animation\"),$(r.dom).removeClass(\"next\"),d.forEach(function(t){if(t.spec.module.exports.destroyPage)try{t.spec.module.exports.destroyPage.call(t.data,t)}catch(a){logger.error(a)}storyboardExecuteDelegate(e,\"destoryPage\",t,t.data)}),e.currentPage=r,storyboardExecuteDelegate(e,\"afterPageSwitchAnimation\",r),t.next()})}else{if(r.spec.module.exports.didEnterForestage)try{r.spec.module.exports.didEnterForestage.call(r.data,r)}catch(o){logger.error(o)}storyboardExecuteDelegate(e,\"didPageEnterForestage\",r,r.data),e.currentPage=r,$(r.dom).addClass(\"storyboard-active\"),t.next()}}else t.next()}).then(function(){logger.debug(\"oh i have successfully fuck my self  : \"+r.uuid),s.next(),this.next()})},Storyboard=function(e,t){var a=this;this.dom=e,e.id||(e.id=\"storyboard-\"+$.createUUID()),this.id=e.id,manager.queue[this.id]=$.async(),this.delegate={init:[],initPage:[],destoryPage:[],willPageEnterForestage:[],didPageEnterForestage:[],willPageBackwardDataDecorated:[],didPageBackwardDataDecorated:[],willPageResourceLoad:[],didPageResourceLoad:[],willPagePushToSwithingQueue:[],didPagePopFromSwitchingQueue:[],willPageLeaveForestage:[],didPageLeaveForestage:[],willPageLoadData:[],pageLoadDataCallbacked:[],didPageLoadData:[],beforePageSwitchAnimation:[],afterPageSwitchAnimation:[],willUpdatePage:[],didUpdatePage:[],willSwitchToPage:[],didSwitchToPage:[],willSwitchToStartPage:[],didSwitchToStartPage:[]},Object.defineProperty(this,\"switchQueue\",{value:[]}),Object.defineProperty(this,\"switchState\",{writable:!0,value:WAITING}),Object.defineProperty(this,\"options\",{value:$.advancedMerge({\"!valueType\":\"object\",\"!defaultValue\":{},startPageID:{\"!valueType\":\"string\"},startChannel:{\"!valueType\":\"string\",\"!defaultValue\":\"main\"},supportsVirtualPage:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},fixedSize:{\"!valueType\":\"boolean\",\"!defaultValue\":$(document.body).hasClass(\"ui-mobile\")||$(document.body).hasClass(\"ui-tablet\")},commonStylePath:{\"!valueType\":\"string\"},commonScriptPath:{\"!valueType\":\"string\"},commonDataPath:{\"!valueType\":\"string\"},commonLangPath:{\"!valueType\":\"string\"},defaultTemplatePath:{\"!valueType\":\"string\",\"!defaultValue\":\"/\"+this.id+\"/${page.id}/index.xhtml\"},defaultStylePath:{\"!valueType\":\"string\",\"!defaultValue\":\"/\"+this.id+\"/${page.id}/style.css\"},defaultScriptPath:{\"!valueType\":\"string\",\"!defaultValue\":\"/\"+this.id+\"/${page.id}/script.js\"},defaultDataPath:{\"!valueType\":\"string\",\"!defaultValue\":\"/\"+this.id+\"/${page.id}/data.json\"},autoprefixStyles:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},enableSourcemap:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},pageSpecs:{\"!valueType\":\"object\",\"!defaultValue\":{}},enablePlugin:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},plugins:{\"!valueType\":\"array\",\"!operation\":\"union\",\"!stringDelimiter\":[\",\",\" \"],\"!ignoreEmptyElement\":!0,\"!autotrimString\":!0,\"!arrayElement\":{\"!valueType\":\"string\"},\"!defaultValue\":[]},cachePage:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},freezeUserInteraction:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},skipSwitchAnimation:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},defaultAnimationForward:{\"!valueType\":\"string\",\"!defaultValue\":\"forward\"},defaultAnimationBackward:{\"!valueType\":\"string\",\"!defaultValue\":\"backward\"},defaultAnimationReset:{\"!valueType\":\"string\",\"!defaultValue\":\"reset\"},defaultAnimationDuration:{\"!valueType\":\"number\",\"!defaultValue\":250},defaultLang:{\"!valueType\":\"string\"},defaultLangPath:{\"!valueType\":\"string\",\"!defaultValue\":\"/\"+this.id+\"/${page.id}/${page.lang}.lang.json\"}},{startPageID:$(e).attr(\"start-page-id\"),startChannel:$(e).attr(\"start-channel\"),fixedSize:{yes:!0,no:!1,\"true\":!0,\"false\":!1}[$(e).attr(\"fixed-size\")],skipSwitchAnimation:{yes:!0,no:!1,\"true\":!0,\"false\":!1}[$(e).attr(\"skip-switch-animation\")],supportsVirtualPage:{yes:!0,no:!1,\"true\":!0,\"false\":!1}[$(e).attr(\"supports-virtual-page\")],commonLangPath:$(e).attr(\"common-lang-path\"),commonStylePath:$(e).attr(\"common-style-path\"),commonScriptPath:$(e).attr(\"common-script-path\"),commonDataPath:$(e).attr(\"common-data-path\"),defaultLang:$(e).attr(\"default-lang\"),defaultLangPath:$(e).attr(\"default-lang-path\"),defaultTemplatePath:$(e).attr(\"default-template-path\"),defaultStylePath:$(e).attr(\"default-style-path\"),defaultScriptPath:$(e).attr(\"default-script-path\"),defaultDataPath:$(e).attr(\"default-data-path\"),defaultAnimationForward:$(e).attr(\"default-animation-forward\"),defaultAnimationBackward:$(e).attr(\"default-animation-backward\"),defaultAnimationReset:$(e).attr(\"default-animation-reset\"),defaultAnimationDuration:$(e).attr(\"default-animation-duration\"),plugins:$(e).attr(\"plugins\"),autoprefixStyles:{yes:!0,no:!1,\"true\":!0,\"false\":!1}[$(e).attr(\"autoprefix-styles\")],cachePage:{yes:!0,no:!1,\"true\":!0,\"false\":!1}[$(e).attr(\"cache-page\")]})}),this.channel=this.options.startChannel,this.channels={},this.channels[this.channel]={stack:[],startPageID:this.options.startPageID},this.currentPage=null,this.options.enablePlugin&&(t=t?t:[],a.options.plugins.forEach(function(e){$.storyboard.plugins[e]&&t.indexOf($.storyboard.plugins[e])<0&&t.push($.storyboard.plugins[e])}),t.sort(function(e,t){return e.index=e.index?e.index:0,t.index=t.index?t.index:0,e.index-t.index}),t.forEach(function(e){Object.keys(a.delegate).forEach(function(t){var o=a.delegate[t];e[t]&&o.indexOf(e[t])<0&&o.push(e[t])})})),this.commonModule={data:{},exports:{switchTo:function(e,t,a){this.storyboard.switchTo(e,t,a?a:{})},update:function(e){this.page.update(e)},goBackward:function(e,t){this.storyboard.goBackward(e,t)},lang:function(e){return e=this.page.spec.lang[e]?$.template(this.page.spec.lang[e],this):$.template(e,this),e.trim()},env:function(e){switch(e){case\"viewport.left\":return document.body.scrollLeft;case\"viewport.top\":return document.body.scrollTop;case\"viewport.width\":return $(window).width();case\"viewport.height\":return $(window).height();case\"document.width\":return $(document).width();case\"document.height\":return $(document).height();case\"browser\":return $.browser();case\"browser.system\":return $.browser.system();case\"browser.layout\":return $.browser.layout();case\"browser.ui\":return $.browser.ui();case\"browser.touchable\":return $.browser.touchable();case\"browser.pixelate\":return $.browser.pixelate();case\"browser.pixelate.real\":return $.browser.pixelate(!0);case\"page.res\":var t=this.page.spec.templatePath.split(\"/\");return t.splice(t.length-1,1,\"res\",\"\"),t.join(\"/\");default:return null}}}}},storyboardExecuteDelegate=function(e,t){if(logger.debug(\"executing delegate : \"+e.id+\"@\"+t),e.delegate[t].length){var a=Array.prototype.slice.call(arguments,2);a.unshift(e),e.delegate[t].forEach(function(t){try{t.apply(e,a)}catch(o){logger.error(o)}})}},styleSheetAutoPrefixConvertor=function(e,t,a){var o=function(a){if(a instanceof CSSMediaRule||window.CSSSupportsRule&&a instanceof CSSSupportsRule||a instanceof CSSStyleSheet)a.prefixedCSSText=Array.prototype.map.call(a.cssRules,function(e){return o(e),e.prefixedCSSText?e.prefixedCSSText:e.cssText}).join(\"\\n\"),a.media&&a.media.length&&(a.prefixedCSSText=\"@media \"+a.media.mediaText+\"{\\n\"+a.prefixedCSSText+\"\\n}\");else if(a instanceof CSSStyleRule){var n=a.selectorText.split(\",\").filter(function(e){return e.trim().length>0}).map(function(a){var o=\"#\"+e.id+\".storyboard \";return t&&(o=o+\"> #\"+t.id+\".storyboard-page \"),t?/\\.storyboard\\-page(\\s|{|$)/g.test(a)?a.replace(/\\.storyboard\\-page(\\s|\\{|$)/g,function(e){return\"{\"!==e[e.length-1]?o:o+\"{\"}).trim():o+a:/\\.storyboard(\\s|\\{|$)/g.test(a)?a.replace(/\\.storyboard(\\s|\\{|$)/g,function(e){return o}).trim():o+a}).join(\",\");a.prefixedCSSText=n+a.cssText.substring(a.selectorText.length)}};Array.prototype.forEach.call(document.styleSheets,function(t){if(t.ownerNode===a[0]){o(t);var n=[];Array.prototype.forEach.call(t.cssRules,function(e){n.push(e.prefixedCSSText?e.prefixedCSSText:e.cssText)}),a.html(n.join(\"\\n\")+(e.options.enableSourcemap?\"\\n/*# sourceURL=\"+e.options.commonStylePath+\"*/\":\"\"))}})},initStoryboard=function(e){return manager.queue[e.id].then(function(){$.loadResources([e.options.commonStylePath,e.options.commonScriptPath,e.options.commonDataPath,e.options.commonLangPath].filter(function(e){return $.isKindOf(e,String)&&\"none\"!=e}),this.test)}).then(function(t){$(e.dom).hasClass(\"storyboard\")||$(e.dom).addClass(\"storyboard\"),e.options.fixedSize&&$(e.dom).addClass(\"storyboard-fixed-size\"),e.options.freezeUserInteraction&&$(e.dom).addClass(\"storyboard-freeze\"),this.next(t)}).then(function(t){if(e.options.commonScriptPath&&t[e.options.commonScriptPath]){var a=t[e.options.commonScriptPath],o={};window.eval(\"(function () { return function (module) {\"+a+\"}; })() //@ sourceURL=\"+e.options.commonScriptPath)(o),o.exports&&(e.commonModule=$.advancedMerge({},e.commonModule,o))}this.next(t)}).then(function(t){if(e.options.commonLangPath&&t[e.options.commonLangPath]){var a=t[e.options.commonDataPath],o=null;try{o=$.isKindOf(a,String)?JSON.parse(a):a}catch(n){console.warn(\"Failed to parse JSON file at \"+e.options.commonDataPath)}e.commonModule=$.advancedMerge({},e.commonModule,{lang:o})}else e.commonModule=$.advancedMerge({},e.commonModule,{lang:{}});this.next(t)}).then(function(t){e.commonData={},Array.prototype.forEach.call(e.dom.attributes,function(t){var a=t.localName;0===a.indexOf(\"data-\")&&(e.commonData[a.substring(\"data-\".length)]=t.value)}),this.next(t)}).then(function(t){if(e.options.commonDataPath&&t[e.options.commonDataPath]){var a=t[e.options.commonDataPath],o=null;try{o=$.isKindOf(a,String)?JSON.parse(a):a}catch(n){console.warn(\"Failed to parse JSON file at \"+e.options.commonDataPath)}e.commonModule=$.advancedMerge({},e.commonModule,{data:o})}this.next(t)}).then(function(t){if(e.options.commonStylePath&&t[e.options.commonStylePath]){var a=t[e.options.commonStylePath],o=$(\"<style>\").html(a+\"\\n/*# sourceURL=\"+e.options.commonStylePath+\"*/\");$(e.dom).append(o),e.options.autoprefixStyles&&styleSheetAutoPrefixConvertor(e,null,o)}this.next()}).then(function(){storyboardExecuteDelegate(e,\"init\"),this.next()}).then(function(){$.async.all(e.dom.getElementsByTagName(\"page\"),function(t){$.async(function(){var a=this;if(t.id){e.options.pageSpecs[t.id]||(e.options.pageSpecs[t.id]={});var o={templatePath:$(t).attr(\"template-path\"),stylePath:$(t).attr(\"style-path\"),scriptPath:$(t).attr(\"script-path\"),dataPath:$(t).attr(\"data-path\"),usage:$(t).attr(\"usage\"),animationForward:$(t).attr(\"animation-forward\"),animationBackward:$(t).attr(\"animation-backward\"),animationReset:$(t).attr(\"animation-reset\"),animationDuration:$(t).attr(\"animation-duration\"),langPath:$(t).attr(\"lang-path\"),lang:$(t).attr(\"lang\")},n=t.id;addPageToStoryboard(e,n,o),Array.prototype.forEach.call(t.attributes,function(a){var o=a.localName;0===o.indexOf(\"data-\")&&\"data-path\"!==o&&(e.options.pageSpecs[t.id].data[o.substring(\"data-\".length)]=a.value)}),a.next()}else logger.error(new Error(\"Invalid page\")),a.reject(new Error(\"Invalid page without ID\"))}).then(function(){$(t).detach(),this.next()}).pipe(this)}).pipe(this)}).then(function(){window.localStorage&&Object.keys(e.options.pageSpecs).forEach(function(t){var a=e.id+\"-page-\"+t+\"-cache\";if(e.options.cachePage){var o=window.localStorage.getItem(a);if(o)try{var n=JSON.parse(o);n?e.options.pageSpecs[t].cache=n:e.options.pageSpecs[t].cache={}}catch(r){e.options.pageSpecs[t].cache={}}else e.options.pageSpecs[t].cache={}}else window.localStorage.setItem(a,null),e.options.pageSpecs[t].cache={}}),this.next()}).then(function(){if(storyboardExecuteDelegate(e,\"willSwitchToStartPage\"),e.channels[e.channel]||(e.channels[e.channel]={stack:[],startPageID:null}),e.channels[e.channel].startPageID=e.options.startPageID,e.options.startPageID){var t=this;e.switchTo(e.options.startPageID,null,{channel:e.channel,action:\"reset\",animation:\"fading\"}).then(function(){storyboardExecuteDelegate(e,\"didSwitchToStartPage\",e.currentPage),t.next()}).rejected(this.next)}else this.next()}),manager.queue[e.id]};Storyboard.prototype.destoryChannel=function(){var e=this,t=[];return Array.prototype.forEach.call(arguments,function(a,o){e.channels[o]&&t.push(o)}),$.async(function(){var a=this;e.taskQueue.then(function(){$.async.all(t,function(t){e.channels[t].stack.forEach(function(t){t.spec.module.exports.destroyPage&&t.spec.module.exports.destroyPage.call(t.data,t),storyboardExecuteDelegate(e,\"destoryPage\",t,t.data),$(t.dom).detach()}),delete e.channels[t],this.next()}).then(function(){this.next(),a.next()}).pipe(this)})})},Storyboard.prototype.update=function(e){return this.currentPage.update(e)},Storyboard.prototype.goBackward=function(e,t){return t?delete t.action:t={},e||(e={}),this.switchTo(null,e,$.advancedMerge({},{action:\"backward\"},t))},Object.defineProperty(Storyboard.prototype,\"switchNext\",{value:function(e){var t=this;manager.switchQueue[t.id].then(function(){if(t.switchState==SWITCHING)if(0==t.switchQueue.length)t.switchState=WAITING,delete manager.switchQueue[t.id];else{var a=t.switchQueue.slice(0);t.switchQueue.length=0,$.async.all(a,function(a,o,n){var r=this;o==n.length-1?storyboardSwitchNow(t,manager.switchQueue[t.id],e,a,!0).then(function(){r.next(),this.next()}):storyboardSwitchNow(t,manager.switchQueue[t.id],e,a,t.options.skipSwitchAnimation?!1:!0).then(function(){r.next(),this.next()})}).then(function(){t.switchNext(e)})}this.next()})}});var addPageToStoryboard=function(e,t,a){a=a?a:{};var o={storyboard:e,page:{id:t,lang:a.lang||e.options.defaultLang}};e.options.pageSpecs[t]=$.advancedMerge({},{id:t,templatePath:$.template(e.options.defaultTemplatePath,o),stylePath:$.template(e.options.defaultStylePath,o),scriptPath:$.template(e.options.defaultScriptPath,o),dataPath:$.template(e.options.defaultDataPath,o),usage:\"no-comment storyboard page\",cache:{},module:{data:{}},data:{},animationForward:e.options.defaultAnimationForward,animationBackward:e.options.defaultAnimationBackward,animationReset:e.options.defaultAnimationReset,animationDuration:{\"!valueType\":\"number\",\"!defaultValue\":e.options.defaultAnimationDuration},langPath:o.page.lang?$.template(e.options.defaultLangPath,o):\"none\"},a),[\"scriptPath\",\"stylePath\",\"dataPath\",\"templatePath\",\"langPath\"].forEach(function(a){\"none\"===e.options.pageSpecs[t][a]&&delete e.options.pageSpecs[t][a]}),e.options.pageSpecs[t].data=$.advancedMerge({},e.commonData,e.options.pageSpecs[t].data)};Storyboard.prototype.addPage=function(e,t){var a=this;if(!e)throw new Error(\"pageid not found\");if(a.options.pageSpecs[e])throw new Error(\"pageid already defined\");return manager.queue[this.id].then(function(){try{addPageToStoryboard(a,e,t)}catch(o){}this.next()})},Storyboard.prototype.switchTo=function(){var e=this,t=$.matchArguments([[\"pageID\"],[\"pageID\",\"data\"],[\"pageID\",\"data\",\"options\"]],{pageID:\"string\",data:\"any\",options:{acceptTypes:\"object\",defaultValue:{delay:0},mergeOptions:{channel:{\"!valueType\":\"string\",\"!defaultValue\":e.channel},action:{\"!valueType\":\"string\",\"!defaultValue\":\"forward\"},animation:{\"!valueType\":\"string\"},delay:{\"!valueType\":\"number\",\"!defaultValue\":0},duration:{\"!valueType\":\"number\",\"!defaultValue\":e.options.defaultAnimationDuration},active:{\"!valueType\":\"boolean\",\"!defaultValue\":!0},lang:{\"!valueType\":\"string\",\"!defaultValue\":e.options.defaultLang},forceAnimation:{\"!valueType\":\"boolean\",\"!defaultValue\":!1}}}},arguments);if(t.pageID&&!e.options.pageSpecs[t.pageID]){if(!e.options.supportsVirtualPage)throw new Error(\"Page id not found\");e.options.pageSpecs[t.pageID]||(e.options.pageSpecs[t.pageID]={}),addPageToStoryboard(e,t.pageID)}if(storyboardExecuteDelegate(e,\"willSwitchToPage\",t.pageID,t.data,t.options),!t.pageID&&\"backward\"!==t.options.action&&\"channel\"!==t.options.action)throw new Error(\"Page id is not defined\");e.channels[t.options.channel]||(e.channels[t.options.channel]={stack:[],startPageID:t.pageID});var a=null,o=function(e){return $.async(function(){var t=this,o={accept:function(e){t.next(e)},deny:function(e){t.reject(e)}};a?a.call(o,e):t.next(e)})},n=$.async(function(){var a=this;manager.queue[e.id].then(function(){try{var n={settings:t,step:a,backward:o};if(e.switchState==WAITING){e.switchState=SWITCHING,manager.switchQueue[e.id]=$.async();var r=function(t){logger.error(t),e.switchState=WAITING,e.switchQueue.length=0,delete manager.switchQueue[e.id]};storyboardSwitchNow(e,manager.switchQueue[e.id],r,n,!0).then(function(){e.switchNext(r),this.next()})}else e.switchQueue.push(n)}catch(i){}this.next()})}).then(function(){storyboardExecuteDelegate(e,\"didSwitchToPage\",t.pageID,t.data,t.options),this.next()});return n.backward=function(e){if(a)throw new Error(\"only one backward action can be defined\");a=e},n},$.storyboard=function(e){var t=arguments[1]instanceof Array?arguments[1]:Array.prototype.slice.call(arguments,1),a=[];return $(e).map(function(e,o){var n=new Storyboard(o,t);manager.initQueue.then(function(){var e=this;initStoryboard(n).then(function(){this.next(),e.next()}).rejected(function(){e.next()})}),a.push(n)}),1==a.length?a[0]:a},$.storyboard.plugins={},$.storyboard.animations={},$.storyboard.animations.none=function(e,t,a,o,n,r){$(\"<div>\").animate({opacity:0,translate:[0,0]},e,function(){t(),n&&n()})},$.storyboard.animations.fading=function(e,t,a,o,n,r){a.transition({opacity:0,translate:[0,0]},e,function(){t()}),o.css({opacity:0,translate:[0,0]}).transition({opacity:1,translate:[0,0]},e,function(){n&&n()})},$.storyboard.animations.forward=function(e,t,a,o,n,r){a.transition({translate:[-parseFloat(a.css(\"width\")),0]},e,function(){t()}),o.css({opacity:1,translate:[parseFloat(o.css(\"width\")),0]}).transition({translate:[0,0]},e,function(){n&&n()})},$.storyboard.animations.backward=function(e,t,a,o,n,r){a.transition({translate:[parseFloat(a.css(\"width\")),0]},e,function(){t()}),o.css({opacity:1,translate:[-parseFloat(o.css(\"width\")),0]}).transition({translate:[0,0]},e,function(){n&&n()})},$.storyboard.animations.reset=function(e,t,a,o,n,r){a.transition({translate:[0,-parseFloat(a.css(\"height\"))]},e,function(){t()}),o.css({opacity:1,translate:[0,parseFloat(o.css(\"height\"))]}).transition({translate:[0,0]},e,function(){n&&n()})},$.template.functors.money=function(e,t,a,o,n,r,i,s){var l=parseFloat(n),c=isNaN(r=Math.abs(r))?2:r,d=void 0==i?\".\":i,u=void 0==s?\",\":s,p=!isNaN(l)&&0>l?\"-\":\"\",g=parseInt(l=Math.abs(+l||0).toFixed(c))+\"\",h=(h=g.length)>3?h%3:0;return isNaN(l)?\"\":p+(h?g.substr(0,h)+u:\"\")+g.substr(h).replace(/(\\d{3})(?=\\d)/g,\"$1\"+u)+(c?d+Math.abs(l-g).toFixed(c).slice(2):\"\")},$.template.functors.srank=function(e,t,a,o,n){return isNaN(n)?\"\":\"★★★★★☆☆☆☆☆\".substring(5-n,10-n)},$.template.external.lang=function(e,t){var a=$(e).text();a=this.page.spec.lang[a]?$.template(this.page.spec.lang[a],this):$.template(a,this),t(null,$(\"<span>\"+a+\"</span>\"))},module.exports=Storyboard;"}},"/library/lab.dom/template.js":{"url":"/library/lab.dom/template.js","content":{"encoding":"text","data":"$.template.namespaceURI=\"http://project.spiritate.org/template\",$.template.xnamespaceURI=\"http://project.spiritate.org/templatex\",$.template.external={},$.template.safeEventQueue={},$.template.parsers[\"text/html\"]=function(e,t,n){var a=n.parametersMutable;n.parametersMutable=!0,n.animated=n.animated?!0:!1,n.defaultAnimationDuration=parseInt(n.defaultAnimationDuration),isNaN(n.defaultAnimationDuration)&&(n.defaultAnimationDuration=1e3),n.minimumIntervalBetweenUpdates=parseInt(n.minimumIntervalBetweenUpdates),isNaN(n.minimumIntervalBetweenUpdates)&&(n.minimumIntervalBetweenUpdates=n.defaultAnimationDuration),n.minimumIntervalBetweenUpdates<n.defaultAnimationDuration+50&&(n.minimumIntervalBetweenUpdates=n.defaultAnimationDuration+50),n.animated||(n.minimumIntervalBetweenUpdates=0),$.template.animations[n.defaultAnimation]||(n.defaultAnimation=\"fading\");var i={};for(var o in n)i[o]=n[o];i.animated=!1;var r=2*n.minimumIntervalBetweenUpdates;100>r&&(r=100);var c={};for(var o in n)c[o]=n[o];c.parser=\"text/plain\",t.$t=1;var l=[],s=l,u=document.createDocumentFragment(),f=u,d={},m=function(e){e=$(e);for(var t=0;t<e.length;){if(e[t].nodeType==Node.ELEMENT_NODE){var n=$(e[t]),a=n.css(\"display\");if(\"inline\"!=a&&\"none\"!=a)return\"div\";if(\"div\"==m(n.children()))return\"div\"}++t}return\"span\"},p=function(e,t){var n=function(n,a,i){for(var o=null,r=e;(null===o||\"\"===o)&&r;){var o=r.getAttributeNS?r.getAttributeNS($.template.namespaceURI,n):null;i&&(o=i(o)),r=r.parentNode}return null===o||\"\"==o?t[a]:o},a=n(\"duration\",\"defaultAnimationDuration\",function(e){return e=parseInt(e),isNaN(e)?null:e}),i=n(\"animation\",\"defaultAnimation\"),o=n(\"animated\",\"animated\",function(e){return\"yes\"===e?!0:\"no\"===e?!1:null});return{duration:a,name:i,animated:o}},h=function(e){return u==e?f:e},v=function(e){var t=[];return[].forEach.call(e.childNodes,function(e){(e.nodeType==Node.TEXT_NODE||e.nodeType==Node.COMMENT_NODE)&&t.push(e.nodeValue)}),t.join(\"\")},N=function(e){var t=[],n=!1,a=[];return[].forEach.call(e.childNodes,function(e){e.nodeType===Node.TEXT_NODE&&0===e.nodeValue.trim().length?n?a.push(e):t.push(e):(n=!0,a=[])}),t.forEach(function(e){e.nodeValue=\"\"}),a.forEach(function(e){e.nodeValue=\"\"}),e},E=function(e,t,n,a,i){var o=function(t){return t.forEach(function(t){h(e).appendChild(t)}),t},r=function(e,t){if(-1!=e.indexOf(\"${\")){var i=$.template(e,n,c);return t&&(s.push(function(n,a,i){t($.template(e,n,c),a),i()}),t(i,a)),i}return t&&t(e,a),e},l=function(e,t,n,i){var o=t.getAttribute(n);o||(o=\"\"),\"${\"==o.substr(0,2)&&\"}\"==o.substr(o.length-1)&&(o=o.substr(2,o.length-3));var r=$.template.execute(o,e,a);return i&&(s.push(function(e,t,n){i($.template.execute(o,e,t),t),n()}),i(r,a)),r};switch(t.nodeType){case Node.ELEMENT_NODE:if(t.namespaceURI==$.template.namespaceURI){switch(t.localName){case\"if\":var u=document.createTextNode(\"\");o([u]);var y=[],g=null,T=[],x=!0,A=function(n,a,i){var o=l(n,t,\"test\");if(o)if(g!=t){var r=p(t,a),c=document.createElement(m(y));c.className=\"template-animation\",h(e).insertBefore(c,u),y.forEach(function(e){c.appendChild(e)});var f=function(){for(;c.firstChild;)c.removeChild(c.firstChild);y=[];var i=s;T=[],s=T,[].slice.call(t.childNodes,0).forEach(function(t){E(e,t,n,a,y).forEach(function(e){$(e).detach(),y.push(e)})}),s=i,y.forEach(function(e){c.appendChild(e)}),N(c)},d=function(){y.forEach(function(t){h(e).insertBefore(t,u)}),N(h(e)),$(c).detach();var t=T.length;0==t?i():T.forEach(function(e){e(n,a,function(){--t,0===t&&i()})})};r.animated&&!x?$.template.animations[r.name](r.duration,f,$(c),$(c),d):(f(),d())}else{var v=T.length;0==v?i():T.forEach(function(e){e(n,a,function(){--v,0===v&&i()})})}else{var r=p(t,a),c=document.createElement(m(y));c.className=\"template-animation\",h(e).insertBefore(c,u),y.forEach(function(e){c.appendChild(e)});var f=function(){for(;c.firstChild;)c.removeChild(c.firstChild);y=[],T=[],N(c)},d=function(){N(h(e)),$(c).detach(),i()};r.animated&&!x?$.template.animations[r.name](r.duration,f,$(c),$(c),d):(f(),d())}g=t};s.push(A),A(n,a,function(){}),x=!1;var b=y.slice(0);return b.push(u),b;case\"switch\":var u=document.createTextNode(\"\");o([u]);var y=[],I=null,T=[],x=!0,A=function(n,a,i){var o=l(n,t,\"condition\"),r=!1;if([].slice.call(t.childNodes,0).forEach(function(c){if(c.nodeType==Node.ELEMENT_NODE&&c.namespaceURI==$.template.namespaceURI&&\"case\"==c.localName&&!(r||c.getAttribute(\"value\")&&l(n,c,\"value\")!==o)){if(r=!0,I!=c){var f=p(t,a),d=document.createElement(m(y));d.className=\"template-animation\",h(e).insertBefore(d,u),y.forEach(function(e){d.appendChild(e)});var v=function(){for(;d.firstChild;)d.removeChild(d.firstChild);y=[];var t=s;T=[],s=T,[].slice.call(c.childNodes,0).forEach(function(t){E(e,t,n,a,y).forEach(function(e){$(e).detach(),y.push(e)})}),s=t,y.forEach(function(e){d.appendChild(e)}),N(d)},g=function(){y.forEach(function(t){h(e).insertBefore(t,u)}),N(h(e)),$(d).detach(),i()};f.animated&&!x?$.template.animations[f.name](f.duration,v,$(d),$(d),g):(v(),g())}else{var A=T.length;0==A?i():T.forEach(function(e){e(n,a,function(){--A,0===A&&i()})})}I=c}}),!r){var c=p(t,a),f=document.createElement(m(y));f.className=\"template-animation\",h(e).insertBefore(f,u),y.forEach(function(e){f.appendChild(e)});var d=function(){for(;f.firstChild;)f.removeChild(f.firstChild);y=[],T=[],N(f)},v=function(){N(h(e)),$(f).detach(),i()};c.animated&&!x?$.template.animations[c.name](c.duration,d,$(f),$(f),v):(d(),v()),I=null}};s.push(A),A(n,a,function(){}),x=!1;var b=y.slice(0);return b.push(u),b;case\"map\":var u=document.createTextNode(\"\");o([u]);var C=[],y=[],x=!0,A=function(n,a,i){var o=l(n,t,\"list\"),r=t.getAttribute(\"item-variant-name\");(!/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(r)||r&&0==r.length)&&(r=\"item\"),r||(r=\"item\");var c=t.getAttribute(\"index-variant-name\");(!/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(c)||c&&0==c.length)&&(c=\"index\"),c||(c=\"index\");var f=t.getAttribute(\"list-variant-name\");(!/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(c)||f&&0==c.length)&&(f=\"list\"),f||(f=\"list\");var d=t.getAttribute(\"sort\");if(d){var v={};for(var g in n)v[g]=n[g];v[\"^\"]=n,f&&(v[f]=o),$.template.execute(d,v,a)}y=[];var T=[];C.forEach(function(e){T.push(e.nodes)});var x=[],A=[],b=!1,I=0,_=function(){++I,o.length+T.length==I&&(b=!0,A.forEach(function(e){e()}))},w=o.length;0==o.length&&i(),o.forEach(function(o,f,d){var v={};for(var g in n)v[g]=n[g];v[\"^\"]=n,r&&(v[r]=o),c&&(v[c]=f);var b=null,I=null,B=l(v,t,\"id-getter\");if(B&&(I=B.call(\"\",null,v,a),C.forEach(function(e){if(!b){var t=T.indexOf(e.nodes);e.hasOwnProperty(\"id\")&&e.id===I&&-1!=t&&(b=e,T.splice(t,1))}}),x.forEach(function(e){if(e.id===I)throw new Error(\"Duplicated ID found for map: \"+I)})),b){var O=p(t,a),D=document.createElement(\"span\");h(e).insertBefore(D,b.nodes[0]);for(var U=null,R=0;R<b.nodes.length&&!U;)b.nodes[R].nodeType==Node.TEXT_NODE?b.nodes[R].nodeValue.trim().length>0&&(U=D):b.nodes[R].nodeType==Node.ELEMENT_NODE&&(U=b.nodes[R]),++R;U||(U=D);var M=$(U).offsetParent().positionFromPage($(U).positionToPage({x:0,y:0}));$(D).detach();var z=document.createElement(m(b.nodes));z.className=\"template-animation\",h(e).insertBefore(z,u);var L=function(){z.style.position=\"absolute\",z.style.width=$(h(e)).css(\"width\"),z.style.left=M.x-parseFloat($(U).css(\"marginLeft\"))+\"px\",z.style.top=M.y-parseFloat($(U).css(\"marginTop\"))+\"px\";var t=null,n=document.createElement(\"span\");n.className=\"template-animation\",n.style.color=\"transparent\",b.nodes.forEach(function(e){z.appendChild(e);var a=e.cloneNode(!0);a.nodeType==Node.ELEMENT_NODE?(a.style.opacity=0,t||(t=a)):a.nodeType==Node.TEXT_NODE&&a.nodeValue.trim().length>0&&!t&&(t=n),n.appendChild(a)}),t||(t=n),h(e).insertBefore(n,z),O.animated?A.push(function(){$.delay(-1,function(){var a=document.createElement(\"span\");h(e).insertBefore(a,n);var i=$(t).offsetParent().positionFromPage($(t).positionToPage({x:0,y:0}));$(a).detach();var o=function(){$(n).detach(),b.nodes.forEach(function(t){h(e).insertBefore(t,z)}),$(z).detach()};$(z).animate({left:i.x-parseFloat($(t).css(\"marginLeft\"))+\"px\",top:i.y-parseFloat($(t).css(\"marginTop\"))+\"px\"},O.duration/2,\"swing\",o)})}):($(n).detach(),b.nodes.forEach(function(t){h(e).insertBefore(t,z)}),$(z).detach()),_()},Z=b.fillers.length,V=!1;0===Z&&V?(--w,0===w&&i()):b.fillers.forEach(function(e){e(v,a,function(){--Z,0===Z&&V&&(--w,0===w&&i())})}),x.push(b);var X=function(){V=!0,0===Z&&(--w,0===w&&i())};O.animated?$.template.animations.none(O.duration,L,$(b.nodes),$(b.nodes),X):(L(),X())}else{var F=s,S=[];s=S;var P=null;B?(P={id:I,nodes:[],fillers:S},x.push(P)):(P={nodes:[],fillers:S},x.push(P));var Y=[];[].slice.call(t.childNodes,0).forEach(function(t){E(e,t,v,a,Y).forEach(function(e){y.push(e),Y.push(e),P&&P.nodes.push(e)})}),s=F;var D=document.createTextNode(\"\");h(e).insertBefore(D,u);var H=document.createElement(m(Y));H.className=\"template-animation\",Y.forEach(function(e){H.appendChild(e)}),N(H);var O=p(t,a),L=function(){h(e).insertBefore(H,D),_()},X=function(){Array.prototype.slice.call(H.childNodes,0).forEach(function(t){h(e).insertBefore(t,D)}),$(H).detach(),$(D).detach(),N(h(e)),--w,0===w&&i()};O.animated?$.template.animations[O.name](O.duration,L,$(H),$(H),X):(L(),X())}}),T.forEach(function(e){if(e.length>0){var n=p(t,a),i=document.createElement(m(e));i.className=\"template-animation\",e[0].parentNode.insertBefore(i,e[0]),e.forEach(function(e){i.appendChild(e)});var o=function(){$(i).detach()};A.push(o),n.animated?$.template.animations[n.name](n.duration,function(){_()},$(i),$()):_()}else _()}),C=x};A(n,a,function(){}),x=!1,s.push(A);var b=y.slice(0);return b.push(u),b;case\"html\":var _=[],w=document.createElement(\"div\"),u=document.createTextNode(\"\");o([u]);var B=v(t),x=!0,A=function(n,a,i){var o=p(t,a),r=$.template.execute(B,n,a);w.innerHTML=r;var c=[].slice.call(w.childNodes,0),l=document.createElement(m(_));l.className=\"template-animation\",h(e).insertBefore(l,u),_.forEach(function(e){l.appendChild(e)}),N(l);var s=function(){_.forEach(function(e){$(e).detach()}),c.forEach(function(e){l.appendChild(e)}),N(l),_=c},f=function(){c.forEach(function(t){h(e).insertBefore(t,u)}),$(l).detach(),N(h(e)),i()};o.animated&&!x?$.template.animations[o.name](o.duration,s,$(l),$(l),f):(s(),f())};A(n,a,function(){}),x=!1;var y=_.slice(0);return y.unshift(u),s.push(A),y;case\"script\":var B=v(t),O=t.getAttribute(\"element-variant-name\"),A=function(t,n,a){var i={};for(var o in t)i[o]=t[o];O&&O.length>0&&(i[O]=h(e)),$.template.execute(B,i,n),a()};return A(n,a,function(){}),s.push(A),[];case\"sandbox\":var y=[],x=!0,T=[],A=function(n,a,i){y=[];var o={};for(var r in n)o[r]=n[r];if(delete o[\"^\"],x){var c=s;T=[],s=T,[].slice.call(t.childNodes,0).forEach(function(t){E(e,t,o,a,y).forEach(function(e){y.push(e)})}),s=c,i()}else{var l=T.length;T.forEach(function(e){e(o,a,function(){--l,0===l&&i()})})}};return A(n,a,function(){}),x=!1,s.push(A),y;case\"filler\":if(!a.fillerAvailable)throw new Error(\"Filler is not available for current options\");var B=v(t),D=t.getAttribute(\"template-variant-name\");D&&/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(D)&&(B=D+\" = arguments[0];\"+B);var U=t.getAttribute(\"parameters-variant-name\");U&&/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(U)&&(B=U+\" = arguments[1];\"+B);var R=t.getAttribute(\"options-variant-name\");R&&/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(R)&&(B=R+\" = arguments[2];\"+B);var M=t.getAttribute(\"container-variant-name\");M&&/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(M)&&(B=M+\" = arguments[3];\"+B);var z=window.eval(\"(function (){\"+B+\"})\"),A=function(e,n,a){z(t,e,n,f),a()};return A(n,a,function(){}),s.push(A),[];case\"template\":return d[t.getAttribute(\"name\")]=t,[];case\"apply\":var L=t.getAttribute(\"template\"),Z=d[L],y=[],u=document.createTextNode(\"\");o([u]);var T=[],x=!0,A=function(n,a,i){var o=l(n,t,\"mix-parameters\"),r={};for(var c in n)r[c]=n[c];for(var c in o)r[c]=o[c];if(x){var u=s;T=[],s=T,[].forEach.call(Z.childNodes,function(t){E(e,t,r,a,y).forEach(function(e){y.push(e)})}),N({childNodes:y}),s=u,i()}else{var f=T.length;T.forEach(function(e){e(r,a,function(){--f,0===f&&i()})})}};A(n,a,function(){}),x=!1,s.push(A);var b=y.slice(0);return b.push(u),b;case\"listener\":var V=t.getAttribute(\"event\"),X=t.getAttribute(\"action\"),F=t.getAttribute(\"event-variant-name\");/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(F)&&F&&\"\"!==F||(F=\"event\");var O=t.getAttribute(\"element-variant-name\");/^[a-zA-Z\\$_][a-zA-Z0-9\\$_]*$/g.test(O)&&O&&\"\"!==O||(O=\"element\");var S=n,P={};s.push(function(e,t,n){S=e,Y(),n()});var Y=function(){Array.prototype.forEach.call(t.attributes,function(e){-1===e.nodeName.indexOf(\":\")&&(/^\\$\\{(.*)\\}$/.test(e.nodeValue)?P[e.nodeName]=$.template.execute(e.nodeValue.substring(2,e.nodeValue.length-1),n,a):P[e.nodeName]=e.nodeValue)})};Y(),$(h(e)).on(V,P,function(t){var n={};for(var i in S)n[i]=S[i];F&&(n[F]=t),O&&(n[O]=h(e)),$.template.execute(X,n,a)});break;default:throw new Error(\"Invalid template tag found: \"+t.nodeName)}return null}if(t.namespaceURI==$.template.xnamespaceURI){var H=t.localName;if($.template.external[H]){var j=document.createElement(\"div\"),_=[],u=document.createTextNode(\"\"),k=null;o([u]);var x=!0,A=function(n,a,o){var r=p(t,a);$.template.external[H].call(n,t,function(t,n,c){if(t)o();else{$(j).append($(n));var l=[].slice.call(j.childNodes,0),f=document.createElement(m(_));f.className=\"template-animation\",h(e).insertBefore(f,u),_.forEach(function(e){f.appendChild(e)}),N(f);var d=s,p=[];s=p;var v=null;c&&(v=$(c));var E=function(){_.forEach(function(e){$(e).detach()}),k&&$(k).detach(),l.forEach(function(e){f.appendChild(e),i.indexOf(e)<0&&i.push(e)}),N(f),_=l,k=v,s=d},y=function(){l.forEach(function(t){$(t).css(\"opacity\",\"1\"),$(t).removeClass(\"template-animation\"),h(e).insertBefore(t,u)}),$(f).detach(),N(h(e));var t=_.slice(0);if(t.unshift(u),x)x=!1,o();else{var n=p.length;0==n?o():p.forEach(function(e){e(S,a,function(){--n,0===n&&o()})})}};r.animated=!1,r.animated&&!x?$.template.animations[r.name](r.duration,E,$(f),$(f),y):(E(),y())}})};return s.push(A),A(n,a,function(){}),[j]}return[]}var Q=t.namespaceURI;Q||(Q=document.body.namespaceURI);var q=null;q=Q===document.body.namespaceURI?document.createElement(t.nodeName):document.createElementNS(Q,t.nodeName),[].forEach.call(t.attributes,function(e){if(e.namespaceURI===$.template.namespaceURI){if(\"on-\"===e.localName.substring(0,3)){var i,o=!1;\"safe-\"===e.localName.substring(3,8)?(i=e.localName.substring(8),o=!0):i=e.localName.substring(3);var c=e.value,l=n,u={},f=t.getAttributeNS($.template.namespaceURI,\"action-delegate\");f&&(u.delegate=$.template.execute(f,n,a)),s.push(function(e,t,n){l=e,n()}),$(q).on(i,u,function(e){var t={};for(var n in l)t[n]=l[n];if(t.event=e,t.element=q,o){var r=function(){return $.async(function(){var e=this,n=!1,i=setTimeout(function(){n||(n=!0,e.next())},1500);t.next=function(){n||(n=!0,e.next(),clearTimeout(i))},$.template.execute(c,t,a)})};$.template.safeEventQueue[i]||($.template.safeEventQueue[i]=$.async(function(){r().then(this.next)}).finished(function(){delete $.template.safeEventQueue[i]}))}else $.template.execute(c,t,a)})}}else\"http://www.w3.org/2000/xmlns/\"!=e.namespaceURI&&r(e.value,function(t){q.setAttributeNS(e.namespaceURI,e.nodeName,t),Q==document.body.namespaceURI&&\"input\"==q.localName&&\"value\"==e.localName&&(q.value=t)})});var T=[];return[].slice.call(t.childNodes,0).forEach(function(e){E(q,e,n,a,[])}),o([N(q)]);case Node.TEXT_NODE:var G=s;T=[],s=T;var u=document.createTextNode(\"\"),J=document.createTextNode(\"\"),K=!1;return r(t.nodeValue,function(e){K=J.nodeValue!=e,J.nodeValue=e}),s=G,T.length>0&&s.push(function(n,a,i){var o=p(t,a);if(o.animated){var r=document.createElement(\"span\");r.className=\"template-animation\",h(e).insertBefore(r,u),r.appendChild(J);var c=J.nodeValue,l=function(){T.forEach(function(e){e(n,a,function(){})})},s=function(){h(e.insertBefore(J,u)),$(r).detach(),i()};l(),K?(J.nodeValue=c,$.template.animations[o.name](o.duration,l,$(r),$(r),s)):s()}else{var f=T.length;T.forEach(function(e){e(n,a,function(){--f,0===f&&i()})})}}),o([J,u]);case Node.COMMENT_NODE:var W=document.createComment(\"\");return W.nodeValue=t.nodeValue,o([W]);case Node.CDATA_SECTION_NODE:case Node.ATTRIBUTE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.ENTITY_NODE:case Node.ENTITY_REFERENCE_NODE:case Node.NOTATION_NODE:case Node.PROCESSING_INSTRUCTION_NODE:default:throw new Error(\"Impossible node type has been found: \"+t.nodeType)}},y=$.replaceHTMLEntityForXML(e);n.prependNamespaces?(!n.autoappendTemplateNamespace&&null!==n.autoappendTemplateNamespace&&void 0!==n.autoappendTemplateNamespace||n.prependNamespaces.template||(n.prependNamespaces.template=$.template.namespaceURI),y=\"<div \"+Object.keys(n.prependNamespaces).map(function(e){return e?\"xmlns:\"+e+'=\"'+$.escapeXML(n.prependNamespaces[e])+'\"':'xmlns=\"'+$.escapeXML(n.prependNamespaces[e])+'\"'}).join(\" \")+\">\"+y+\"</div>\"):y=n.autoappendTemplateNamespace||null===n.autoappendTemplateNamespace||void 0===n.autoappendTemplateNamespace?'<div xmlns:template=\"'+$.template.namespaceURI+'\">'+y+\"</div>\":\"<div>\"+y+\"</div>\";var g=new DOMParser,T=g.parseFromString(y,\"text/xml\");if(!T||T.getElementsByTagName(\"parsererror\").length){var x=Array.prototype.map.call(T.getElementsByTagName(\"parsererror\"),function(e){return e.getElementsByTagName(\"div\")[0].innerHTML}).join(\"\\n\"),A=parseInt(x.split(/(^|\\s)line\\s/im).filter(function(e){return e?e.trim().length>0:!1}).slice(-1)[0]),b=y;if(isFinite(A)&&(b=y.split(\"\\n\").slice(Math.max(0,A-4),A+3).join(\"\\n\")),!n.couldTryToReadAsHTML&&void 0!==n.couldTryToReadAsHTML&&null!==n.couldTryToReadAsHTML)throw new Error(\"Invalid XHTML, \"+x+\"\\n\"+b);console.warn(\"Invalid XHTML, \"+x+\"\\n\"+b),T={documentElement:$(y)[0]}}[].slice.call(T.documentElement.childNodes,0).forEach(function(e){E(u,e,t,n,[])});var I=document.createTextNode(\"\");u.firstChild?u.insertBefore(I,u.firstChild):u.appendChild(I);var C=document.createTextNode(\"\");u.appendChild(C);var _=[],w=function(){for(var e=new Date,t=[],n=_.length;n>0;)if(--n,e.getTime()-_[n].date.getTime()>r&&_[n].skippable){var a=!0;_[n].queues&&_[n].queues.forEach(function(e){-1==t.indexOf(e)&&(t.push(e),a=!1)}),a&&_.splice(n,1)}},B=!1,O=function(){if(w(),_.length>0){var e=_[0],t=!1,a=function(){if(!t){t=!0;var n=_.indexOf(e);-1!=n&&_.splice(n,1),_.length>0&&$.delay(50,O)}};B=!0,e.act(a),B=!1,e.directly?a():$.delay(n.minimumIntervalBetweenUpdates,a)}};u.act=function(e,t,n,a){return B?n(function(){}):(_.push({act:n,date:new Date,directly:e,skippable:t,queues:a}),1==_.length&&O()),this},u.getAllNodes=function(){var e=[],t=!1,n=!1;return[].slice.call(f.childNodes,0).forEach(function(a){t||a!=I||(t=!0),t&&!n&&e.push(a),n||a!=C||(n=!0)}),$(e)};var D=1;return u.fill=function(e,t){return u.act(!1,!0,function(i){++D;var o={};if(a)o=e;else{for(var r in e)o[r]=e[r];o.$t=D}if(e=o,l.length>0){var c=l.length;l.forEach(function(a){a(e,n,function(){--c,0===c&&($.reinit(u.getAllNodes()),t&&t(),$.delay(-1,i))})})}else t&&t(),$.delay(-1,i)},[\"fill\"]),this},u.render=function(e,t,a){e||(e=u),(\"string\"==typeof e||e instanceof String)&&(e=$(e)),e instanceof Node||(e=e[0]),e||(e=u);var i=document.createTextNode(\"\");return e.appendChild(i),u.act(!1,!1,function(o){1==e.length&&(e=e[0]);var r=f;f=e;var c=document.createElement(\"div\");c.className=\"template-animation\";var l=!1,s=!1,d=document.createTextNode(\"\");r.insertBefore(d,I),[].slice.call(r.childNodes,0).forEach(function(e){l||e!=I||(l=!0),l&&!s&&c.appendChild(e),s||e!=C||(s=!0)}),r.insertBefore(c,d),$(d).detach();var m=function(){f.insertBefore(c,i),t&&t()},h=function(){[].slice.call(c.childNodes,0).forEach(function(e){f.insertBefore(e,i)}),$(c).detach(),$(i).detach(),$.reinit(u.getAllNodes()),a&&a(),$.delay(-1,o)},v=p(r,n);v.animated?$.template.animations[v.name](v.duration,m,$(c),$(c),h):(m(),h())},[\"fill\",\"render\"]),this},n.fillInTarget&&u.render($(n.fillInTarget)[0]),u},$.template.animations={},$.template.animations.none=function(e,t,n,a,i,o){var r=document.createElement(\"span\");r.className=\"template-animation\",$(r).animate({opacity:0},.5*e,\"swing\",function(){t(),$(r).animate({opacity:1},.5*e,\"swing\",function(){i&&i()})})},$.template.animations.fading=function(e,t,n,a,i,o){n.transition({opacity:0},.5*e,function(){t(),a.css({opacity:0}).transition({opacity:1},.5*e,function(){i&&i()})})},$.template.animations.forward=function(e,t,n,a,i,o){n.transition({scale:.001,opacity:0},.4*e,function(){t(),a.css({scale:.001,opacity:0}).transition({scale:\"1\",opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.backward=function(e,t,n,a,i,o){n.transition({scale:2,opacity:0},.4*e,function(){t(),a.css({scale:2,opacity:0}).transition({scale:\"1\",opacity:1,delay:.2},.4*e,function(){i&&i()})})},$.template.animations.bubble=function(e,t,n,a,i,o){n.transition({scale:2,opacity:0},.35*e,function(){t(),a.css({scale:.001,opacity:0}).transition({scale:1,opacity:1,delay:.3*e},.35*e,function(){i&&i()})})},$.template.animations.stamp=function(e,t,n,a,i,o){n.transition({scale:.001,opacity:0},.4*e,function(){t(),a.css({scale:2,opacity:0}).transition({scale:1,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.compress=function(e,t,n,a,i,o){n.transition({scaleY:.001,opacity:0},.4*e,function(){t(),a.css({scaleY:.001,opacity:0}).transition({scaleY:1,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.narrow=function(e,t,n,a,i,o){n.transition({scaleX:.001,opacity:0},.4*e,function(){t(),a.css({scaleX:.001,opacity:0}).transition({scaleX:1,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.expand=function(e,t,n,a,i,o){n.transition({scaleY:2,opacity:0},.4*e,function(){t(),a.css({scaleY:2,opacity:0}).transition({scaleY:1,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.fat=function(e,t,n,a,i,o){n.transition({scaleX:2,opacity:0},.4*e,function(){t(),a.css({scaleX:2,opacity:0}).transition({scaleX:1,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.top=function(e,t,n,a,i,o){n.transition({y:\"-100%\",opacity:0},.4*e,function(){t(),a.css({y:\"-100%\",opacity:0}).transition({y:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.bottom=function(e,t,n,a,i,o){n.transition({y:\"100%\",opacity:0},.4*e,function(){t(),a.css({y:\"100%\",opacity:0}).transition({y:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.left=function(e,t,n,a,i,o){n.transition({x:\"-100%\",opacity:0},.4*e,function(){t(),a.css({x:\"-100%\",opacity:0}).transition({x:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.right=function(e,t,n,a,i,o){n.transition({x:\"100%\",opacity:0},.4*e,function(){t(),a.css({x:\"100%\",opacity:0}).transition({x:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.up=function(e,t,n,a,i,o){n.transition({y:\"-100%\",opacity:0},.4*e,function(){t(),a.css({y:\"100%\",opacity:0}).transition({y:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.down=function(e,t,n,a,i,o){n.transition({y:\"100%\",opacity:0},.4*e,function(){t(),a.css({y:\"-100%\",opacity:0}).transition({y:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.pass=function(e,t,n,a,i,o){n.transition({x:\"-100%\",opacity:0},.4*e,function(){t(),a.css({x:\"100%\",opacity:0}).transition({x:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})},$.template.animations.back=function(e,t,n,a,i,o){n.transition({x:\"100%\",opacity:0},.4*e,function(){t(),a.css({x:\"-100%\",opacity:0}).transition({x:0,opacity:1,delay:.2*e},.4*e,function(){i&&i()})})};"}},"/library/lab.dom/transition.js":{"url":"/library/lab.dom/transition.js","content":{"encoding":"text","data":"!function(t,e){e(t.jQuery)}(this,function(t){function e(t){if(t in l.style)return t;for(var e=[\"Moz\",\"Webkit\",\"O\",\"ms\"],n=t.charAt(0).toUpperCase()+t.substr(1),i=0;i<e.length;++i){var r=e[i]+n;if(r in l.style)return r}}function n(){return l.style[p.transform]=\"\",l.style[p.transform]=\"rotateY(90deg)\",\"\"!==l.style[p.transform]}function i(t){return\"string\"==typeof t&&this.parse(t),this}function r(t,e,n){e===!0?t.queue(n):e?t.queue(e,n):t.each(function(){n.call(this)})}function s(e){var n=[];return t.each(e,function(e){e=t.camelCase(e),e=t.transit.propertyMap[e]||t.cssProps[e]||e,e=u(e),p[e]&&(e=u(p[e])),-1===t.inArray(e,n)&&n.push(e)}),n}function a(e,n,i,r){var a=s(e);t.cssEase[i]&&(i=t.cssEase[i]);var o=\"\"+f(n)+\" \"+i;parseInt(r,10)>0&&(o+=\" \"+f(r));var u=[];return t.each(a,function(t,e){u.push(e+\" \"+o)}),u.join(\", \")}function o(e,n){n||(t.cssNumber[e]=!0),t.transit.propertyMap[e]=p.transform,t.cssHooks[e]={get:function(n){var i=t(n).css(\"transit:transform\");return i.get(e)},set:function(n,i){var r=t(n).css(\"transit:transform\");r.setFromString(e,i),t(n).css({\"transit:transform\":r})}}}function u(t){return t.replace(/([A-Z])/g,function(t){return\"-\"+t.toLowerCase()})}function c(t,e){return\"string\"!=typeof t||t.match(/^[\\-0-9\\.]+$/)?\"\"+t+e:t}function f(e){var n=e;return\"string\"!=typeof n||n.match(/^[\\-0-9\\.]+/)||(n=t.fx.speeds[n]||t.fx.speeds._default),c(n,\"ms\")}t.transit={version:\"0.9.12\",propertyMap:{marginLeft:\"margin\",marginRight:\"margin\",marginBottom:\"margin\",marginTop:\"margin\",paddingLeft:\"padding\",paddingRight:\"padding\",paddingBottom:\"padding\",paddingTop:\"padding\"},enabled:!0,useTransitionEnd:!1};var l=document.createElement(\"div\"),p={},d=navigator.userAgent.toLowerCase().indexOf(\"chrome\")>-1;p.transition=e(\"transition\"),p.transitionDelay=e(\"transitionDelay\"),p.transform=e(\"transform\"),p.transformOrigin=e(\"transformOrigin\"),p.filter=e(\"Filter\"),p.transform3d=n();var h={transition:\"transitionend\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",WebkitTransition:\"webkitTransitionEnd\",msTransition:\"MSTransitionEnd\"},b=p.transitionEnd=h[p.transition]||null;for(var g in p)p.hasOwnProperty(g)&&\"undefined\"==typeof t.support[g]&&(t.support[g]=p[g]);return l=null,t.cssEase={_default:\"ease\",\"in\":\"ease-in\",out:\"ease-out\",\"in-out\":\"ease-in-out\",snap:\"cubic-bezier(0,1,.5,1)\",easeInCubic:\"cubic-bezier(.550,.055,.675,.190)\",easeOutCubic:\"cubic-bezier(.215,.61,.355,1)\",easeInOutCubic:\"cubic-bezier(.645,.045,.355,1)\",easeInCirc:\"cubic-bezier(.6,.04,.98,.335)\",easeOutCirc:\"cubic-bezier(.075,.82,.165,1)\",easeInOutCirc:\"cubic-bezier(.785,.135,.15,.86)\",easeInExpo:\"cubic-bezier(.95,.05,.795,.035)\",easeOutExpo:\"cubic-bezier(.19,1,.22,1)\",easeInOutExpo:\"cubic-bezier(1,0,0,1)\",easeInQuad:\"cubic-bezier(.55,.085,.68,.53)\",easeOutQuad:\"cubic-bezier(.25,.46,.45,.94)\",easeInOutQuad:\"cubic-bezier(.455,.03,.515,.955)\",easeInQuart:\"cubic-bezier(.895,.03,.685,.22)\",easeOutQuart:\"cubic-bezier(.165,.84,.44,1)\",easeInOutQuart:\"cubic-bezier(.77,0,.175,1)\",easeInQuint:\"cubic-bezier(.755,.05,.855,.06)\",easeOutQuint:\"cubic-bezier(.23,1,.32,1)\",easeInOutQuint:\"cubic-bezier(.86,0,.07,1)\",easeInSine:\"cubic-bezier(.47,0,.745,.715)\",easeOutSine:\"cubic-bezier(.39,.575,.565,1)\",easeInOutSine:\"cubic-bezier(.445,.05,.55,.95)\",easeInBack:\"cubic-bezier(.6,-.28,.735,.045)\",easeOutBack:\"cubic-bezier(.175, .885,.32,1.275)\",easeInOutBack:\"cubic-bezier(.68,-.55,.265,1.55)\"},t.cssHooks[\"transit:transform\"]={get:function(e){return t(e).data(\"transform\")||new i},set:function(e,n){var r=n;r instanceof i||(r=new i(r)),\"WebkitTransform\"!==p.transform||d?e.style[p.transform]=r.toString():e.style[p.transform]=r.toString(!0),t(e).data(\"transform\",r)}},t.cssHooks.transform={set:t.cssHooks[\"transit:transform\"].set},t.cssHooks.filter={get:function(t){return t.style[p.filter]},set:function(t,e){t.style[p.filter]=e}},t.fn.jquery<\"1.8\"&&(t.cssHooks.transformOrigin={get:function(t){return t.style[p.transformOrigin]},set:function(t,e){t.style[p.transformOrigin]=e}},t.cssHooks.transition={get:function(t){return t.style[p.transition]},set:function(t,e){t.style[p.transition]=e}}),o(\"scale\"),o(\"scaleX\"),o(\"scaleY\"),o(\"translate\"),o(\"rotate\"),o(\"rotateX\"),o(\"rotateY\"),o(\"rotate3d\"),o(\"perspective\"),o(\"skewX\"),o(\"skewY\"),o(\"x\",!0),o(\"y\",!0),i.prototype={setFromString:function(t,e){var n=\"string\"==typeof e?e.split(\",\"):e.constructor===Array?e:[e];n.unshift(t),i.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(\",\")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=c(t,\"deg\")},rotateX:function(t){this.rotateX=c(t,\"deg\")},rotateY:function(t){this.rotateY=c(t,\"deg\")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+\",\"+e},skewX:function(t){this.skewX=c(t,\"deg\")},skewY:function(t){this.skewY=c(t,\"deg\")},perspective:function(t){this.perspective=c(t,\"px\")},x:function(t){this.set(\"translate\",t,null)},y:function(t){this.set(\"translate\",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=c(t,\"px\")),null!==e&&void 0!==e&&(this._translateY=c(e,\"px\")),this.translate=this._translateX+\",\"+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||\"1,1\").split(\",\");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||\"0,0,0,0deg\").split(\",\"),e=0;3>=e;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=c(t[3],\"deg\")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\\((.*?)\\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&(\"rotateX\"===n||\"rotateY\"===n||\"perspective\"===n||\"transformOrigin\"===n))continue;\"_\"!==n[0]&&e.push(t&&\"scale\"===n?n+\"3d(\"+this[n]+\",1)\":t&&\"translate\"===n?n+\"3d(\"+this[n]+\",0)\":n+\"(\"+this[n]+\")\")}return e.join(\" \")}},t.fn.transition=t.fn.transit=function(e,n,i,s){var o=this,u=0,c=!0,l=t.extend(!0,{},e);\"function\"==typeof n&&(s=n,n=void 0),\"object\"==typeof n&&(i=n.easing,u=n.delay||0,c=\"undefined\"==typeof n.queue?!0:n.queue,s=n.complete,n=n.duration),\"function\"==typeof i&&(s=i,i=void 0),\"undefined\"!=typeof l.easing&&(i=l.easing,delete l.easing),\"undefined\"!=typeof l.duration&&(n=l.duration,delete l.duration),\"undefined\"!=typeof l.complete&&(s=l.complete,delete l.complete),\"undefined\"!=typeof l.queue&&(c=l.queue,delete l.queue),\"undefined\"!=typeof l.delay&&(u=l.delay,delete l.delay),\"undefined\"==typeof n&&(n=t.fx.speeds._default),\"undefined\"==typeof i&&(i=t.cssEase._default),n=f(n);var d=a(l,n,i,u),h=t.transit.enabled&&p.transition,g=h?parseInt(n,10)+parseInt(u,10):0;if(0===g){var y=function(t){o.css(l),s&&s.apply(o),t&&t()};return r(o,c,y),o}var m={},v=function(e){var n=!1,i=function(){n&&o.unbind(b,i),g>0&&o.each(function(){this.style&&(this.style[p.transition]=m[this]||null)}),\"function\"==typeof s&&s.apply(o),\"function\"==typeof e&&e()};g>0&&b&&t.transit.useTransitionEnd?(n=!0,o.bind(b,i)):window.setTimeout(i,g),o.each(function(){this.style&&(g>0&&(this.style[p.transition]=d),t(this).css(l))})},z=function(t){this.offsetWidth,v(t)};return r(o,c,z),this},t.transit.getTransitionValue=a,t});"}},"/library/lab.dom/xml.js":{"url":"/library/lab.dom/xml.js","content":{"encoding":"text","data":"$(function(){var e=function(){};e.prototype.serializeToString=function(e,a){a=a?$.extend({},a):{};var x=this;switch(e.nodeType){case Node.TEXT_NODE:return $.escapeXML(e.nodeValue);case Node.ATTRIBUTE_NODE:return $.escapeXML(e.nodeName)+'=\"'+$.escapeXML(e.nodeValue)+'\"';case Node.CDATA_SECTION_NODE:return\"<![CDATA[\"+e.nodeValue+\"]]>\";case Node.COMMENT_NODE:return\"<!--\"+e.nodeValue+\"-->\";case Node.ELEMENT_NODE:var r=[\"<\"],t=e.namespaceURI,i=e.nodeName,n=e.prefix,s={};if(\"http://www.w3.org/1999/xhtml\"===t){i=i.toLocaleLowerCase();var l=i.split(\":\");l.length>1?(n=l[0],t=a[t]):t=null}return r.push(i),e.attributes.length>0&&(r.push(\" \"),r.push(Array.prototype.map.call(e.attributes,function(e){var r=null,t=null;return\"xmlns\"===e.nodeName?(t=\"\",r=e.nodeValue):0===e.nodeName.indexOf(\"xmlns:\")&&(t=e.nodeName.substring(6),r=e.nodeValue),r&&(a[t]=r),e.namespaceURI&&\"http://www.w3.org/2000/xmlns/\"!==e.namespaceURI&&(t=e.prefix?e.prefix:\"\",s[t]=e.namespaceURI),x.serializeToString(e)}).join(\" \"))),t?a[n?n:\"\"]!==t&&t&&(n?(a[n]=t,r.push(\" xmlns:\"+n+'=\"'+t+'\"')):(a[\"\"]=t,r.push(' xmlns=\"'+t+'\"'))):!n&&a[\"\"]!==e.namespaceURI&&e.namespaceURI&&(r.push(' xmlns=\"'+e.namespaceURI+'\"'),a[\"\"]=e.namespaceURI),Object.keys(s).forEach(function(e){a[e]!==s[e]&&(a[e]=s[e],r.push(e?\" xmlns:\"+e+'=\"'+s[e]+'\"':' xmlns=\"'+s[e]+'\"'))}),e.childNodes.length>0?(r.push(\">\"),r.push(Array.prototype.map.call(e.childNodes,function(e){return x.serializeToString(e,a)}).join(\"\")),r.push(\"<\"),r.push(\"/\"),r.push(i),r.push(\">\")):(r.push(\"/\"),r.push(\">\")),r.join(\"\");case Node.DOCUMENT_FRAGMENT_NODE:case Node.DOCUMENT_NODE:var r=[];return Array.prototype.forEach.call(e.childNodes,function(e){r.push(x.serializeToString(e))}),r.join(\"\");case Node.DOCUMENT_TYPE_NODE:case Node.ENTITY_NODE:case Node.ENTITY_REFERENCE_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.NOTATION_NODE:}},$.escapeXML=function(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")};var a={\"&amp;\":\"&#x26;\",\"&lt;\":\"&#x3C;\",\"&gt;\":\"&#x3E;\",\"&nbsp;\":\"&#xA0;\",\"&iexcl;\":\"&#xA1;\",\"&cent;\":\"&#xA2;\",\"&pound;\":\"&#xA3;\",\"&curren;\":\"&#xA4;\",\"&yen;\":\"&#xA5;\",\"&brvbar;\":\"&#xA6;\",\"&sect;\":\"&#xA7;\",\"&uml;\":\"&#xA8;\",\"&copy;\":\"&#xA9;\",\"&ordf;\":\"&#xAA;\",\"&laquo;\":\"&#xAB;\",\"&not;\":\"&#xAC;\",\"&shy;\":\"&#xAD;\",\"&reg;\":\"&#xAE;\",\"&macr;\":\"&#xAF;\",\"&deg;\":\"&#xB0;\",\"&plusmn;\":\"&#xB1;\",\"&sup2;\":\"&#xB2;\",\"&sup3;\":\"&#xB3;\",\"&acute;\":\"&#xB4;\",\"&micro;\":\"&#xB5;\",\"&para;\":\"&#xB6;\",\"&middot;\":\"&#xB7;\",\"&cedil;\":\"&#xB8;\",\"&sup1;\":\"&#xB9;\",\"&ordm;\":\"&#xBA;\",\"&raquo;\":\"&#xBB;\",\"&frac14;\":\"&#xBC;\",\"&frac12;\":\"&#xBD;\",\"&frac34;\":\"&#xBE;\",\"&iquest;\":\"&#xBF;\",\"&Agrave;\":\"&#xC0;\",\"&Aacute;\":\"&#xC1;\",\"&Acirc;\":\"&#xC2;\",\"&Atilde;\":\"&#xC3;\",\"&Auml;\":\"&#xC4;\",\"&Aring;\":\"&#xC5;\",\"&AElig;\":\"&#xC6;\",\"&Ccedil;\":\"&#xC7;\",\"&Egrave;\":\"&#xC8;\",\"&Eacute;\":\"&#xC9;\",\"&Ecirc;\":\"&#xCA;\",\"&Euml;\":\"&#xCB;\",\"&Igrave;\":\"&#xCC;\",\"&Iacute;\":\"&#xCD;\",\"&Icirc;\":\"&#xCE;\",\"&Iuml;\":\"&#xCF;\",\"&ETH;\":\"&#xD0;\",\"&Ntilde;\":\"&#xD1;\",\"&Ograve;\":\"&#xD2;\",\"&Oacute;\":\"&#xD3;\",\"&Ocirc;\":\"&#xD4;\",\"&Otilde;\":\"&#xD5;\",\"&Ouml;\":\"&#xD6;\",\"&times;\":\"&#xD7;\",\"&Oslash;\":\"&#xD8;\",\"&Ugrave;\":\"&#xD9;\",\"&Uacute;\":\"&#xDA;\",\"&Ucirc;\":\"&#xDB;\",\"&Uuml;\":\"&#xDC;\",\"&Yacute;\":\"&#xDD;\",\"&THORN;\":\"&#xDE;\",\"&szlig;\":\"&#xDF;\",\"&agrave;\":\"&#xE0;\",\"&aacute;\":\"&#xE1;\",\"&acirc;\":\"&#xE2;\",\"&atilde;\":\"&#xE3;\",\"&auml;\":\"&#xE4;\",\"&aring;\":\"&#xE5;\",\"&aelig;\":\"&#xE6;\",\"&ccedil;\":\"&#xE7;\",\"&egrave;\":\"&#xE8;\",\"&eacute;\":\"&#xE9;\",\"&ecirc;\":\"&#xEA;\",\"&euml;\":\"&#xEB;\",\"&igrave;\":\"&#xEC;\",\"&iacute;\":\"&#xED;\",\"&icirc;\":\"&#xEE;\",\"&iuml;\":\"&#xEF;\",\"&eth;\":\"&#xF0;\",\"&ntilde;\":\"&#xF1;\",\"&ograve;\":\"&#xF2;\",\"&oacute;\":\"&#xF3;\",\"&ocirc;\":\"&#xF4;\",\"&otilde;\":\"&#xF5;\",\"&ouml;\":\"&#xF6;\",\"&divide;\":\"&#xF7;\",\"&oslash;\":\"&#xF8;\",\"&ugrave;\":\"&#xF9;\",\"&uacute;\":\"&#xFA;\",\"&ucirc;\":\"&#xFB;\",\"&uuml;\":\"&#xFC;\",\"&yacute;\":\"&#xFD;\",\"&thorn;\":\"&#xFE;\",\"&yuml;\":\"&#xFF;\",\"&fnof;\":\"&#x192;\",\"&Alpha;\":\"&#x391;\",\"&Beta;\":\"&#x392;\",\"&Gamma;\":\"&#x393;\",\"&Delta;\":\"&#x394;\",\"&Epsilon;\":\"&#x395;\",\"&Zeta;\":\"&#x396;\",\"&Eta;\":\"&#x397;\",\"&Theta;\":\"&#x398;\",\"&Iota;\":\"&#x399;\",\"&Kappa;\":\"&#x39A;\",\"&Lambda;\":\"&#x39B;\",\"&Mu;\":\"&#x39C;\",\"&Nu;\":\"&#x39D;\",\"&Xi;\":\"&#x39E;\",\"&Omicron;\":\"&#x39F;\",\"&Pi;\":\"&#x3A0;\",\"&Rho;\":\"&#x3A1;\",\"&Sigma;\":\"&#x3A3;\",\"&Tau;\":\"&#x3A4;\",\"&Upsilon;\":\"&#x3A5;\",\"&Phi;\":\"&#x3A6;\",\"&Chi;\":\"&#x3A7;\",\"&Psi;\":\"&#x3A8;\",\"&Omega;\":\"&#x3A9;\",\"&alpha;\":\"&#x3B1;\",\"&beta;\":\"&#x3B2;\",\"&gamma;\":\"&#x3B3;\",\"&delta;\":\"&#x3B4;\",\"&epsilon;\":\"&#x3B5;\",\"&zeta;\":\"&#x3B6;\",\"&eta;\":\"&#x3B7;\",\"&theta;\":\"&#x3B8;\",\"&iota;\":\"&#x3B9;\",\"&kappa;\":\"&#x3BA;\",\"&lambda;\":\"&#x3BB;\",\"&mu;\":\"&#x3BC;\",\"&nu;\":\"&#x3BD;\",\"&xi;\":\"&#x3BE;\",\"&omicron;\":\"&#x3BF;\",\"&pi;\":\"&#x3C0;\",\"&rho;\":\"&#x3C1;\",\"&sigmaf;\":\"&#x3C2;\",\"&sigma;\":\"&#x3C3;\",\"&tau;\":\"&#x3C4;\",\"&upsilon;\":\"&#x3C5;\",\"&phi;\":\"&#x3C6;\",\"&chi;\":\"&#x3C7;\",\"&psi;\":\"&#x3C8;\",\"&omega;\":\"&#x3C9;\",\"&thetasym;\":\"&#x3D1;\",\"&upsih;\":\"&#x3D2;\",\"&piv;\":\"&#x3D6;\",\"&bull;\":\"&#x2022;\",\"&hellip;\":\"&#x2026;\",\"&prime;\":\"&#x2032;\",\"&Prime;\":\"&#x2033;\",\"&oline;\":\"&#x203E;\",\"&frasl;\":\"&#x2044;\",\"&weierp;\":\"&#x2118;\",\"&image;\":\"&#x2111;\",\"&real;\":\"&#x211C;\",\"&trade;\":\"&#x2122;\",\"&alefsym;\":\"&#x2135;\",\"&larr;\":\"&#x2190;\",\"&uarr;\":\"&#x2191;\",\"&rarr;\":\"&#x2192;\",\"&darr;\":\"&#x2193;\",\"&harr;\":\"&#x2194;\",\"&crarr;\":\"&#x21B5;\",\"&lArr;\":\"&#x21D0;\",\"&uArr;\":\"&#x21D1;\",\"&rArr;\":\"&#x21D2;\",\"&dArr;\":\"&#x21D3;\",\"&hArr;\":\"&#x21D4;\",\"&forall;\":\"&#x2200;\",\"&part;\":\"&#x2202;\",\"&exist;\":\"&#x2203;\",\"&empty;\":\"&#x2205;\",\"&nabla;\":\"&#x2207;\",\"&isin;\":\"&#x2208;\",\"&notin;\":\"&#x2209;\",\"&ni;\":\"&#x220B;\",\"&prod;\":\"&#x220F;\",\"&sum;\":\"&#x2211;\",\"&minus;\":\"&#x2212;\",\"&lowast;\":\"&#x2217;\",\"&radic;\":\"&#x221A;\",\"&prop;\":\"&#x221D;\",\"&infin;\":\"&#x221E;\",\"&ang;\":\"&#x2220;\",\"&and;\":\"&#x2227;\",\"&or;\":\"&#x2228;\",\"&cap;\":\"&#x2229;\",\"&cup;\":\"&#x222A;\",\"&int;\":\"&#x222B;\",\"&there4;\":\"&#x2234;\",\"&sim;\":\"&#x223C;\",\"&cong;\":\"&#x2245;\",\"&asymp;\":\"&#x2248;\",\"&ne;\":\"&#x2260;\",\"&equiv;\":\"&#x2261;\",\"&le;\":\"&#x2264;\",\"&ge;\":\"&#x2265;\",\"&sub;\":\"&#x2282;\",\"&sup;\":\"&#x2283;\",\"&nsub;\":\"&#x2284;\",\"&sube;\":\"&#x2286;\",\"&supe;\":\"&#x2287;\",\"&oplus;\":\"&#x2295;\",\"&otimes;\":\"&#x2297;\",\"&perp;\":\"&#x22A5;\",\"&sdot;\":\"&#x22C5;\",\"&lceil;\":\"&#x2308;\",\"&rceil;\":\"&#x2309;\",\"&lfloor;\":\"&#x230A;\",\"&rfloor;\":\"&#x230B;\",\"&lang;\":\"&#x2329;\",\"&rang;\":\"&#x232A;\",\"&loz;\":\"&#x25CA;\",\"&spades;\":\"&#x2660;\",\"&clubs;\":\"&#x2663;\",\"&hearts;\":\"&#x2665;\",\"&diams;\":\"&#x2666;\"};$.replaceHTMLEntityForXML=function(e){return e.replace(/&[a-zA-Z0-9]+;/g,function(e){var x=a[e];return x||(x=\"\"),x})},$.fn.extend({nsmap:function(){var e={};return this.each(function(){for(var a=this;a&&a.attributes;)Array.prototype.forEach.call(a.attributes,function(a){if(\"xmlns\"===a.localName)e[\"\"]||(e[\"\"]=a.value);else if(\"xmlns:\"===a.localName.substring(0,6)){var x=a.localName.substring(6);e[x]||(e[x]=a.value)}}),a=a.parentNode}),e},advattrns:function(e,a,x){e=$.extend(this.nsmap(),e);var r=this[0];prefixes=Object.keys(e).filter(function(x){return\"\"!==x&&e[x]===a});var t=x.split(\":\").slice(-1)[0],i=r.getAttributeNS(a,t);return prefixes.forEach(function(e){i||(i=r.getAttribute(e+\":\"+t.toLocaleLowerCase()))}),!i&&x.split(\":\")>1&&(i=r.getAttribute(x)),null===i?void 0:i},attrns:function(){var e=null,a=null,x=null;switch(arguments.length){case 1:a=arguments[0];break;case 2:e=arguments[0],a=arguments[1];break;case 3:default:e=arguments[0],a=arguments[1],x=arguments[2]}var r=this[0];if(!e)return r.getAttribute(a);var t=[],i=this.nsmap();if(r=this[0],t=Object.keys(i).filter(function(a){return\"\"!==a&&i[a]===e}),null===x||void 0===x){var n=a.split(\":\").slice(-1)[0],s=r.getAttributeNS(e,n);return t.forEach(function(e){s||(s=r.getAttribute(e+\":\"+n.toLocaleLowerCase()))}),!s&&a.split(\":\")>1&&(s=r.getAttribute(a)),null===s?void 0:s}var n=a.split(\":\").slice(-1)[0];return t.forEach(function(e){r.removeAttribute(e+\":\"+n.toLocaleLowerCase())}),!s&&a.split(\":\")>1&&r.removeAttribute(a),r.setAttributeNS(e,a,x),this},xml:function(a){if(0===arguments.length){var x=this.nsmap(),r=new e;return Array.prototype.slice.call($.parseXML(\"<xml \"+Object.keys(x).map(function(e){return e?\"xmlns:\"+e+'=\"'+$.escapeXML(x[e])+'\"':'xmlns=\"'+$.escapeXML(x[e])+'\"'}).join(\" \")+\">\"+$.replaceHTMLEntityForXML(Array.prototype.map.call(this[0].childNodes,function(e){return r.serializeToString(e)}).join(\"\"))+\"</xml>\").documentElement.childNodes,0).map(function(e){return r.serializeToString(e)}).join(\"\")}for(var t=this[0];t.firstChild;)t.removeChild(t.firstChild);return[].slice.call(jQuery.parseXML(\"<xml>\"+code+\"</xml>\").documentElement.childNodes,0).forEach(function(e){t.appendChild(e)}),this}})});"}},"/library/lab.kitty/http_kitty.js":{"url":"/library/lab.kitty/http_kitty.js","content":{"encoding":"text","data":"var async=require(\"../lab.common/async.js\"),uuid=require(\"../lab.common/uuid.js\"),ruler=require(\"../lab.common/ruler.js\"),foundation=require(\"../lab.common/foundation.js\"),CachePool=require(\"../lab.common/cache_pool.js\"),Logger=require(\"../lab.common/logger.js\"),IDLE=\"idle\",WAITING=\"waiting\",WORKING=\"working\",HELD=\"held\",FOLLOWING=\"following\",FOLLOWED=\"followed\",TIMEOUT=\"timeout\",RELEASED=\"released\",postMewToRemote=function e(t,n){t.status===WORKING||t.status===WAITING?t.mewSendQueue.push(n):t.status===IDLE&&(n&&t.mewSendQueue.push(n),t.mewSendQueue.length&&(t.status=WAITING,$.async.delay(100,function(){t.status=WORKING,t.logger.info(\"sending mew to server : \"+t.uri),t.mewSendQueue.sort(function(e,t){return e.time.getTime()-t.time.getTime()}),t.logger.info(t.mewSendQueue),$.request(\"POST\",t.uri,JSON.stringify(t.mewSendQueue),{headers:{\"mew-token\":t.mewToken}},function(n,o,r){var i=r.getResponseHeader(\"mew-token\");i&&(t.mewToken=i),t.status=IDLE,e(t)}),t.mewSendQueue=[],(new Date).getTime()-t.mewCaches.lastClearDate>1e3&&t.mewCaches.clearExpired()})))},startListenFromRemote=function t(e){$.request(\"GET\",e.uri,{},{headers:{\"mew-token\":e.mewToken}},function(n,o,r){var i=r.getResponseHeader(\"mew-token\");if(i&&(e.mewToken=i),e.status=IDLE,o&&Array.isArray(o)){e.logger.info(\"receiving mew from server : \"+e.uri),e.logger.info(o);try{o.forEach(function(t){try{e.onHeardMew(t)}catch(n){}}),e.errorNumber=0}catch(a){e.errorNumber=e.errorNumber+1}}else e.errorNumber=e.errorNumber+1;var s=e.errorNumber>30?3e4:Math.log(e.errorNumber)/Math.log(1.00014);$.async.delay(s,function(){e.closed||t(e)}),(new Date).getTime()-e.mewCaches.lastClearDate>1e3&&e.mewCaches.clearExpired()})},KittyMew=function(e,t,n,o){this.options=foundation.advancedMerge({timeout:{\"!valueType\":\"number\",\"!defaultValue\":5e3},id:{\"!valueType\":\"string\",\"!defaultValue\":uuid.createUUID()},requireReply:{\"!valueType\":\"boolean\",\"!defaultValue\":!1},follow:{\"!valueType\":\"string\"},reply:{\"!valueType\":\"string\"}},o),this.options.time=foundation.formatDate(new Date,\"YYYY-MM-DDThh:mm:ss.SSSZ\"),this.play=e,this.usage=t,this.content=n,Object.defineProperty(this,\"time\",{enumerable:!1,value:new Date}),Object.defineProperty(this.options,\"expiredDate\",{enumerable:!1,value:(new Date).getTime()+this.options.timeout}),[\"repliedActions\",\"amendedActions\",\"replies\",\"amends\"].forEach(function(e){Object.defineProperty(this,e,{enumerable:!1,value:[]})}.bind(this)),Object.defineProperty(this,\"status\",{enumerable:!1,value:WAITING}),this.options.requireReply&&Object.defineProperty(this,\"timeoutSchedule\",{enumerable:!1,value:async.delay(this.options.timeout,function(){var e={usage:\"mew.timeout\",content:{\"mew.timeout\":null},options:{reply:this.options.id}};this.repliedActions.forEach(function(t){t.call({},e)})}.bind(this))})};KittyMew.prototype.replied=function(e){return this.repliedActions.push(e),this.replies.slice(0).forEach(function(t){e.call({},t)}),this},KittyMew.prototype.amended=function(e){return this.amendedActions.push(e),this.amends.slice(0).forEach(function(t){e.call({},t)}),this};var MewContent=function(e){Object.keys(e).forEach(function(t){\"!\"!==t[0]&&(this[t]=e[t])}.bind(this))};MewContent.ensure=function(e,t){if(e instanceof MewContent)return e;if(e&&e[\"!content\"])return new MewContent(e);t||(t=\"mew.unknown\");var n={};return n[t]=e,new MewContent(n)},MewContent.unwrap=function(e){if(e instanceof MewContent){var t={\"!content\":!0};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}return e[\"!content\"]?e:{\"!content\":!0,\"mew.unknown\":e}};var KittyMewReceived=function(e,t){this.play=t.play,this.usage=t.usage,this.content=t.content,this.options=t.options,this.kitty=e;var t=this;Object.defineProperty(this,\"options\",{enumerable:!1,value:foundation.advancedMerge({timeout:{\"!valueType\":\"number\",\"!defaultValue\":5e3},holdTimeout:{\"!valueType\":\"number\"},minHoldTimeout:{\"!valueType\":\"number\",\"!defaultValue\":0}},t.options?t.options:{})}),foundation.isKindOf(t.options.holdTimeout,Number)||(this.options.holdTimeout=t.options.timeout/20),this.options.holdTimeout<t.options.minHoldTimeout&&(this.options.holdTimeout=t.options.minHoldTimeout),this.options.timeout<t.options.holdTimeout&&(this.options.holdTimeout=t.options.timeout),this.options.expiredDate=(new Date).getTime()+this.options.timeout,this.options.holdExpiredDate=(new Date).getTime()+this.options.holdTimeout,Object.defineProperty(this,\"state\",{enumerable:!1,value:WAITING})};Object.defineProperty(KittyMewReceived.prototype,\"getContent\",{enumerable:!1,value:function(){for(var e=this,t=(Object.keys(this.content),0);t<arguments.length;){var n=arguments[t];if(this.content.hasOwnProperty(n))return async(function(){this.next(n,e.content[n])});++t}return async.reject(new Error(\"No data matched preferred types\"))}}),KittyMewReceived.prototype.makeSnapshot=function(){var e=this,t=uuid.createUUID(),n=foundation.advancedMerge({},{play:e.play,usage:e.usage,content:e.content});return Object.defineProperty(n,\"options\",{enumerable:!1,value:foundation.advancedMerge({},{requireReply:e.options.requireReply,holdTimeout:e.options.holdTimeout,holdExpiredDate:e.options.holdExpiredDate,timeout:e.options.timeout,expiredDate:e.options.expiredDate})}),Object.defineProperty(n,\"getContent\",{enumerable:!1,value:function(){for(var t=(Object.keys(n.content),0);t<arguments.length;){var o=arguments[t];if(n.content.hasOwnProperty(o))return async(function(){this.next(o,e.content[o])});++t}return async.reject(new Error(\"No data matched preferred types\"))}}),Object.defineProperty(n,\"hold\",{enumerable:!1,value:function(){var n=void 0,o=void 0;return foundation.isKindOf(arguments[0],Number)&&(n=arguments[0]),foundation.isKindOf(arguments[0],Function)?o=arguments[0]:foundation.isKindOf(arguments[1],Function)&&(o=arguments[1]),e.hold(n,o,!1,t)}}),Object.defineProperty(n.hold,\"thread\",{enumerable:!1,value:function(){var n=void 0,o=void 0;return foundation.isKindOf(arguments[0],Number)&&(n=arguments[0]),foundation.isKindOf(arguments[0],Function)?o=arguments[0]:foundation.isKindOf(arguments[1],Function)&&(o=arguments[1]),e.hold(n,o,!0,t)}}),n},KittyMewReceived.prototype.hold=function(e,t,n,o){var r=this,i=HELD,a=[];t&&a.push(t);var s=null;if(this.state===HELD||this.state===WAITING){var u=(new Date).getTime();(void 0===e||null===e||u+e>this.options.expiredDate)&&(e=this.options.expiredDate-u);var l=this.options.holdExpiredDate;if(this.state===WAITING?this.state=HELD:l=this.options.expiredDate,l>u){s=async.delay(e,function(){s=null;var e=a;a=[],(i===HELD||i===FOLLOWING)&&(i=TIMEOUT,e.forEach(function(e){e.call({follow:d,release:p})}))});var c=foundation.advancedMerge({},{play:{},usage:\"@mew.hold\",content:{\"!content\":!0,\"@mew.hold\":{play:r.play,usage:r.usage,content:r.content,threaded:n,holdID:o}},options:{time:new Date,follow:r.options.id,id:uuid.createUUID(),reply:null}});Object.defineProperty(c,\"time\",{enumerable:!1,value:new Date}),postMewToRemote(r.kitty,c)}else void 0!==e&&null!==e&&(i=TIMEOUT)}var d=function(e,t,u){if(s&&(s.cancel(),s=null),a=[],i===FOLLOWING||n){i=FOLLOWED,u=foundation.advancedMerge({},{},u),u.id||(u.id=uuid.createUUID()),u.follow=r.options.id,u.time=new Date,u.holdID=o;var l=foundation.advancedMerge({},{play:r.play,usage:e,content:t,options:u});if(Object.defineProperty(l,\"time\",{enumerable:!1,value:new Date}),postMewToRemote(r.kitty,l),!n){var c=foundation.advancedMerge({},{play:null,usage:\"@mew.release\",content:{\"!content\":!0,\"@mew.release\":{play:r.play,usage:r.usage,content:r.content,threaded:n,holdID:o}},options:{time:new Date,follow:r.options.id,id:uuid.createUUID()}});Object.defineProperty(c,\"time\",{enumerable:!1,value:new Date}),postMewToRemote(r.kitty,c)}return l}if(i!==TIMEOUT)throw new Error(\"Duplicated reactios is not allowed for one hold\");var h=a;a=[],h.forEach(function(e){e.call({follow:d,release:p})})},p=function(e,t,u){if(s&&(s.cancel(),s=null),a=[],i!==FOLLOWING&&!n)throw new Error(\"Duplicated reactions is not allowed for one hold\");i=RELEASED;var l=foundation.advancedMerge({},{play:null,usage:\"@mew.release\",content:{\"!content\":!0,\"mew.hold\":{play:r.play,usage:r.usage,content:r.content,threaded:n,holdID:o}},options:{time:new Date,follow:r.options.id,id:uuid.createUUID()}});postMewToRemote(r.kitty,l)},h={then:function(e){if(i!==HELD)throw new Error(\"Only one then action could be set currently\");return i=FOLLOWING,e.call({follow:d,release:p}),h},timeout:function(e){return i===TIMEOUT?e.call({follow:d,release:p}):(i===HELD||i===FOLLOWING)&&a.push(e),h}};return h};var HTTPKitty=function(e,t){this.options=foundation.advancedMerge({\"!valueType\":\"object\",\"!defaultValue\":{},defaultMewTimeout:{\"!valueType\":\"number\",\"!defaultValue\":5e3},logLevel:{\"!valueType\":\"string\",\"!defaultValue\":\"error\"},delegate:{\"!valueType\":\"object\",\"!defaultValue\":null}},t);var n=this;this.logger=new Logger({logLevel:this.options.logLevel}),this.interestsIndex={},this.rulebase={},this.ruler=\"simple\",this.uri=e,this.mewToken=null,this.options.delegate?this.delegate=this.options.delegate:this.delegate={},this.sessionContext={},this.closed=!1,this.respondents={},this.connected=!1,this.mewCaches=new CachePool(this.options.defaultMewTimeout),this.mewSendQueue=[],this.errorNumber=0,this.status=IDLE,Object.defineProperty(this,\"mew\",{enumerable:!1,value:function(){var e=null,t=null,n=null,o=null;if(foundation.isKindOf(arguments[0],String)?(t=arguments[0],n=arguments[1],o=arguments[2]):(e=arguments[0],t=arguments[1],n=arguments[2],o=arguments[3]),!/^[a-z0-9_\\.]+$/gim.test(t))throw new Error(\"Invalid usage for mew: \"+t);o||(o={});var r=new KittyMew(e,t,n,o);return(new Date).getTime()-this.mewCaches.lastClearDate>1e3&&this.mewCaches.clearExpired(),this.mewCaches.put(r.options.id,r,2*r.options.timeout),postMewToRemote(this,r),r}}),Object.defineProperty(this,\"heard\",{enumerable:!1,value:function(e,t){var n=this,o=[];e.toString().split(/[,\\s]/g).forEach(function(e){e=e.trim(),e.length>0&&-1===o.indexOf(e)&&o.push(e)});var r=[];t.toString().split(/[,\\s]/g).forEach(function(e){e=e.trim(),e.length>0&&-1===r.indexOf(e)&&r.push(e)});var i=[];o.forEach(function(e){r.forEach(function(t){n.respondents[e]||(n.respondents[e]={}),n.respondents[e][t]||(n.respondents[e][t]=[]),n.respondents[e][t].push(i)})});var a={then:function(e){return i.push(e),a}},s={usages:r,friends:o},u=JSON.stringify(s);if(!n.interestsIndex[u]){n.interestsIndex[u]=s;var l=new KittyMew(null,\"@mew.interests\",{\"!content\":!0,\"@mew.interests\":[s]},{});postMewToRemote(n,l)}return a}}),Object.defineProperty(this.heard,\"hold\",{enumerable:!1,value:function(e,t){var n=null;this.heard(e,t).then(function(e){e.hold().then(function(){n.call(this,e)})});var o={then:function(e){if(n)throw new Error(\"Only one then could be followed currently\");return n=e,o}};return o}.bind(this)}),Object.defineProperty(this.mew,\"rpc\",{enumerable:!1,value:function(){var e=null,t=null,o=null,r=null;foundation.isKindOf(arguments[0],String)?(t=arguments[0],o=arguments[1],r=arguments[2]):(e=arguments[0],t=arguments[1],o=arguments[2],r=arguments[3]);var i;$.isKindOf(o,Object)&&o[\"!content\"]?i=o:(i={\"!content\":!0},i[\"rpc.call.\"+t]=o);var a=n.mew.call(n,e,\"rpc.call.\"+t,i,foundation.merge({requireReply:!0},r?r:{}));return Object.defineProperty(a,\"replied\",{enumerable:!1,value:function(e){return function(n){return 2===n.length&&(n=function(e){return function(n){n.content.hasOwnProperty(\"mew.exception\")?e.call(this,n.content[\"mew.exception\"],null,n):\"mew.ignore\"===n.usage?e.call(this,new Error(\"Mew has been ignored by kitties\"),null,n):\"mew.timeout\"===n.usage?e.call(this,new Error(\"RPC procedure has been timeout\"),null,n):e.call(this,null,n.content[\"rpc.reply.\"+t],n)}}(n)),e.call(this,n)}}(a.replied)}),a}}),Object.defineProperty(this.heard,\"rpc\",{enumerable:!1,value:function(){var e=null,t=null;arguments.length>1?(e=[arguments[0]].join(\" \"),t=[arguments[1]].join(\" \")):(e=\"*\",t=[arguments[0]].join(\" \"));var o=null;n.heard(e,t.split(/[,\\s]+/).map(function(e){return e?\"rpc.call.\"+e.trim():\"\"}).filter(function(e){return e&&e.length>0}).join(\" \")).then(function(e){e.hold().then(function(){r=this;var t=e.usage.split(\".\").slice(2).join(\".\"),n=function(e,t){e?i.error(e):i.reply(t)},i={reply:function(e){if(!e||!e[\"!content\"]){var n={\"!content\":!0};n[\"rpc.reply.\"+t]=e,e=n}r.follow(\"rpc.reply.\"+t,e)},error:function(e){foundation.isKindOf(e,Content)||e&&e[\"!content\"]||(foundation.isKindOf(e,String)&&(e=new Error(e)),foundation.isKindOf(e,Error)?e={\"!content\":!0,\"mew.exception\":{message:e.message,stack:e.stack}}:e&&e[\"!content\"]||(e={\"!content\":!0,\"mew.exception\":e})),r.follow(\"rpc.reply.\"+t,e)}};o.call(i,t,e.content[\"rpc.call.\"+t],n,e)})});var r={then:function(e){if(o)throw new Error(\"Only one then could be followed currently\");return o=e,r}};return r}}),startListenFromRemote(this)};HTTPKitty.prototype.close=function(){this.closed=!0},HTTPKitty.prototype.addRules=function(e){this.rulebase=ruler[this.ruler].addRules(this.rulebase,e);var t=new KittyMew(null,\"@mew.interests\",{\"!content\":!0,\"@mew.rules\":{ruler:this.ruler,rules:e}},{});return postMewToRemote(this,t),this.rules},Object.defineProperty(HTTPKitty.prototype,\"executeDelegate\",{enumerable:!1,value:function(e){e&&foundation.isKindOf(this.delegate[e],Function)&&this.delegate[e].apply(this,Array.prototype.slice.call(arguments,1))}}),Object.defineProperty(HTTPKitty.prototype,\"onHeardMew\",{enumerable:!1,value:function(e){var t=this,n=!1;if(\"@\"==e.usage[0]&&(n=!0),n)switch(e.usage){case\"@connection.reset\":if(t.connected){t.executeDelegate(\"didConnectionReset\",t.mewToken);var o=[],r=ruler[t.ruler].exportRules(t.rulebase);if(Object.keys(t.interestsIndex).forEach(function(e){var n=t.interestsIndex[e];o.push(n)}),o.length||r.length){var i=new KittyMew(null,\"@mew.interests\",{\"!content\":!0,\"@mew.interests\":o,\"@mew.rules\":{rules:r,ruler:t.ruler}},{});postMewToRemote(t,i)}}else t.executeDelegate(\"didConnectionConnected\",t.mewToken),t.connected=!0;break;case\"@mew.reply\":var a=e.content[\"@mew.reply\"];if(foundation.isKindOf(a.options.reply,String)&&(replyToMew=t.mewCaches.get(a.options.reply),replyToMew)){var s=(new Date).getTime()>replyToMew.options.expiredDate;s?replyToMew.amendedActions.forEach(function(e){e.call({},a)}):(replyToMew.timeoutSchedule&&replyToMew.timeoutSchedule.cancel(),replyToMew.repliedActions.forEach(function(e){e.call({},a)}))}}else{var u=[];t.respondents.hasOwnProperty(\"*\")&&u.push(t.respondents[\"*\"]),e.from.split(\".\").forEach(function(n,o,r){if(o!==r.length-1){var i=r.slice(0,o+1).join(\".\")+\".*\";t.respondents.hasOwnProperty(i)&&u.push(t.respondents[i])}else t.respondents.hasOwnProperty(e.from)&&u.push(t.respondents[e.from])});var l=[];u.forEach(function(t){t.hasOwnProperty(\"*\")&&t[\"*\"].forEach(function(e){e.forEach(function(e){-1===l.indexOf(e)&&l.push(e)})}),e.usage.split(\".\").forEach(function(n,o,r){if(o!==r.length-1){var i=r.slice(0,o+1).join(\".\")+\".*\";t.hasOwnProperty(i)&&t[i].forEach(function(e){e.forEach(function(e){-1===l.indexOf(e)&&l.push(e)})})}else t.hasOwnProperty(e.usage)&&t[e.usage].forEach(function(e){e.forEach(function(e){-1===l.indexOf(e)&&l.push(e)})})})});var c=new KittyMewReceived(t,e);l.forEach(function(e){e.call(t,c.makeSnapshot())})}}}),module.exports=HTTPKitty;"}},"/library/lab.module/index.js":{"url":"/library/lab.module/index.js","content":{"encoding":"text","data":"!function(){Object.defineProperty(this.constructor.prototype,\"global\",{enumerable:!0,get:function(){return this}}),Object.defineProperty(global,\"Global\",{enumerable:!0,value:global.constructor});var e=function(e){e=parseInt(e),isFinite(e)||(e=0);try{var t=new Error(\"937b84bb-7953-4443-be30-34ba130b98e7\").stack.split(\"\\n\"),n=null;return n=-1!==t[0].indexOf(\"937b84bb-7953-4443-be30-34ba130b98e7\")?t[2+e]:t[1+e],\"    at \"===n.substring(0,7)?n=n.split(\"at\").slice(1).join(\"at\"):(n=n.split(\"@\"),n=n.length>1?n.slice(1).join(\"@\"):n[0]),\")\"===n[n.length-1]&&(n=n.split(\"(\").slice(1).join(\"(\").slice(0,-1)),n.trim()}catch(r){return\"lab://unknown-file:NaN:NaN\"}};Object.defineProperty(Global.prototype,\"__dirname\",{enumerable:!1,configurable:!1,get:function(){return e(1).split(\":\").slice(0,-2).join(\":\").split(\"/\").slice(0,-1).join(\"/\")}}),Object.defineProperty(Global.prototype,\"__filename\",{enumerable:!1,configurable:!1,get:function(){return e(1).split(\":\").slice(0,-2).join(\":\")}}),Object.defineProperty(Global.prototype,\"__line\",{enumerable:!1,configurable:!1,get:function(){return parseInt(e(1).split(\":\").slice(-2,-1)[0])}}),Object.defineProperty(Global.prototype,\"__column\",{enumerable:!1,configurable:!1,get:function(){return parseInt(e(1).split(\":\").slice(-1)[0])}});var t={},n=(__filename.split(\"/\").slice(0,3).join(\"/\"),{}),r=function(e,o,i,l){var s=this;if(i&&(t[o]=this),this.parent=e,this.id=o,this.filename=o,this.loaded=!1,this.children=[],this.exports={},this.require=function(e,t){if(\".\"===e[0]&&(e=this.id.split(\"/\").slice(0,-1).join(\"/\")+\"/\"+e),!n[e]){var o=null;-1!==e.indexOf(\"://\")?(o=[e.split(\"/\").slice(0,3).join(\"/\")],e=\"/\"+e.split(\"/\").slice(3).join(\"/\")):o=[this.id.split(\"/\").slice(0,3).join(\"/\")],e=e.replace(/\\/+/gm,\"/\").split(\"/\"),\"/\"===e[0]&&(e=e.slice(1)),e.forEach(function(e){if(\"..\"===e){if(!(o.length>1))throw new Error(\"Invalid path to resolve for module require\");o.pop()}else\".\"===e||0===e.length||o.push(e)}),e=o.join(\"/\")}return r.get(this,e,t).exports}.bind(this),global.document&&(0!==Array.prototype.filter.call(document.querySelectorAll(\"script\"),function(e){return e.src===o}).length||document.documentURI.split(\"#\")[0].split(\"?\")[0]===o)||n[o])n[o]=!0;else{n[o]=!0;var a=function(e){global[function(){return\"eval\"}()](\"(function () { return function (module, require, exports, __filename, __diranme) {\"+e+\"}; })(); //@ sourceURL=\"+o)(s,s.require,s.exports,s.id,s.id.split(\"/\").slice(0,-1).join(\"/\"),s.exports)};if(global.$&&global.$.loadResources&&(l||global.$.isResourceCached(o)))global.$.loadResources(o,function(e,t){e?l&&l(e):(a(t[o]),l&&l(null,s.exports))});else{var c=new XMLHttpRequest;l&&c.addEventListener(\"readystatechange\",function(){if(4===c.readyState)switch(c.status%100){case 0:case 2:a(c.responseText),l(null,s.exports);break;default:l(new Error(\"Failed to module \"+path))}}),c.open(\"GET\",o,l?!0:!1),c.send(),l||a(c.responseText)}}};r.get=function(e,n,o){return t.hasOwnProperty(n)?(o&&o(null,t[n].exports),t[n]):(null===e&&(e=t[__filename]),new r(e,n,!0,o))},r._extensions={};var o=function(t,n){var o=e(1+n).split(\":\").slice(0,-2).join(\":\");return o?r.get(t,o):c};Object.defineProperty(Global.prototype,\"module\",{enumerable:!1,configurable:!1,get:function(){return o(null,1)}}),Object.defineProperty(Global.prototype,\"require\",{enumerable:!1,configurable:!1,get:function(){return o(null,1).require}}),Object.defineProperty(Global.prototype,\"exports\",{enumerable:!1,configurable:!1,get:function(){return o(null,1).exports},set:function(e){o(null,1).exports=e}});var i=function(e,t){n[e]=!0;var o=new r(module,e,!0);Object.keys(t).forEach(function(e){o.exports[e]=t[e]})},l=function(){throw new Error(\"Not implemented\")},s=function(){arguments[arguments.length-1](new Error(\"Not implemented\"))},a=global.document.documentURI.split(\"#\")[0].split(\"?\")[0],c=r.get(null,a),u=(new Date).getTime();i(\"module\",r),i(\"os\",{tmpdir:function(){return null},endianness:function(){return\"BE\"},type:function(){return\"browser\"},hostname:function(){return\"browser\"},platform:function(){return\"browser\"},arch:function(){return\"js\"},release:function(){return\"0.1.0\"},uptime:function(){return((new Date).getTime()-u)/1e3},loadavg:function(){return[0,0,0]},totalmem:function(){return 1/0},freemem:function(){return 1/0},cpus:function(){return[{model:\"Browser Javascript CPU\",speed:1/0,times:{user:0,nice:0,sys:0,idle:0,irq:0}}]}}),i(\"path\",{normalize:function(e){var t=e.split(\"://\");return t.length>1?t[0]+\"://\"+t.slice(1).join(\"://\").replace(/\\/+/g,\"/\").replace(/\\/.\\//g,\"/\").replace(/\\/[^\\/]\\/..\\//g,\"/\"):t.join(\"://\").replace(/\\/+/g,\"/\").replace(/\\/.\\//g,\"/\").replace(/\\/[^\\/]\\/..\\//g,\"/\")},join:function(){return this.normalize(Array.prototype.join.call(arguments,\"/\"))},resolve:function(){for(var e=null,t=0;t<arguments.length;)e=-1!==arguments[t].indexOf(\"://\")?arguments[t]:e+\"/\"+arguments[t],++t;return this.normalize(e)},isAbsolute:function(e){return-1!==arguments[looper].indexOf(\"://\")},relative:function(e,t){if(basePathComponents=e.split(\"/\"),pathComponents=t.split(\"/\"),pathComponents[0]!==basePathComponents[0]||pathComponents[1]!==basePathComponents[1]||pathComponents[2]!==basePathComponents[2])return t;for(var n=3;n<basePathComponents.length&&pathComponents[n]===basePathComponents[n];)++n;for(var r=[];n<pathComponents.length;)n<basePathComponents.length&&r.unshift(\"..\"),r.push(pathComponents[n]),++n;return r.join(\"/\")},dirname:function(e){return e.split(\"/\").slice(0,-1).join(\"/\")},basename:function(e,t){var n=e.split(\"/\").slice(-1)[0];return t&&n.substring(n.length-t.length,n.length)===t&&(n=n.substring(n.length-t.length)),n},extname:function(e){var t=e.split(\"/\").slice(-1)[0].split(\".\");return t.length>1&&(t[0].length>0||t.length>2)?t[t.length-1]:\"\"},sep:\"/\",delimiter:\":\"}),i(\"fs\",{Stats:l,FSWatcher:l,ReadStream:l,WriteStream:l,exists:function(e,t){t(!1)},existsSync:function(e){return!1},readFile:s,readFileSync:l,writeFile:s,writeFileSync:l,truncate:s,truncateSync:l,unlink:s,unlinkSync:l,stat:s,statSync:l,lstat:s,lstatSync:l,readdir:s,readdirSync:l,mkdir:s,mkdirSync:l,rmdir:s,rmdirSync:l,rename:s,renameSync:l,link:s,linkSync:l,symlink:s,symlinkSync:l,readlink:s,readlinkSync:l,chmod:s,chmodSync:l,lchmod:s,lchmodSync:l,chown:s,chownSync:l,lchown:s,lchownSync:l,access:s,accessSync:l,utimes:s,utimesSync:l,realpath:s,realpathSync:l,open:s,openSync:l,read:s,readSync:l,write:s,writeSync:l,close:s,closeSync:l,append:s,appendSync:l,ftruncate:s,ftruncateSync:l,fstat:s,fstatSync:l,fsync:s,fsyncSync:l,fchmod:s,fchmodSync:l,fchown:s,fchownSync:l,futimes:s,futimesSync:l,createReadStream:l,createWriteStream:l,watch:l,watchFile:l,unwatchFile:l});var p=a.split(\"/\").slice(0,-1).join(\"/\"),f=0,m=\"deb93a6f-d613-44f5-b82c-c58e8b0a3e2f\",d=[];window.addEventListener(\"message\",function(e){e.source===window&&e.data&&e.data.signature===m&&e.stopPropagation();var t=d;d=[],t.forEach(function(e){try{e.job.apply(window,e.arguments)}catch(t){global.$&&global.$.reportError?global.$.reportError(t):setTimeout(function(){throw t})}})}),i(\"<anonymous>\",{}),i(\"process\",{cwd:function(){return p},chdir:l,exit:l,kill:l,abort:l,umask:511,getgid:function(){return 0},getuid:function(){return 0},setgid:l,setuid:l,hrtime:function(){var e=(new Date).getTime(),t=(e-f)/1e3;return f=e,[Math.floor(t),t-Math.floor(t)]},uptime:function(){return((new Date).getTime()-u)/1e3},nextTick:function(e){d.push({job:e,arguments:[].slice.call(arguments,1)}),window.postMessage({signature:m},\"*\")},getgroups:l,setgroups:l,initgroups:l,memoryUsage:l,env:{HOME:p},pid:0,arch:\"js\",platform:\"browser\",title:\"browser\",version:\"0.1.0\",argv:[\"browser\",a],execArgv:[],execPath:\"browser\",stdin:null,stderr:null,stdout:null,exitCode:0,config:{},versions:{},mainModule:c.exports}),global.process=t.process.exports}();"}},"/library/lab.module/ready.js":{"url":"/library/lab.module/ready.js","content":{"encoding":"text","data":"$(function(){var o,t=\"/mewchan.ui\";o=$.uiKittyBURL?$.uiKittyBURL:window.location.protocol+\"//\"+window.location.hostname+(window.location.port?\":\"+window.location.port:\"\")+t,$.uiKitty=new $.HTTPKittyClient(o,{logLevel:\"info\"}),$.uiReadyStatus=\"READY\",$.uiReadyListeners.forEach(function(o){try{o($.uiKitty)}catch(t){console.log(t)}})});"}},"/admin/app/appinfo.json":{"url":"/admin/app/appinfo.json","content":{"encoding":"json","data":"{\"application\":{\"name\":\"CoolCTO\",\"language\":\"\",\"version\":\"0.1\",\"lastUpdate\":\"2015-10-15\"}}"}},"/admin/bottom/_common/data.json":{"url":"/admin/bottom/_common/data.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/_common/script.js":{"url":"/admin/bottom/_common/script.js","content":{"encoding":"text","data":"module.exports={didEnterForestage:function(){$admin.adjustUI()}};"}},"/admin/bottom/_common/style.css":{"url":"/admin/bottom/_common/style.css","content":{"encoding":"text","data":".storyboard {\n\tz-index: 1000;\n}\n"}},"/admin/bottom/hideTab/data.json":{"url":"/admin/bottom/hideTab/data.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/hideTab/en_us.lang.json":{"url":"/admin/bottom/hideTab/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/hideTab/index.xhtml":{"url":"/admin/bottom/hideTab/index.xhtml","content":{"encoding":"text","data":""}},"/admin/bottom/hideTab/script.js":{"url":"/admin/bottom/hideTab/script.js","content":{"encoding":"text","data":"var loadData=function(e,t){},initPage=function(){},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage};"}},"/admin/bottom/hideTab/style.css":{"url":"/admin/bottom/hideTab/style.css","content":{"encoding":"text","data":".storyboard-page {\n  display: none; }\n"}},"/admin/bottom/loginFooter/data.json":{"url":"/admin/bottom/loginFooter/data.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/loginFooter/en_us.lang.json":{"url":"/admin/bottom/loginFooter/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/loginFooter/index.xhtml":{"url":"/admin/bottom/loginFooter/index.xhtml","content":{"encoding":"text","data":"\n<div class=\"push-10-t text-center animated fadeInUp\">\n    <small class=\"text-muted font-w600\"><span class=\"js-year-copy\">2015</span> © ${application.name}</small>\n</div>\n"}},"/admin/bottom/loginFooter/script.js":{"url":"/admin/bottom/loginFooter/script.js","content":{"encoding":"text","data":"var loadData=function(e,a){},initPage=function(){},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,willEnterForestage:function(){$(\"#main-container\").addClass(\"not-adjustable\")}};"}},"/admin/bottom/loginFooter/style.css":{"url":"/admin/bottom/loginFooter/style.css","content":{"encoding":"text","data":".storyboard-page {\n    \n}\n"}},"/admin/bottom/mainFooter/data.json":{"url":"/admin/bottom/mainFooter/data.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/mainFooter/en_us.lang.json":{"url":"/admin/bottom/mainFooter/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/mainFooter/index.xhtml":{"url":"/admin/bottom/mainFooter/index.xhtml","content":{"encoding":"text","data":"\n<footer id=\"page-footer\" class=\"content-mini content-mini-full font-s12 bg-gray-lighter clearfix\">\n    <div class=\"pull-right\">\n        Powered <i class=\"fa fa-heart text-city\"></i> by <a class=\"font-w600\" href=\"http://www.coolcto.com\" target=\"_blank\">CoolCTO</a>\n    </div>\n    <div class=\"pull-left\">\n    <a class=\"font-w600\" href=\"javascript:void(0)\" tmpl:on-click=\"goHomepage()\" >${application.name}</a> © <span class=\"js-year-copy\">2015</span>\n    </div>\n</footer>\n"}},"/admin/bottom/mainFooter/script.js":{"url":"/admin/bottom/mainFooter/script.js","content":{"encoding":"text","data":"var loadData=function(e,a){},initPage=function(){},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage,willEnterForestage:function(){$(\"#main-container\").removeClass(\"not-adjustable\"),$lHeader=jQuery(\"#header-navbar\"),$lMain=jQuery(\"#main-container\"),$lFooter=jQuery(\"#page-footer\");var e=$(\"#page-container\"),a=jQuery(window).height(),t=$lHeader.outerHeight(),n=$lFooter.outerHeight();e.hasClass(\"header-navbar-fixed\")?$lMain.css(\"min-height\",a-n):$lMain.css(\"min-height\",a-(t+n))}};"}},"/admin/bottom/mainFooter/style.css":{"url":"/admin/bottom/mainFooter/style.css","content":{"encoding":"text","data":""}},"/admin/bottom/mainTab/data.json":{"url":"/admin/bottom/mainTab/data.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/mainTab/en_us.lang.json":{"url":"/admin/bottom/mainTab/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/bottom/mainTab/index.xhtml":{"url":"/admin/bottom/mainTab/index.xhtml","content":{"encoding":"text","data":""}},"/admin/bottom/mainTab/script.js":{"url":"/admin/bottom/mainTab/script.js","content":{"encoding":"text","data":"var loadData=function(e,t){},initPage=function(){},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage,didEnterForestage:function(){}};"}},"/admin/bottom/mainTab/style.css":{"url":"/admin/bottom/mainTab/style.css","content":{"encoding":"text","data":".storyboard-page {\n  width: 100%;\n  height: 60px;\n  bottom: 0px;\n  border-top: 1px #ababab solid;\n  z-index: 1000;\n  overflow: hidden; }\n\n.tabbarItem {\n  margin-top: 2px;\n  position: relative;\n  float: left;\n  width: 20%;\n  height: 60px;\n  text-align: center;\n  line-height: 60px; }\n\nimg {\n  width: 100%;\n  height: 50px;\n  margin-top: 2px; }\n\n.Tabbar-item-name {\n  display: none;\n  margin-top: -62px;\n  height: 10px;\n  width: 100%;\n  color: gray; }\n\n.Tabbbar-item-name-sel {\n  color: #51D1A6; }\n"}},"/admin/content/_common/data.json":{"url":"/admin/content/_common/data.json","content":{"encoding":"json","data":"{}"}},"/admin/content/_common/script.js":{"url":"/admin/content/_common/script.js","content":{"encoding":"text","data":"module.exports={willEnterForestage:function(){var e=this.page;$admin.adjustUI(this.page),e.$(\".js-summernote-air\").summernote({airMode:!0}),e.$(\".js-summernote\").summernote({height:350,minHeight:null,maxHeight:null})},hasSession:function(e){return $admin.sessions&&$admin.sessions.indexOf(e)>=0},timestamp:function(){return Date.now()}};"}},"/admin/content/_common/style.css":{"url":"/admin/content/_common/style.css","content":{"encoding":"text","data":".storyboard {\n\twidth: 100%; \n}\n"}},"/admin/content/blank/data.json":{"url":"/admin/content/blank/data.json","content":{"encoding":"json","data":"{}"}},"/admin/content/blank/en_us.lang.json":{"url":"/admin/content/blank/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/content/blank/index.xhtml":{"url":"/admin/content/blank/index.xhtml","content":{"encoding":"text","data":"<div class=\"content bg-gray-lighter\">\n    <div class=\"row items-push\">\n        <div class=\"col-sm-7\">\n            <h1 class=\"page-heading\">\n                Blank\n                <small>That feeling of delight when you start your awesome new project!</small>\n            </h1>\n        </div>\n        <div class=\"col-sm-5 text-right hidden-xs\">\n            <ol class=\"breadcrumb push-10-t\">\n                <li>Generic</li>\n                <li><a class=\"link-effect\" href=\"\">Blank</a></li>\n            </ol>\n        </div>\n    </div>\n    <div class=\"row\">\n        <textarea style=\"width: 100%;height:350px;\"  class=\"markdown-editor\" name=\"wtf\" ></textarea>\n    </div>\n</div>\n"}},"/admin/content/blank/script.js":{"url":"/admin/content/blank/script.js","content":{"encoding":"text","data":"var initPage=function(){},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage};"}},"/admin/content/blank/style.css":{"url":"/admin/content/blank/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}\n\n.slick-slider{position:relative;display:block;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-ms-touch-action:pan-y;touch-action:pan-y;-webkit-tap-highlight-color:transparent}.slick-list{position:relative;display:block;overflow:hidden;margin:0;padding:0}.slick-list:focus{outline:0}.slick-list.dragging{cursor:pointer;cursor:hand}.slick-slider .slick-list,.slick-slider .slick-track{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.slick-track{position:relative;top:0;left:0;display:block}.slick-track:after,.slick-track:before{display:table;content:''}.slick-track:after{clear:both}.slick-loading .slick-track{visibility:hidden}.slick-slide{display:none;float:left;height:100%;min-height:1px}[dir=rtl] .slick-slide{float:right}.slick-slide img{display:block}.slick-slide.slick-loading img{display:none}.slick-slide.dragging img{pointer-events:none}.slick-initialized .slick-slide{display:block}.slick-loading .slick-slide{visibility:hidden}.slick-vertical .slick-slide{display:block;height:auto;border:1px solid transparent}\n\n@charset 'UTF-8';.slick-loading .slick-list{background:url(./ajax-loader.gif) center center no-repeat #fff}@font-face{font-family:slick;font-weight:400;font-style:normal;src:url(./fonts/slick.eot);src:url(./fonts/slick.eot?#iefix) format('embedded-opentype'),url(./fonts/slick.woff) format('woff'),url(./fonts/slick.ttf) format('truetype'),url(./fonts/slick.svg#slick) format('svg')}.slick-next,.slick-prev{font-size:0;line-height:0;position:absolute;top:50%;display:block;width:20px;height:20px;margin-top:-10px;padding:0;cursor:pointer;color:transparent;border:none;outline:0;background:0 0}.slick-next:focus,.slick-next:hover,.slick-prev:focus,.slick-prev:hover{color:transparent;outline:0;background:0 0}.slick-next:focus:before,.slick-next:hover:before,.slick-prev:focus:before,.slick-prev:hover:before{opacity:1}.slick-next.slick-disabled:before,.slick-prev.slick-disabled:before{opacity:.25}.slick-next:before,.slick-prev:before{font-family:slick;font-size:20px;line-height:1;opacity:.75;color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-prev{left:-25px}[dir=rtl] .slick-prev{right:-25px;left:auto}.slick-prev:before{content:'←'}[dir=rtl] .slick-prev:before{content:'→'}.slick-next{right:-25px}[dir=rtl] .slick-next{right:auto;left:-25px}.slick-next:before{content:'→'}[dir=rtl] .slick-next:before{content:'←'}.slick-slider{margin-bottom:30px}.slick-dots{position:absolute;bottom:-45px;display:block;width:100%;padding:0;list-style:none;text-align:center}.slick-dots li{position:relative;display:inline-block;width:20px;height:20px;margin:0 5px;padding:0;cursor:pointer}.slick-dots li button{font-size:0;line-height:0;display:block;width:20px;height:20px;padding:5px;cursor:pointer;color:transparent;border:0;outline:0;background:0 0}.slick-dots li button:focus,.slick-dots li button:hover{outline:0}.slick-dots li button:focus:before,.slick-dots li button:hover:before{opacity:1}.slick-dots li button:before{font-family:slick;font-size:6px;line-height:20px;position:absolute;top:0;left:0;width:20px;height:20px;content:'•';text-align:center;opacity:.25;color:#000;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-dots li.slick-active button:before{opacity:.75;color:#000}\n"}},"/admin/content/forum/data.json":{"url":"/admin/content/forum/data.json","content":{"encoding":"json","data":"{}"}},"/admin/content/forum/en_us.lang.json":{"url":"/admin/content/forum/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/content/forum/index.xhtml":{"url":"/admin/content/forum/index.xhtml","content":{"encoding":"text","data":"<div class=\"\">\n    <!-- END Breadcrumb -->\n\n    <!-- Topics Block -->\n    <div class=\"block\">\n        <!--\n        <div class=\"block-header bg-gray-lighter\">\n            <ul class=\"block-options\">\n                <li>\n                    <button type=\"button\" data-toggle=\"block-option\" data-action=\"fullscreen_toggle\"><i class=\"si si-size-fullscreen\"></i></button>\n                </li>\n                <li>\n                    <button type=\"button\" data-toggle=\"block-option\" data-action=\"refresh_toggle\" data-action-mode=\"demo\"><i class=\"si si-refresh\"></i></button>\n                </li>\n            </ul>\n            <ul class=\"block-options block-options-left\">\n                <li>\n                    <a href=\"base_pages_forum_new_topic.html\"><i class=\"fa fa-plus\"></i> New Topic</a>\n                </li>\n            </ul>\n        </div>\n        -->\n\n        <div class=\"block-content\">\n            <!-- Topics -->\n            <table class=\"table table-striped table-borderless table-vcenter\">\n                <thead>\n                    <tr>\n                        <th colspan=\"2\">\n                            <x:lang>Title</x:lang>\n                        </th>\n                        <th class=\"text-center hidden-xs hidden-sm\" style=\"width: 100px;\">\n                            <x:lang>Replies</x:lang>\n                        </th>\n                        <th class=\"text-center hidden-xs hidden-sm\" style=\"width: 100px;\">\n                            <x:lang>Views</x:lang>\n                        </th>\n                        <th class=\"hidden-xs hidden-sm\" style=\"width: 200px;\">\n                            <x:lang>Last Post</x:lang>\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td class=\"text-center\" style=\"width: 75px;\">\n                            <i class=\"si si-pin fa-2x\"></i>\n                        </td>\n                        <td>\n                            <h4 class=\"h5 font-w600 push-5\">\n                                <a href=\"base_pages_forum_discussion.html\">Welcome to our forums!</a>\n                            </h4>\n                            <div class=\"font-s13 text-muted\">\n                                <a href=\"base_pages_profile.html\">Donald Barnes</a> on\n                                <em>June 20, 2015</em>\n                            </div>\n                        </td>\n                        <td class=\"text-center hidden-xs hidden-sm\">\n                            <a class=\"font-w600\" href=\"javascript:void(0)\">136</a>\n                        </td>\n                        <td class=\"text-center hidden-xs hidden-sm\">\n                            <a class=\"font-w600\" href=\"javascript:void(0)\">650</a>\n                        </td>\n                        <td class=\"hidden-xs hidden-sm\">\n                            <span class=\"font-s13\">by <a href=\"base_pages_profile.html\">Amy Hunter</a>\n                                <br />July 21, 2015</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan=\"2\">\n                            <h4 class=\"h5 font-w600 push-5\">\n                                <a href=\"base_pages_forum_discussion.html\">2015, all the new features!</a>\n                            </h4>\n                            <div class=\"font-s13 text-muted\">\n                                <a href=\"base_pages_profile.html\">Sara Holland</a> on\n                                <em>July 21, 2015</em>\n                            </div>\n                        </td>\n                        <td class=\"text-center hidden-xs hidden-sm\">\n                            <a class=\"font-w600\" href=\"javascript:void(0)\">85</a>\n                        </td>\n                        <td class=\"text-center hidden-xs hidden-sm\">\n                            <a class=\"font-w600\" href=\"javascript:void(0)\">632</a>\n                        </td>\n                        <td class=\"hidden-xs hidden-sm\">\n                            <span class=\"font-s13\">by <a href=\"base_pages_profile.html\">Susan Elliott</a>\n                                <br />July 13, 2015</span>\n                        </td>\n                    </tr>\n\n                </tbody>\n            </table>\n            <!-- END Topics -->\n\n            <!-- Pagination -->\n            <nav class=\"text-right\">\n                <ul class=\"pagination\">\n                    <li class=\"active\">\n                        <a href=\"javascript:void(0)\">1</a>\n                    </li>\n                    <li>\n                        <a href=\"javascript:void(0)\">2</a>\n                    </li>\n                    <li class=\"disabled\">\n                        <span>...</span>\n                    </li>\n                    <li>\n                        <a href=\"javascript:void(0)\">11</a>\n                    </li>\n                    <li>\n                        <a href=\"javascript:void(0)\">12</a>\n                    </li>\n                    <li>\n                        <a href=\"javascript:void(0)\"><i class=\"fa fa-angle-right\"></i></a>\n                    </li>\n                    <li>\n                        <a href=\"javascript:void(0)\"><i class=\"fa fa-angle-double-right\"></i></a>\n                    </li>\n                </ul>\n            </nav>\n            <!-- END Pagination -->\n        </div>\n    </div>\n    <!-- END Topics Block -->\n</div>\n"}},"/admin/content/forum/script.js":{"url":"/admin/content/forum/script.js","content":{"encoding":"text","data":"var initPage=function(){},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage};"}},"/admin/content/forum/style.css":{"url":"/admin/content/forum/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}\n\n.slick-slider{position:relative;display:block;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-ms-touch-action:pan-y;touch-action:pan-y;-webkit-tap-highlight-color:transparent}.slick-list{position:relative;display:block;overflow:hidden;margin:0;padding:0}.slick-list:focus{outline:0}.slick-list.dragging{cursor:pointer;cursor:hand}.slick-slider .slick-list,.slick-slider .slick-track{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.slick-track{position:relative;top:0;left:0;display:block}.slick-track:after,.slick-track:before{display:table;content:''}.slick-track:after{clear:both}.slick-loading .slick-track{visibility:hidden}.slick-slide{display:none;float:left;height:100%;min-height:1px}[dir=rtl] .slick-slide{float:right}.slick-slide img{display:block}.slick-slide.slick-loading img{display:none}.slick-slide.dragging img{pointer-events:none}.slick-initialized .slick-slide{display:block}.slick-loading .slick-slide{visibility:hidden}.slick-vertical .slick-slide{display:block;height:auto;border:1px solid transparent}\n\n@charset 'UTF-8';.slick-loading .slick-list{background:url(./ajax-loader.gif) center center no-repeat #fff}@font-face{font-family:slick;font-weight:400;font-style:normal;src:url(./fonts/slick.eot);src:url(./fonts/slick.eot?#iefix) format('embedded-opentype'),url(./fonts/slick.woff) format('woff'),url(./fonts/slick.ttf) format('truetype'),url(./fonts/slick.svg#slick) format('svg')}.slick-next,.slick-prev{font-size:0;line-height:0;position:absolute;top:50%;display:block;width:20px;height:20px;margin-top:-10px;padding:0;cursor:pointer;color:transparent;border:none;outline:0;background:0 0}.slick-next:focus,.slick-next:hover,.slick-prev:focus,.slick-prev:hover{color:transparent;outline:0;background:0 0}.slick-next:focus:before,.slick-next:hover:before,.slick-prev:focus:before,.slick-prev:hover:before{opacity:1}.slick-next.slick-disabled:before,.slick-prev.slick-disabled:before{opacity:.25}.slick-next:before,.slick-prev:before{font-family:slick;font-size:20px;line-height:1;opacity:.75;color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-prev{left:-25px}[dir=rtl] .slick-prev{right:-25px;left:auto}.slick-prev:before{content:'←'}[dir=rtl] .slick-prev:before{content:'→'}.slick-next{right:-25px}[dir=rtl] .slick-next{right:auto;left:-25px}.slick-next:before{content:'→'}[dir=rtl] .slick-next:before{content:'←'}.slick-slider{margin-bottom:30px}.slick-dots{position:absolute;bottom:-45px;display:block;width:100%;padding:0;list-style:none;text-align:center}.slick-dots li{position:relative;display:inline-block;width:20px;height:20px;margin:0 5px;padding:0;cursor:pointer}.slick-dots li button{font-size:0;line-height:0;display:block;width:20px;height:20px;padding:5px;cursor:pointer;color:transparent;border:0;outline:0;background:0 0}.slick-dots li button:focus,.slick-dots li button:hover{outline:0}.slick-dots li button:focus:before,.slick-dots li button:hover:before{opacity:1}.slick-dots li button:before{font-family:slick;font-size:6px;line-height:20px;position:absolute;top:0;left:0;width:20px;height:20px;content:'•';text-align:center;opacity:.25;color:#000;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-dots li.slick-active button:before{opacity:.75;color:#000}\n"}},"/admin/content/login-forget-password/data.json":{"url":"/admin/content/login-forget-password/data.json","content":{"encoding":"json","data":"{}"}},"/admin/content/login-forget-password/en_us.lang.json":{"url":"/admin/content/login-forget-password/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/content/login-forget-password/index.xhtml":{"url":"/admin/content/login-forget-password/index.xhtml","content":{"encoding":"text","data":"<div class=\"content overflow-hidden\">\n    <div class=\"row\">\n        <div class=\"col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4\">\n            <!-- Reminder Block -->\n            <div class=\"block block-themed animated fadeIn\">\n                <div class=\"block-header bg-primary\">\n                    <ul class=\"block-options\">\n                        <li>\n                            <a tmpl:on-click=\"goBackward()\" data-toggle=\"tooltip\" data-placement=\"left\" title=\"\" data-original-title=\"Log In\"><i class=\"si si-login\"></i></a>\n                        </li>\n                    </ul>\n                    <h3 class=\"block-title\"><x:lang>忘记密码</x:lang></h3>\n                </div>\n                <div class=\"block-content block-content-full block-content-narrow\">\n                    <!-- Reminder Title -->\n                    <h1 class=\"h2 font-w600 push-30-t push-5\">${application.name}</h1>\n                    <p><x:lang>请填写您的邮箱, 我们会发送密码重置邮件给您.</x:lang></p>\n                    <!-- END Reminder Title -->\n\n                    <!-- Reminder Form -->\n                    <!-- jQuery Validation (.js-validation-reminder class is initialized in js/pages/base_pages_reminder.js) -->\n                    <!-- For more examples you can check out https://github.com/jzaefferer/jquery-validation -->\n                    <form   class=\"js-validation-reminder form-horizontal push-30-t push-50\" action=\"javascript:void(0)\" method=\"post\" novalidate=\"novalidate\">\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-primary floating\">\n                                    <input class=\"form-control\" type=\"email\" id=\"reminder-email\" name=\"reminder-email\" />\n                                    <label for=\"reminder-email\"><x:lang>邮箱</x:lang></label>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12 col-sm-6 col-md-5\">\n                                <button tmpl:on-submit=\"onForgetBtnClick()\" class=\"btn btn-block btn-primary\" type=\"submit\"><i class=\"si si-envelope-open pull-right\"></i> <x:lang>发送邮件</x:lang></button>\n                            </div>\n                        </div>\n                    </form>\n                    <!-- END Reminder Form -->\n                </div>\n            </div>\n            <!-- END Reminder Block -->\n        </div>\n    </div>\n</div>\n"}},"/admin/content/login-forget-password/script.js":{"url":"/admin/content/login-forget-password/script.js","content":{"encoding":"text","data":"var initPage=function(){this.page.$(\".js-validation-reminder\").validate({errorClass:\"help-block text-right animated fadeInDown\",errorElement:\"div\",errorPlacement:function(e,r){jQuery(r).parents(\".form-group > div\").append(e)},highlight:function(e){jQuery(e).closest(\".form-group\").removeClass(\"has-error\").addClass(\"has-error\"),jQuery(e).closest(\".help-block\").remove()},success:function(e){jQuery(e).closest(\".form-group\").removeClass(\"has-error\"),jQuery(e).closest(\".help-block\").remove()},rules:{\"reminder-email\":{required:!0,email:!0}},messages:{\"reminder-email\":{required:this.page.lang(\"请输入正确的邮箱地址\")}}}),this.page.$(\".form-material.floating > .form-control\").each(function(){var e=jQuery(this),r=e.parent(\".form-material\");e.val()&&r.addClass(\"open\"),e.on(\"change\",function(){e.val()?r.addClass(\"open\"):r.removeClass(\"open\")})})},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){},onForgetBtnClick=function(){var e=this.page.$(\"#reminder-email\").val();/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(e)};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,onForgetBtnClick:onForgetBtnClick};"}},"/admin/content/login-forget-password/style.css":{"url":"/admin/content/login-forget-password/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}"}},"/admin/content/login-login-page/data.json":{"url":"/admin/content/login-login-page/data.json","content":{"encoding":"json","data":"{}"}},"/admin/content/login-login-page/en_us.lang.json":{"url":"/admin/content/login-login-page/en_us.lang.json","content":{"encoding":"json","data":"{\"登录\":\"Login\",\"忘记密码?\":\"Forgot Password?\",\"新建账号\":\"New Account\",\"欢迎来到${application.name}, 请登录.\":\"Welcome to ${application.name},  please login.\",\"用户名\":\"Username\",\"密码\":\"Password\",\"记住登录\":\"Remember Me?\",\"请输入用户名\":\"Please enter a username\",\"你的用户名至少要包含6个字符\":\"Your username must consist of at least 6 characters\",\"你的密码至少要包含6个字符\":\"Your password must be at least 6 characters long\",\"请输入密码\":\"Please provide a password\",\"登录失败\":\"Login failed\",\", 请重试\":\", Please retry\",\"登录成功\":\"Login success\",\"我们将在2秒后跳转进入首页\":\", we will redirect to index page in 2 seconds\"}"}},"/admin/content/login-login-page/index.xhtml":{"url":"/admin/content/login-login-page/index.xhtml","content":{"encoding":"text","data":"<!-- Login Content -->\n<div class=\"content overflow-hidden\">\n    <div class=\"row\">\n        <div class=\"col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4\">\n            <!-- Login Block -->\n            <div class=\"block block-themed animated fadeIn\">\n                <div class=\"block-header bg-primary\">\n                    <ul class=\"block-options\">\n                        <!-- <li>\n                            <a tmpl:on-click=\"forgetPassword()\"><x:lang>忘记密码?</x:lang></a>\n                        </li> -->\n                        <li>\n                            <a tmpl:on-click=\"newUser()\" data-toggle=\"tooltip\" data-placement=\"left\" ><i class=\"si si-plus\"></i></a>\n                        </li>\n                    </ul>\n                    <h3 class=\"block-title\"><x:lang>登录</x:lang></h3>\n                </div>\n                <div class=\"block-content block-content-full block-content-narrow\">\n                    <!-- Login Title -->\n                    <h1 class=\"h2 font-w600 push-30-t push-5\">${application.name}</h1>\n                    <p><x:lang>欢迎来到${application.name}, 请登录.</x:lang></p>\n                    <!-- END Login Title -->\n\n                    <!-- Login Form -->\n                    <!-- jQuery Validation (.js-validation-login class is initialized in js/pages/base_pages_login.js) -->\n                    <!-- For more examples you can check out https://github.com/jzaefferer/jquery-validation -->\n                    <form class=\"js-validation-login form-horizontal push-30-t push-50\" id=\"form-login\" action=\"javascript:void(0)\" >\n                        <input type=\"hidden\" id=\"login-host\" name=\"host\" value=\"${if(application.loginHost,application.loginHost,'')}\" />\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-primary floating\">\n                                    <input class=\"form-control\" type=\"text\" id=\"login-username\" name=\"account\" />\n                                    <label for=\"login-username\"><x:lang>用户名</x:lang></label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-primary floating\">\n                                    <input class=\"form-control\" type=\"password\" id=\"login-password\" name=\"password\" />\n                                    <label for=\"login-password\"><x:lang>密码</x:lang></label>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <label class=\"css-input switch switch-sm switch-primary\">\n                                    <input type=\"checkbox\" id=\"login-remember-me\" name=\"login-remember-me\" /><span></span> <x:lang>记住登录</x:lang>\n                                </label>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12 col-sm-6 col-md-4\">\n                                <button class=\"btn btn-block btn-primary\" type=\"submit\" tmpl:on-click=\"onLoginBtnClick()\" ><i class=\"si si-login pull-right\"></i> <x:lang>登录</x:lang></button>\n                            </div>\n                        </div>\n\n                    </form>\n                    <!-- END Login Form -->\n                </div>\n            </div>\n            <!-- END Login Block -->\n        </div>\n    </div>\n</div>\n<!-- END Login Content -->\n"}},"/admin/content/login-login-page/script.js":{"url":"/admin/content/login-login-page/script.js","content":{"encoding":"text","data":"function forgetPassword(){this.storyboard.switchTo(\"login-forget-password\")}function newUser(){this.storyboard.switchTo(\"login-register-page\")}var initPage=function(){this.page.$(\".js-validation-login\").validate({errorClass:\"help-block text-right animated fadeInDown\",errorElement:\"div\",errorPlacement:function(e,n){jQuery(n).parents(\".form-group > div\").append(e)},highlight:function(e){jQuery(e).closest(\".form-group\").removeClass(\"has-error\").addClass(\"has-error\"),jQuery(e).closest(\".help-block\").remove()},success:function(e){jQuery(e).closest(\".form-group\").removeClass(\"has-error\"),jQuery(e).closest(\".help-block\").remove()},rules:{account:{required:!0,minlength:6},password:{required:!0,minlength:6}},messages:{account:{required:this.page.lang(\"请输入用户名\"),minlength:this.page.lang(\"你的用户名至少要包含6个字符\")},password:{required:this.page.lang(\"请输入密码\"),minlength:this.page.lang(\"你的密码至少要包含6个字符\")}}}),this.page.$(\".form-material.floating > .form-control\").each(function(){var e=jQuery(this),n=e.parent(\".form-material\");e.val()&&n.addClass(\"open\"),e.on(\"change\",function(){e.val()?n.addClass(\"open\"):n.removeClass(\"open\")})})},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){},onLoginBtnClick=function(){var e=this,n=this.page.$(\"#form-login\").serializeForm();$.jsonrpc(window.apiExport?window.apiExport.loginAPI:\"other.login\",[n],function(n,o){n?$.notify({icon:\"glyphicon glyphicon-warning-sign\",title:e.page.lang(\"登录失败\"),message:e.page.lang(\", 请重试\")},{type:\"danger\",placement:{from:\"top\",align:\"center\"}}):(e.page.$(\"#login-remember-me\").is(\":checked\")&&$.jsonrpcSaveAccessToken(o),$.accessToken=o.token,$admin.sessions=o.sessions,$admin.token=o.token,$admin.account=o.account,$.notify({icon:\"glyphicon glyphicon-warning-sign\",title:e.page.lang(\"登录成功\"),message:e.page.lang(\"我们将在2秒后跳转进入首页\")},{type:\"info\",placement:{from:\"top\",align:\"center\"},onClose:function(){window.content.switchTo(\"main-index-page\",{token:o.token},{channel:\"main\"})}}))})};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,onLoginBtnClick:onLoginBtnClick,forgetPassword:forgetPassword,newUser:newUser};"}},"/admin/content/login-login-page/style.css":{"url":"/admin/content/login-login-page/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}"}},"/admin/content/login-register-page/data.json":{"url":"/admin/content/login-register-page/data.json","content":{"encoding":"json","data":"{}"}},"/admin/content/login-register-page/en_us.lang.json":{"url":"/admin/content/login-register-page/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/content/login-register-page/index.xhtml":{"url":"/admin/content/login-register-page/index.xhtml","content":{"encoding":"text","data":"<div class=\"content overflow-hidden\">\n    <div class=\"row\">\n        <div class=\"col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4\">\n            <!-- Register Block -->\n            <div class=\"block block-themed animated fadeIn\">\n                <div class=\"block-header bg-success\">\n                    <ul class=\"block-options\">\n                        <li>\n                            <a tmpl:on-click=\"viewTerm()\" >查看注册条款</a>\n                        </li>\n                        <li>\n                            <a tmpl:on-click=\"goBackward()\" data-toggle=\"tooltip\" data-placement=\"left\" title=\"\" data-original-title=\"Log In\"><i class=\"si si-login\"></i></a>\n                        </li>\n                    </ul>\n                    <h3 class=\"block-title\"><x:lang>注册</x:lang></h3>\n                </div>\n                <div class=\"block-content block-content-full block-content-narrow\">\n                    <!-- Register Title -->\n                    <h1 class=\"h2 font-w600 push-30-t push-5\">${application.name}</h1>\n                    <p><x:lang>请填写以下表单完成新用户注册</x:lang></p>\n                    <!-- END Register Title -->\n\n                    <!-- Register Form -->\n                    <!-- jQuery Validation (.js-validation-register class is initialized in js/pages/base_pages_register.js) -->\n                    <!-- For more examples you can check out https://github.com/jzaefferer/jquery-validation -->\n                    <form tmpl:on-submit=\"onRegisterBtnClick()\" id=\"form-register\"  class=\"js-validation-register form-horizontal push-50-t push-50\" action=\"javascript:void(0)\" method=\"post\" novalidate=\"novalidate\">\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-success\">\n                                    <input class=\"form-control\" type=\"text\" id=\"register-username\" name=\"account\" placeholder=\"请输入账号\" />\n                                    <label for=\"register-username\">账号</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-success\">\n                                    <input class=\"form-control valid\" type=\"email\" id=\"register-email\" name=\"mailAddress\" placeholder=\"请输入邮箱\" aria-required=\"true\" aria-invalid=\"false\" aria-describedby=\"register-email-error\" />\n                                    <label for=\"register-email\">邮箱</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-success\">\n                                    <input class=\"form-control valid\" type=\"password\" id=\"register-password\" name=\"password\" placeholder=\"输入密码\" aria-required=\"true\" aria-invalid=\"false\" aria-describedby=\"register-password-error\" />\n                                    <label for=\"register-password\">密码</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <div class=\"form-material form-material-success\">\n                                    <input class=\"form-control\" type=\"password\" id=\"register-password2\" name=\"passwordRpt\" placeholder=\"确认密码\" />\n                                    <label for=\"register-password2\">确认密码</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12\">\n                                <label class=\"css-input switch switch-sm switch-success\">\n                                    <input type=\"checkbox\" id=\"register-terms\" name=\"register-terms\"  /><span></span> <x:lang>我同意并接受</x:lang><a  tmpl:on-click=\"viewTerm()\"  ><x:lang>注册条款</x:lang></a>\n                                </label>\n                            </div>\n                        </div>\n                        <div class=\"form-group\">\n                            <div class=\"col-xs-12 col-sm-6 col-md-5\">\n                                <button class=\"btn btn-block btn-success\" type=\"submit\"><i class=\"fa fa-plus pull-right\"></i><x:lang>注册</x:lang></button>\n                            </div>\n                        </div>\n                    </form>\n                    <!-- END Register Form -->\n                </div>\n            </div>\n            <!-- END Register Block -->\n        </div>\n    </div>\n</div>\n\n<x:viewLayer>\n<div class=\"modal fade\" tmpl:on-hidden.bs.modal=\"hideTerm()\" id=\"modal-terms\" tabindex=\"-1\" role=\"dialog\" >\n    <div class=\"modal-dialog modal-dialog-popout\">\n        <div class=\"modal-content\">\n            <div class=\"block block-themed block-transparent remove-margin-b\">\n                <div class=\"block-header bg-primary-dark\">\n                    <ul class=\"block-options\">\n                        <li>\n                            <button data-dismiss=\"modal\" type=\"button\"><i class=\"si si-close\"></i></button>\n                        </li>\n                    </ul>\n                    <h3 class=\"block-title\">注册条款</h3>\n                </div>\n                <div class=\"block-content\">\n                    <p>\n                        欢迎使用 ${application.name}, 请在遵守以下条款的基础上, 阅读并遵守本协议.\n                    </p>\n                    <p>本网站的包括但不限于应用程序、源代码、商标、标示图案(LOGO)、界面设计、应用程序编程接口(API)等所关联的所有知识产权均属本公司所有。用户不得复制、修改、传播或在非本网站所属的服务器上做镜像或者以其它方式进行非法使用。</p>\n                    <p>用户在使用本网站服务过程中，必须遵循以下规则：</p>\n                    <ul class=\"privacy-list\" ><li>遵守中国有关的法律法规；</li><li>不得对本网站服务进行任何形式的对其他第三方的再授权使用、销售或转让；</li><li>不得为设计开发竞争产品对本网站进行任何形式的反向工程、反向编译、反汇编，或在竞争产品抄袭模仿本网站的设计；</li><li>不得滥用本网站的通信功能发送垃圾邮件和短信；</li><li>不得对本网站的连续服务和商誉构成损害的其他行为，包括对网站服务器的攻击；</li><li>遵守本协议中的全部约定。</li></ul>\n                    <p>用户不得利用 ${application.name} 服务制作、上载、复制、发布、传播或者转载如下内容：</p>\n                    <ul class=\"privacy-list\" ><li>危害国家安全，泄露国家秘密，颠覆国家政权，破坏国家统一的；</li><li>损害国家荣誉和利益的；</li><li>煽动民族仇恨、民族歧视，破坏民族团结的；</li><li>破坏国家宗教政策，宣扬邪教和封建迷信的；</li><li>散布谣言，扰乱社会秩序，破坏社会稳定的；</li><li>散布淫秽、色情、赌博、暴力、凶杀、恐怖或者教唆犯罪的；</li><li>侮辱或者诽谤他人，侵害他人合法权益的；</li><li>含有法律、行政法规禁止的其他内容的信息。</li></ul>\n                </div>\n            </div>\n            <div class=\"modal-footer\">\n                <button class=\"btn btn-sm btn-default\" type=\"button\" data-dismiss=\"modal\">关闭</button>\n                <button class=\"btn btn-sm btn-primary\" type=\"button\" data-dismiss=\"modal\"><i class=\"fa fa-check\"></i>我同意</button>\n            </div>\n        </div>\n    </div>\n</div>\n</x:viewLayer>\n"}},"/admin/content/login-register-page/script.js":{"url":"/admin/content/login-register-page/script.js","content":{"encoding":"text","data":"var initPage=function(){this.page.$(\".js-validation-register\").validate({errorClass:\"help-block text-right animated fadeInDown\",errorElement:\"div\",errorPlacement:function(e,n){jQuery(n).parents(\".form-group > div\").append(e)},highlight:function(e){jQuery(e).closest(\".form-group\").removeClass(\"has-error\").addClass(\"has-error\"),jQuery(e).closest(\".help-block\").remove()},success:function(e){jQuery(e).closest(\".form-group\").removeClass(\"has-error\"),jQuery(e).closest(\".help-block\").remove()},rules:{account:{required:!0,minlength:3},mailAddress:{required:!0,email:!0},password:{required:!0,minlength:5},passwordRpt:{required:!0,equalTo:\"#register-password\"},\"register-terms\":{required:!0}},messages:{account:{required:\"请输入用户名\",minlength:\"你的用户名必须包含至少3个字符\"},mailAddress:\"请输入正确的邮箱地址\",password:{required:\"请输入密码\",minlength:\"密码最小长度是6位\"},passwordRpt:{required:\"请输入密码\",minlength:\"密码最小长度是6位\",equalTo:\"密码必须相同\"},\"register-terms\":\"你必须同意并接受注册条款\"}}),this.page.$(\".form-material.floating > .form-control\").each(function(){var e=jQuery(this),n=e.parent(\".form-material\");e.val()&&n.addClass(\"open\"),e.on(\"change\",function(){e.val()?n.addClass(\"open\"):n.removeClass(\"open\")})})},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){},onRegisterBtnClick=function(){var e=this,n=$(\"#form-register\").serializeForm();this.page.$(\".js-validation-register\").valid()&&$.jsonrpc(window.apiExport?window.apiExport.registerAPI:\"coolcto.register\",[n],function(n,r){n?$.notify({icon:\"glyphicon glyphicon-warning-sign\",title:e.page.lang(\"注册失败\"),message:e.page.lang(\", 请重试\")},{type:\"danger\",placement:{from:\"top\",align:\"center\"}}):($.accessToken=r.token,$admin.sessions=r.sessions,$admin.token=r.token,$admin.account=r.account,$.notify({icon:\"glyphicon glyphicon-warning-sign\",title:e.page.lang(\"注册成功\"),message:e.page.lang(\"我们将在2秒后跳转进入首页\")},{type:\"info\",placement:{from:\"top\",align:\"center\"},onClose:function(){window.content.switchTo(\"main-index-page\",{token:r.token},{channel:\"main\"})}}))})};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,onRegisterBtnClick:onRegisterBtnClick,viewTerm:function(){$(this.viewLayer).find(\"#modal-terms\").modal(\"show\"),$(this.viewLayer).css(\"pointer-events\",\"all\")},hideTerm:function(){$(this.viewLayer).css(\"pointer-events\",\"none\")}};"}},"/admin/content/login-register-page/style.css":{"url":"/admin/content/login-register-page/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}\n\n.privacy-list{\n    list-style:decimal;\n    padding-left:20px;\n}\n\n.privacy-list li{\n    list-style-type:decimal;\n}\n"}},"/admin/content/main-index-page/data.json":{"url":"/admin/content/main-index-page/data.json","content":{"encoding":"json","data":"{\"income\":21321321123}"}},"/admin/content/main-index-page/en_us.lang.json":{"url":"/admin/content/main-index-page/en_us.lang.json","content":{"encoding":"json","data":"{\"仪表盘\":\"Dashboard\",\"刚刚\":\"just now\",\"系统升级至v${application.version}\":\"System updated to v${application.version}\",\"早上好，该开始工作了\":\"Good morning my friend, let your smile change the world\",\"中午好，该吃午饭了\":\"Good noon, wish you get refilled after a pleasant meal\",\"下午好，该干活了\":\"Good afternoon, when friendship is your greatest weakness, you will be the strongest person in the world\",\"晚上好，又加班了吧？\":\"Good evening, like a night without starlight, so is a life without love\",\"深夜了，向作为劳模的你致敬！\":\"Good night, are you still there working, take care my friend\",\"活动日志\":\"Activity\",\"上证指数\":\"SSE Composite Index\",\"今日\":\"Today\",\"实时用户\":\"Realtime visits\",\"访问数\":\"Visits\",\"昨日\":\"Yesterday\",\"收入\":\"Income\",\"销售额\":\"Sales\",\"所有时间\":\"ALL Time\"}"}},"/admin/content/main-index-page/index.xhtml":{"url":"/admin/content/main-index-page/index.xhtml","content":{"encoding":"text","data":"<div class=\"content bg-image overflow-hidden\" style=\"background-image: url('assets/img/photos/photo3@2x.jpg');\">\n    <div class=\"push-50-t push-15\">\n        <h1 class=\"h2 text-white animated zoomIn\"><x:lang>仪表盘</x:lang></h1>\n        <h2 class=\"h5 text-white-op animated zoomIn\">\n            <tmpl:if test=\"isTimePeriodHour(6,11)\">\n                <x:lang>早上好，该开始工作了</x:lang>\n            </tmpl:if>\n            <tmpl:if test=\"isTimePeriodHour(11,13)\">\n                <x:lang>中午好，该吃午饭了</x:lang>\n            </tmpl:if>\n            <tmpl:if test=\"isTimePeriodHour(13,17)\">\n                <x:lang>下午好，该干活了</x:lang>\n            </tmpl:if>\n            <tmpl:if test=\"isTimePeriodHour(17,20)\">\n                <x:lang>晚上好，又加班了吧？</x:lang>\n            </tmpl:if>\n            <tmpl:if test=\"isTimePeriodHour(20,0)\">\n                <x:lang>深夜了，向作为劳模的你致敬！</x:lang>\n            </tmpl:if>\n            <tmpl:if test=\"isTimePeriodHour(0,6)\">\n                <x:lang>深夜了，向作为劳模的你致敬！</x:lang>\n            </tmpl:if>\n        </h2>\n    </div>\n</div>\n<div class=\"content bg-white border-b\">\n    <div class=\"row items-push text-uppercase\">\n        <div class=\"col-xs-6 col-sm-3\">\n            <div class=\"font-w700 text-gray-darker animated fadeIn\"><x:lang>实时用户</x:lang></div>\n            <div class=\"text-muted animated fadeIn\"><small><i class=\"si si-calendar\"></i><x:lang>今日</x:lang></small></div>\n            <a class=\"h2 font-w300 text-primary animated flipInX\" >${round(random()*10)+10}</a>\n        </div>\n        <div class=\"col-xs-6 col-sm-3\">\n            <div class=\"font-w700 text-gray-darker animated fadeIn\"><x:lang>访问数</x:lang></div>\n            <div class=\"text-muted animated fadeIn\"><small><i class=\"si si-calendar\"></i><x:lang>昨日</x:lang></small></div>\n            <a class=\"h2 font-w300 text-primary animated flipInX\" >${round((timestamp()/1000/3600))%1000+1000}</a>\n        </div>\n        <div class=\"col-xs-6 col-sm-3\">\n            <div class=\"font-w700 text-gray-darker animated fadeIn\"><x:lang>收入</x:lang></div>\n            <div class=\"text-muted animated fadeIn\"><small><i class=\"si si-calendar\"></i><x:lang>今日</x:lang></small></div>\n            <a class=\"h2 font-w300 text-primary animated flipInX\" >—</a>\n        </div>\n        <div class=\"col-xs-6 col-sm-3\">\n            <div class=\"font-w700 text-gray-darker animated fadeIn\"><x:lang>销售额</x:lang></div>\n            <div class=\"text-muted animated fadeIn\"><small><i class=\"si si-calendar\"></i><x:lang>所有时间</x:lang></small></div>\n            <a class=\"h2 font-w300 text-primary animated flipInX\" >—</a>\n        </div>\n    </div>\n</div>\n\n<div class=\"content\">\n    <div class=\"row\">\n        <div class=\"block\">\n            <div class=\"block-header bg-gray-lighter\">\n                <ul class=\"block-options\">\n                    <li>\n                        <button type=\"button\" data-toggle=\"block-option\" data-action=\"refresh_toggle\" data-action-mode=\"demo\"><i class=\"si si-refresh\"></i></button>\n                    </li>\n                </ul>\n                <h3 class=\"block-title\"><x:lang>活动日志</x:lang></h3>\n            </div>\n\n            <div class=\"block-content\">\n                <ul class=\"list list-timeline pull-t\">\n                    <li class=\"push-5\">\n                        <div class=\"list-timeline-time\">${application.lastUpdate}</div>\n                        <i class=\"fa fa-cog list-timeline-icon bg-primary-dark\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\" id=\"version-label\" ><x:lang>系统升级至v${application.version}</x:lang></p>\n                            <p class=\"font-s13\"></p>\n                        </div>\n                    </li>\n                    <!-- Twitter Notification -->\n                    <!-- <li>\n                        <div class=\"list-timeline-time\">12 hrs ago</div>\n                        <i class=\"fa fa-twitter list-timeline-icon bg-info\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\">+ 1150 Followers</p>\n                            <p class=\"font-s13\">You’re getting more and more followers, keep it up!</p>\n                        </div>\n                    </li> -->\n                    <!-- END Twitter Notification -->\n\n                    <!-- Generic Notification -->\n                    <!-- <li>\n                        <div class=\"list-timeline-time\">4 hrs ago</div>\n                        <i class=\"fa fa-briefcase list-timeline-icon bg-city\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\">+ 3 New Products were added!</p>\n                            <p class=\"font-s13\">Congratulations!</p>\n                        </div>\n                    </li> -->\n                    <!-- END Generic Notification -->\n\n                    <!-- System Notification -->\n                    <!-- <li>\n                        <div class=\"list-timeline-time\">1 day ago</div>\n                        <i class=\"fa fa-check list-timeline-icon bg-success\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\">Database backup completed!</p>\n                            <p class=\"font-s13\">Download the <a href=\"javascript:void(0)\">latest backup</a>.</p>\n                        </div>\n                    </li> -->\n                    <!-- END System Notification -->\n\n                    <!-- Facebook Notification -->\n                    <!-- <li>\n                        <div class=\"list-timeline-time\">3 hrs ago</div>\n                        <i class=\"fa fa-facebook list-timeline-icon bg-default\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\">+ 290 Page Likes</p>\n                            <p class=\"font-s13\">This is great, keep it up!</p>\n                        </div>\n                    </li> -->\n                    <!-- END Facebook Notification -->\n\n                    <!-- Social Notification -->\n                    <!-- <li>\n                        <div class=\"list-timeline-time\">2 days ago</div>\n                        <i class=\"fa fa-user-plus list-timeline-icon bg-modern\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\">+ 3 Friend Requests</p>\n                            <ul class=\"nav-users push-10-t push\">\n                                <li>\n                                    <a href=\"base_pages_profile.html\">\n                                        <img class=\"img-avatar\" src=\"assets/img/avatars/avatar11.jpg\" alt=\"\" />\n                                        <i class=\"fa fa-circle text-success\"></i> Eric Lawson\n                                        <div class=\"font-w400 text-muted\">\n                                            <small>Graphic Designer</small>\n                                        </div>\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href=\"base_pages_profile.html\">\n                                        <img class=\"img-avatar\" src=\"assets/img/avatars/avatar4.jpg\" alt=\"\" />\n                                        <i class=\"fa fa-circle text-warning\"></i> Emma Cooper\n                                        <div class=\"font-w400 text-muted\">\n                                            <small>Photographer</small>\n                                        </div>\n                                    </a>\n                                </li>\n                                <li>\n                                    <a href=\"base_pages_profile.html\">\n                                        <img class=\"img-avatar\" src=\"assets/img/avatars/avatar10.jpg\" alt=\"\" />\n                                        <i class=\"fa fa-circle text-danger\"></i> Jack Greene\n                                        <div class=\"font-w400 text-muted\">\n                                            <small>UI Designer</small>\n                                        </div>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </li> -->\n                    <!-- END Social Notification -->\n\n                    <!-- System Notification -->\n                    <!-- <li class=\"push-5\">\n                        <div class=\"list-timeline-time\">1 week ago</div>\n                        <i class=\"fa fa-cog list-timeline-icon bg-primary-dark\"></i>\n                        <div class=\"list-timeline-content\">\n                            <p class=\"font-w600\">System updated to v2.02</p>\n                            <p class=\"font-s13\">Check the complete changelog at the <a href=\"javascript:void(0)\">activity page</a>.</p>\n                        </div>\n                    </li> -->\n                    <!-- END System Notification -->\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n"}},"/admin/content/main-index-page/script.js":{"url":"/admin/content/main-index-page/script.js","content":{"encoding":"text","data":"var initPage=function(){},destroyPage=function(){},leaveForestage=function(){},loadData=function(e,i){$admin.token?i(null,{dashboardTime:new Date}):(i(\"login error\"),window.content.switchTo(\"login-login-page\",null,{action:\"reset\",channel:\"login\"}))},isTimePeriodHour=function(e,i){var o=this.time?this.time:(new Date).getHours();return e>i&&(i+=24),o>=e&&i>o};module.exports={initPage:initPage,loadData:loadData,destroyPage:destroyPage,isTimePeriodHour:isTimePeriodHour,didEnterForestage:function(){},didLeaveForestage:function(){}};"}},"/admin/content/main-index-page/style.css":{"url":"/admin/content/main-index-page/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}\n\n.slick-slider{position:relative;display:block;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-ms-touch-action:pan-y;touch-action:pan-y;-webkit-tap-highlight-color:transparent}.slick-list{position:relative;display:block;overflow:hidden;margin:0;padding:0}.slick-list:focus{outline:0}.slick-list.dragging{cursor:pointer;cursor:hand}.slick-slider .slick-list,.slick-slider .slick-track{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.slick-track{position:relative;top:0;left:0;display:block}.slick-track:after,.slick-track:before{display:table;content:''}.slick-track:after{clear:both}.slick-loading .slick-track{visibility:hidden}.slick-slide{display:none;float:left;height:100%;min-height:1px}[dir=rtl] .slick-slide{float:right}.slick-slide img{display:block}.slick-slide.slick-loading img{display:none}.slick-slide.dragging img{pointer-events:none}.slick-initialized .slick-slide{display:block}.slick-loading .slick-slide{visibility:hidden}.slick-vertical .slick-slide{display:block;height:auto;border:1px solid transparent}\n\n@charset 'UTF-8';.slick-loading .slick-list{background:url(./ajax-loader.gif) center center no-repeat #fff}@font-face{font-family:slick;font-weight:400;font-style:normal;src:url(./fonts/slick.eot);src:url(./fonts/slick.eot?#iefix) format('embedded-opentype'),url(./fonts/slick.woff) format('woff'),url(./fonts/slick.ttf) format('truetype'),url(./fonts/slick.svg#slick) format('svg')}.slick-next,.slick-prev{font-size:0;line-height:0;position:absolute;top:50%;display:block;width:20px;height:20px;margin-top:-10px;padding:0;cursor:pointer;color:transparent;border:none;outline:0;background:0 0}.slick-next:focus,.slick-next:hover,.slick-prev:focus,.slick-prev:hover{color:transparent;outline:0;background:0 0}.slick-next:focus:before,.slick-next:hover:before,.slick-prev:focus:before,.slick-prev:hover:before{opacity:1}.slick-next.slick-disabled:before,.slick-prev.slick-disabled:before{opacity:.25}.slick-next:before,.slick-prev:before{font-family:slick;font-size:20px;line-height:1;opacity:.75;color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-prev{left:-25px}[dir=rtl] .slick-prev{right:-25px;left:auto}.slick-prev:before{content:'←'}[dir=rtl] .slick-prev:before{content:'→'}.slick-next{right:-25px}[dir=rtl] .slick-next{right:auto;left:-25px}.slick-next:before{content:'→'}[dir=rtl] .slick-next:before{content:'←'}.slick-slider{margin-bottom:30px}.slick-dots{position:absolute;bottom:-45px;display:block;width:100%;padding:0;list-style:none;text-align:center}.slick-dots li{position:relative;display:inline-block;width:20px;height:20px;margin:0 5px;padding:0;cursor:pointer}.slick-dots li button{font-size:0;line-height:0;display:block;width:20px;height:20px;padding:5px;cursor:pointer;color:transparent;border:0;outline:0;background:0 0}.slick-dots li button:focus,.slick-dots li button:hover{outline:0}.slick-dots li button:focus:before,.slick-dots li button:hover:before{opacity:1}.slick-dots li button:before{font-family:slick;font-size:6px;line-height:20px;position:absolute;top:0;left:0;width:20px;height:20px;content:'•';text-align:center;opacity:.25;color:#000;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-dots li.slick-active button:before{opacity:.75;color:#000}\n"}},"/admin/content/template-markdown-editor/data.json":{"url":"/admin/content/template-markdown-editor/data.json","content":{"encoding":"json","data":"{\"galleryStart\":0,\"galleryLimit\":12,\"imageWidth\":0.9,\"imageHeight\":0}"}},"/admin/content/template-markdown-editor/en_us.lang.json":{"url":"/admin/content/template-markdown-editor/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/content/template-markdown-editor/index.xhtml":{"url":"/admin/content/template-markdown-editor/index.xhtml","content":{"encoding":"text","data":"<div style=\"height:${env('viewport.height')- padding }px; width : 100%;overflow:hidden;\">\n    <div id=\"editor-wrapper\">\n        <textarea id=\"editor\" style=\"width: 100%;height:${env('viewport.height') - padding}px;\" class=\"editor\" name=\"${if(name,name,'content')}\">${content}</textarea>\n    </div>\n</div>\n\n<x:viewLayer tmpl:on-ready=\"initUploadModal()\" >\n    <div class=\"modal fade\" tmpl:on-hidden.bs.modal=\"hideUploadModal()\" id=\"modal-upload\" tabindex=\"-1\" role=\"dialog\">\n        <div class=\"modal-dialog modal-lg modal-dialog-popout\">\n            <div class=\"modal-content\">\n                <div class=\"block block-themed block-transparent remove-margin-b\">\n                    <div class=\"block-header bg-primary-dark\">\n                        <ul class=\"block-options\">\n                            <li>\n                                <button data-dismiss=\"modal\" type=\"button\"><i class=\"si si-close\"></i></button>\n                            </li>\n                        </ul>\n                        <h3 class=\"block-title\">上传图片</h3>\n                    </div>\n\n                </div>\n                <div class=\"block\">\n                    <ul class=\"nav nav-tabs nav-tabs-alt\">\n                        <li class=\"active\" tmpl:on-click=\"switchUploadModalTab('btabs-upload-dropzone')\">\n                            <a >直接上传</a>\n                        </li>\n                        <li class=\"\" tmpl:on-click=\"switchUploadModalTab('btabs-upload-gallery')\" >\n                            <a >从相册中选择</a>\n                        </li>\n                    </ul>\n                    <div class=\"block-content tab-content\">\n                        <div class=\"tab-pane active\" id=\"btabs-upload-dropzone\">\n                            <div class=\"block-content block-content-full\">\n                                <form class=\"dropzone\" action=\"javascript:void(0)\"></form>\n                            </div>\n                        </div>\n                        <div class=\"tab-pane\" id=\"btabs-upload-gallery\">\n                            <div class=\"row js-gallery waterfall\" >\n                                <tmpl:map list=\"seq(1,maxColumn)\" id-getter=\"{item}\"  >\n                                    <div class=\"col-sm-${12/maxColumn}\">\n                                        <tmpl:map list=\"if(gallery,gallery,[])\" id-getter=\"{gitem.id}\" item-variant-name=\"gitem\" index-variant-name=\"gindex\"  >\n\n                                                <tmpl:if test=\"${gindex%maxColumn==index}\" >\n                                                    <a class=\"img-link img-thumb\" tmpl:on-click=\"onGalleryModalSelection(gitem)\"  >\n                                                        <img class=\"img-responsive\" src=\"${gitem.linkURL}\" alt=\"\" />\n                                                    </a>\n                                                </tmpl:if>\n\n                                        </tmpl:map>\n                                        </div>\n                                </tmpl:map>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"modal-footer\">\n                    <button class=\"btn btn-sm btn-default\" type=\"button\" data-dismiss=\"modal\">关闭</button>\n                    <button class=\"btn btn-sm btn-primary\" type=\"button\" tmpl:on-click=\"confirmUploadModal()\"><i class=\"fa fa-check\"></i>确定</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</x:viewLayer>\n"}},"/admin/content/template-markdown-editor/script.js":{"url":"/admin/content/template-markdown-editor/script.js","content":{"encoding":"text","data":"var initPage=function(){var e=this.page;if($(\"body\").hasClass(\"ui-desktop\")||$(\"body\").hasClass(\"system-android\")){var a=\"/assets/js/plugins/mde/simplemde.css\";$.loadResources([a],function(t,i){var l=e.$(\"#editor\")[0],o=e.$(\"#editor-wrapper\")[0].createShadowRoot(),d=\"<style>\"+i[a]+\"</style>\\n\";o.innerHTML=d,o.appendChild(l);var s=[{name:\"bold\",action:SimpleMDE.toggleBold,className:\"fa fa-bold\",title:\"Bold (Ctrl+B)\"},{name:\"italic\",action:SimpleMDE.toggleItalic,className:\"fa fa-italic\",title:\"Italic (Ctrl+I)\"},\"|\",{name:\"code\",action:SimpleMDE.toggleCodeBlock,className:\"fa fa-code\",title:\"Code (Ctrl+Alt+C)\"},{name:\"quote\",action:SimpleMDE.toggleBlockquote,className:\"fa fa-quote-left\",title:\"Quote (Ctrl+')\"},{name:\"unordered-list\",action:SimpleMDE.toggleUnorderedList,className:\"fa fa-list-ul\",title:\"Generic List (Ctrl+L)\"},{name:\"ordered-list\",action:SimpleMDE.toggleOrderedList,className:\"fa fa-list-ol\",title:\"Numbered List (Ctrl+Alt+L)\"},\"|\",{name:\"link\",action:SimpleMDE.drawLink,className:\"fa fa-link\",title:\"Create Link (Ctrl+K)\"},{name:\"image\",action:function(a){e.showUploadModal()},className:\"fa fa-picture-o\",title:\"Insert Image (Ctrl+Alt+I)\"},\"|\",{name:\"table\",action:SimpleMDE.drawTable,className:\"fa fa-table\",title:\"Insert Table\"}];$(\"body\").hasClass(\"ui-desktop\")&&(s.unshift(\"|\"),s.unshift({name:\"fullScreen\",action:function(e){$(e.toolbarElements.fullScreen).hasClass(\"fa-angle-double-left\")?($(e.toolbarElements.fullScreen).removeClass(\"fa-angle-double-left\"),$(e.toolbarElements.fullScreen).addClass(\"fa-angle-double-right\"),jQuery(\"#page-container\").removeClass(\"sidebar-o\")):($(e.toolbarElements.fullScreen).removeClass(\"fa-angle-double-right\"),$(e.toolbarElements.fullScreen).addClass(\"fa-angle-double-left\"),jQuery(\"#page-container\").addClass(\"sidebar-o\"))},className:\"fa fa-angle-double-left\",title:\"fullScreen (Ctrl+F)\"}));var n=e.data.editor=new SimpleMDE({autosave:{enabled:!0,uniqueId:e.uuid,delay:1e3},autofocus:!0,element:l,spellChecker:!1,renderingConfig:{singleLineBreaks:!1,codeSyntaxHighlighting:!0},disableExtraKeys:!0,toolbar:s});$(\"body\").hasClass(\"ui-desktop\")?SimpleMDE.toggleSideBySide(n):SimpleMDE.toggleFullScreen(n)})}},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){this.editor&&delete this.editor};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage,onMenuHide:function(){this.editor.toolbarElements.fullScreen&&($(this.editor.toolbarElements.fullScreen).removeClass(\"fa-angle-double-left\"),$(this.editor.toolbarElements.fullScreen).addClass(\"fa-angle-double-right\"))},onWindowResize:function(){$(this.viewLayer).find(\"#modal-upload\").modal(\"hide\"),this.page.hideUploadModal(),this.page.update()},switchUploadModalTab:function(e){var a=this.viewLayer;$(a).find(\"#modal-upload .nav-tabs li\").removeClass(\"active\"),$(this.element).addClass(\"active\"),$(a).find(\"#modal-upload .tab-pane\").removeClass(\"active\"),$(a).find(\"#modal-upload #\"+e).addClass(\"active\")},doUploadModalUpdate:function(){var e=this,a=(this.page,$.jsonrpcQueryObjectID(window.apiExport.uploadFileAPI));$(e.viewLayer).find(\"#modal-upload .dropzone\").dropzone({url:a.baseURL+\"/gateway/api/jsonrpc.jsp;jsessionid=\"+a.jsessionID,sending:function(t,i,l){a=$.jsonrpcQueryObjectID(window.apiExport.uploadFileAPI),this.options.url=a.baseURL+\"/gateway/api/jsonrpc.jsp;jsessionid=\"+a.jsessionID,i.setRequestHeader(\"other-app-id\",a.baseAppID?a.baseAppID:void 0),i.setRequestHeader(\"other-app-secret\",a.baseAppSecret?a.baseAppSecret:void 0);var o=e.editor.codemirror.getWrapperElement().nextSibling,d=parseInt(0==e.imageWidth?0:e.imageWidth<1?e.imageWidth*$(o).width():e.imageWidth),s=parseInt(0==e.imageHeight?0:e.imageHeight<1?e.imageHeight*$(o).height():e.imageHeight),n={id:Date.now().toString(),method:window.apiExport.uploadFileAPI,params:[{strategy:\"NORMAL_FIT\",width:d,height:s}]};l.append(\"query\",JSON.stringify(n))},success:function(a,t){t=JSON.parse(t),t.error||($(a.previewElement).click(function(){$(e.viewLayer).find(\"#modal-upload .dz-preview\").removeClass(\"active\"),$(e.viewLayer).find(\"#modal-upload .img-link\").removeClass(\"active\"),$(this).addClass(\"active\"),$(e.viewLayer).find(\"#modal-upload\").data(\"selectedPhoto\",t.result)}),$(a.previewElement).click())},acceptedFiles:\"image/*\",dictDefaultMessage:\"拖动文件到此上传\"})},didUpdate:function(){this.page.doUploadModalUpdate()},initUploadModal:function(){var e=this,a=this.page;$.currentActivity.uiAsync(function(){var a=this;$.jsonrpc(window.apiExport.uploadFileQueryAPI,[{start:e.galleryStart,limit:e.galleryLimit}],function(t,i){i&&e.page.update({galleryStart:e.galleryStart+e.galleryLimit,gallery:i.list}).then(function(){a.next()})})}),a.doUploadModalUpdate()},onUploadModalSelection:function(e){this.editor.drawImage(e.linkURL)},onGalleryModalSelection:function(e){var a=this;$(a.viewLayer).find(\"#modal-upload .dz-preview\").removeClass(\"active\"),$(a.viewLayer).find(\"#modal-upload .img-link\").removeClass(\"active\"),$(this.element).addClass(\"active\"),$(a.viewLayer).find(\"#modal-upload\").data(\"selectedPhoto\",e)},confirmUploadModal:function(){var e=$(this.viewLayer).find(\"#modal-upload\").data(\"selectedPhoto\");e&&this.page.onUploadModalSelection(e),$(this.viewLayer).find(\"#modal-upload\").modal(\"hide\"),this.page.hideUploadModal()},hideUploadModal:function(){$(this.viewLayer).css(\"pointer-events\",\"none\")},showUploadModal:function(){var e=this;$.currentActivity.uiAsync(function(){$(e.viewLayer).find(\"#modal-upload\").modal(\"show\"),$(e.viewLayer).css(\"pointer-events\",\"all\"),this.next()})},loadData:function(e,a){$(\"body\").hasClass(\"ui-desktop\")?a(null,{header:\"hideNav\",sidebar:\"backMenu\",footer:\"hideTab\",padding:0,maxColumn:4}):a(null,{sidebar:\"backMenu\",footer:\"hideTab\",padding:64,maxColumn:4})},onBackwardAction:function(e){var a={},t=this.name?this.name:\"content\";this.html?a[t]=this.editor.markdown(this.editor.value()):a[t]=this.editor.value(),e(null,a)}};"}},"/admin/content/template-markdown-editor/style.css":{"url":"/admin/content/template-markdown-editor/style.css","content":{"encoding":"text","data":".storyboard-page {\n    background-size: 100%;\n    width: 100%;\n    height: 100%;\n}\n\n#editor-wrapper{\n    background-color: white;\n    width:100%;\n}\n\n.dropzone .dz-preview{\n    padding: 5px;\n}\n\n.dropzone .dz-preview.active{\n    border: 1px solid blue;\n}\n\n\n.img-link{\n    border: 1px solid #ddd;\n    background-color: #f5f5f5;\n}\n\n.img-link.active{\n        border: 1px solid blue;\n}\n"}},"/admin/docker/_common/data.json":{"url":"/admin/docker/_common/data.json","content":{"encoding":"json","data":"{}"}},"/admin/docker/_common/script.js":{"url":"/admin/docker/_common/script.js","content":{"encoding":"text","data":"module.exports={didEnterForestage:function(){}};"}},"/admin/docker/_common/style.css":{"url":"/admin/docker/_common/style.css","content":{"encoding":"text","data":".storyboard {\n\tz-index: 100000;\n}\n"}},"/admin/docker/hideDocker/data.json":{"url":"/admin/docker/hideDocker/data.json","content":{"encoding":"json","data":"{}"}},"/admin/docker/hideDocker/en_us.lang.json":{"url":"/admin/docker/hideDocker/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/docker/hideDocker/index.xhtml":{"url":"/admin/docker/hideDocker/index.xhtml","content":{"encoding":"text","data":""}},"/admin/docker/hideDocker/script.js":{"url":"/admin/docker/hideDocker/script.js","content":{"encoding":"text","data":"var loadData=function(e,a){},initPage=function(){},didEnterForestage=function(){$(\"#page-container\").removeClass(\"sidebar-o\")},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,didEnterForestage:didEnterForestage};"}},"/admin/docker/hideDocker/style.css":{"url":"/admin/docker/hideDocker/style.css","content":{"encoding":"text","data":".storyboard-page {\n  display: none; }\n"}},"/admin/docker/mainDocker/data.json":{"url":"/admin/docker/mainDocker/data.json","content":{"encoding":"json","data":"{}"}},"/admin/docker/mainDocker/en_us.lang.json":{"url":"/admin/docker/mainDocker/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/docker/mainDocker/index.xhtml":{"url":"/admin/docker/mainDocker/index.xhtml","content":{"encoding":"text","data":"<div id=\"side-overlay-scroll\">\n    <div class=\"side-header side-content\">\n        <!-- Layout API, functionality initialized in App() -> uiLayoutApi() -->\n        <button class=\"btn btn-default pull-right\" type=\"button\" tmpl:on-click=\"dockerClose()\">\n            <i class=\"fa fa-times\"></i>\n        </button>\n        <span>\n            <img class=\"img-avatar img-avatar32\" src=\"/assets/img/avatars/avatar10.jpg\" alt=\"\" />\n            <span class=\"font-w600 push-10-l\">User${data.token}</span>\n        </span>\n    </div>\n    <div class=\"side-content remove-padding-t\">\n        <div class=\"block pull-r-l\">\n            <div class=\"block-header bg-gray-lighter\">\n                <ul class=\"block-options\">\n                    <li>\n                        <button type=\"button\" data-toggle=\"block-option\" data-action=\"refresh_toggle\" data-action-mode=\"demo\"><i class=\"si si-refresh\"></i></button>\n                    </li>\n                    <li>\n                        <button type=\"button\" data-toggle=\"block-option\" data-action=\"content_toggle\"><i class=\"si si-arrow-up\"></i></button>\n                    </li>\n                </ul>\n                <h3 class=\"block-title\">Recent Activity</h3>\n            </div>\n            <div class=\"block-content\">\n                <!-- Activity List -->\n                <ul class=\"list list-activity\">\n                    <li>\n                        <i class=\"si si-wallet text-success\"></i>\n                        <div class=\"font-w600\">New sale ($15)</div>\n                        <div><a href=\"javascript:void(0)\">Admin Template</a></div>\n                        <div>\n                            <small class=\"text-muted\">3 min ago</small>\n                        </div>\n                    </li>\n                    <li>\n                        <i class=\"si si-pencil text-info\"></i>\n                        <div class=\"font-w600\">You edited the file</div>\n                        <div><a href=\"javascript:void(0)\"><i class=\"fa fa-file-text-o\"></i> Documentation.doc</a></div>\n                        <div>\n                            <small class=\"text-muted\">15 min ago</small>\n                        </div>\n                    </li>\n                    <li>\n                        <i class=\"si si-close text-danger\"></i>\n                        <div class=\"font-w600\">Project deleted</div>\n                        <div><a href=\"javascript:void(0)\">Line Icon Set</a></div>\n                        <div>\n                            <small class=\"text-muted\">4 hours ago</small>\n                        </div>\n                    </li>\n                    <li>\n                        <i class=\"si si-wrench text-warning\"></i>\n                        <div class=\"font-w600\">Core v2.5 is available</div>\n                        <div><a href=\"javascript:void(0)\">Update now</a></div>\n                        <div>\n                            <small class=\"text-muted\">6 hours ago</small>\n                        </div>\n                    </li>\n                </ul>\n                <div class=\"text-center\">\n                    <small><a href=\"javascript:void(0)\">Load More..</a></small>\n                </div>\n                <!-- END Activity List -->\n            </div>\n        </div>\n    </div>\n</div>\n"}},"/admin/docker/mainDocker/script.js":{"url":"/admin/docker/mainDocker/script.js","content":{"encoding":"text","data":"module.exports={dockerClose:function(){var e=jQuery(\"#page-container\");e.removeClass(\"side-overlay-o\")}};"}},"/admin/docker/mainDocker/style.css":{"url":"/admin/docker/mainDocker/style.css","content":{"encoding":"text","data":"\n"}},"/admin/header/_common/data.json":{"url":"/admin/header/_common/data.json","content":{"encoding":"json","data":"{}"}},"/admin/header/_common/script.js":{"url":"/admin/header/_common/script.js","content":{"encoding":"text","data":"var headerBackwardClick=function(){};"}},"/admin/header/_common/style.css":{"url":"/admin/header/_common/style.css","content":{"encoding":"text","data":".storyboard {\n  z-index: 1000;\n  width: 100%;\n}\n\n.storyboard-page{\n}\n"}},"/admin/header/backNav/data.json":{"url":"/admin/header/backNav/data.json","content":{"encoding":"json","data":"{}"}},"/admin/header/backNav/en_us.lang.json":{"url":"/admin/header/backNav/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/header/backNav/index.xhtml":{"url":"/admin/header/backNav/index.xhtml","content":{"encoding":"text","data":"<!-- Nav DIV -->\n<div id = \"NavigationBar\">\n\t<img id = \"NavItemLeft\" src=\"fraternity/header/mainNav/res/right.png\"> </img>\n\t<div id = \"NavItemLeftBg\" template:on-click=\"onLeftButtonClick()\"></div>\n\t<div id = \"NavItemRight\" template:on-click=\"onRightButtonClick()\">${default(rightButtonText, '')}</div>\n\t<div id = \"NavItemCenter\">${default(contentButtonText, '')}</div>\n</div>"}},"/admin/header/backNav/script.js":{"url":"/admin/header/backNav/script.js","content":{"encoding":"text","data":"var initPage=function(){$(\"#header\").show()},didEnterForestage=function(){},leaveForestage=function(){},destroyPage=function(){},onRightButtonClick=function(){this.storyboard.onRightButtonClick()},onLeftButtonClick=function(){this.storyboard.onLeftButtonClick()};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage,onRightButtonClick:onRightButtonClick,onLeftButtonClick:onLeftButtonClick};"}},"/admin/header/backNav/style.css":{"url":"/admin/header/backNav/style.css","content":{"encoding":"text","data":".storyboard-page {\n  height: 64px;\n  width: 100%;\n  background-color: #52D1A7; }\n\n#NavItemLeft {\n  z-index: 2;\n  position: relative;\n  float: left;\n  top: 13px;\n  left: 15px;\n  height: 22px;\n  width: 12px;\n  font-size: 22px; }\n\n#NavItemLeftBg {\n  position: absolute;\n  z-index: 3;\n  height: 100%;\n  width: 60px;\n  top: 0; }\n\n#NavigationBar {\n  position: relative;\n  padding-top: 15px;\n  height: 100%; }\n\n#NavItemRight {\n  z-index: 2;\n  position: relative;\n  float: right;\n  line-height: 51px;\n  text-align: center;\n  height: 40px;\n  width: 63px;\n  color: white;\n  font-size: 12px; }\n\n#NavItemCenter {\n  position: absolute;\n  z-index: 1;\n  line-height: 49px;\n  text-align: center;\n  height: 40px;\n  width: 100%;\n  color: white;\n  font-size: 17px;\n  letter-spacing: 0px; }\n"}},"/admin/header/hideNav/data.json":{"url":"/admin/header/hideNav/data.json","content":{"encoding":"json","data":"{}"}},"/admin/header/hideNav/en_us.lang.json":{"url":"/admin/header/hideNav/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/header/hideNav/index.xhtml":{"url":"/admin/header/hideNav/index.xhtml","content":{"encoding":"text","data":""}},"/admin/header/hideNav/script.js":{"url":"/admin/header/hideNav/script.js","content":{"encoding":"text","data":"var loadData=function(e,a){},initPage=function(){},didEnterForestage=function(){$(\"#page-container\").addClass(\"login\"),$(\"#page-container\").removeClass(\"header-navbar-fixed\")},leaveForestage=function(){$(\"#page-container\").addClass(\"header-navbar-fixed\")},destroyPage=function(){};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage};"}},"/admin/header/hideNav/style.css":{"url":"/admin/header/hideNav/style.css","content":{"encoding":"text","data":".storyboard-page {\n  display: none; }\n"}},"/admin/header/mainNav/data.json":{"url":"/admin/header/mainNav/data.json","content":{"encoding":"json","data":"{}"}},"/admin/header/mainNav/en_us.lang.json":{"url":"/admin/header/mainNav/en_us.lang.json","content":{"encoding":"json","data":"{\"搜索\":\"Search\",\"个人资料\":\"Profile\",\"登出\":\"Logout\"}"}},"/admin/header/mainNav/index.xhtml":{"url":"/admin/header/mainNav/index.xhtml","content":{"encoding":"text","data":"\n\n\n<!-- Header -->\n<header id=\"header-navbar\" class=\"content-mini content-mini-full\">\n    <!-- Header Navigation Right -->\n    <ul class=\"nav-header pull-right\">\n        <li>\n            <div class=\"btn-group\">\n                <button class=\"btn btn-default btn-image dropdown-toggle\" data-toggle=\"dropdown\" type=\"button\">\n                    <img src=\"/assets/img/avatars/avatar10.jpg\" alt=\"Avatar\" />\n                    <span class=\"caret\"></span>\n                </button>\n                <ul class=\"dropdown-menu dropdown-menu-right\">\n                    <li class=\"dropdown-header\" tmpl:on-click=\"profile()\" ><x:lang>个人资料</x:lang></li>\n\n                    <li tmpl:on-click=\"doLogout()\" class=\"dropdown-header\" >\n                        <x:lang>登出</x:lang>\n                    </li>\n                    <!-- <li>\n                        <a tabindex=\"-1\" href=\"base_pages_inbox.php\">\n                            <i class=\"si si-envelope-open pull-right\"></i>\n                            <span class=\"badge badge-primary pull-right\">3</span>Inbox\n                        </a>\n                    </li>\n                    <li>\n                        <a tabindex=\"-1\" href=\"base_pages_profile.php\">\n                            <i class=\"si si-user pull-right\"></i>\n                            <span class=\"badge badge-success pull-right\">1</span>Profile\n                        </a>\n                    </li>\n                    <li>\n                        <a tabindex=\"-1\" href=\"javascript:void(0)\">\n                            <i class=\"si si-settings pull-right\"></i>Settings\n                        </a>\n                    </li>\n                    <li class=\"divider\"></li>\n                    <li class=\"dropdown-header\">Actions</li>\n                    <li>\n                        <a tabindex=\"-1\" href=\"base_pages_lock.php\">\n                            <i class=\"si si-lock pull-right\"></i>Lock Account\n                        </a>\n                    </li>\n                    <li>\n                        <a tabindex=\"-1\" href=\"base_pages_login.php\">\n                            <i class=\"si si-logout pull-right\"></i>Log out\n                        </a>\n                    </li> -->\n                </ul>\n            </div>\n        </li>\n        <li>\n            <button class=\"btn btn-default\" tmpl:on-click=\"dockerToggle()\" type=\"button\">\n                <i class=\"fa fa-tasks\"></i>\n            </button>\n        </li>\n    </ul>\n    <!-- END Header Navigation Right -->\n\n    <!-- Header Navigation Left -->\n    <ul class=\"nav-header pull-left\">\n        <li class=\"hidden-md hidden-lg\">\n            <!-- Layout API, functionality initialized in App() -> uiLayoutApi() -->\n            <button class=\"btn btn-default\" type=\"button\" tmpl:on-click=\"toggleSidebar()\" >\n                <i class=\"fa fa-navicon\"></i>\n            </button>\n        </li>\n        <!--\n        <li class=\"hidden-xs hidden-sm\">\n            <button class=\"btn btn-default\" data-toggle=\"layout\" data-action=\"sidebar_mini_toggle\" type=\"button\">\n                <i class=\"fa fa-ellipsis-v\"></i>\n            </button>\n        </li>\n        <li>\n            <button class=\"btn btn-default pull-right\" data-toggle=\"modal\" data-target=\"#apps-modal\" type=\"button\">\n                <i class=\"si si-grid\"></i>\n            </button>\n        </li>\n        <li class=\"visible-xs\">\n            <button class=\"btn btn-default\" data-toggle=\"class-toggle\" data-target=\".js-header-search\" data-class=\"header-search-xs-visible\" type=\"button\">\n                <i class=\"fa fa-search\"></i>\n            </button>\n        </li>\n        -->\n        <li class=\"js-header-search header-search\">\n            <form class=\"form-horizontal\" action=\"base_pages_search.php\" method=\"post\">\n                <div class=\"form-material form-material-primary input-group remove-margin-t remove-margin-b\">\n                    <input class=\"form-control\" type=\"text\" id=\"base-material-text\" name=\"base-material-text\" placeholder=\"${lang('搜索')}...\" />\n                    <span class=\"input-group-addon\"><i class=\"si si-magnifier\"></i></span>\n                </div>\n            </form>\n        </li>\n\n    </ul>\n    <!-- END Header Navigation Left -->\n</header>\n<!-- END Header -->\n"}},"/admin/header/mainNav/script.js":{"url":"/admin/header/mainNav/script.js","content":{"encoding":"text","data":"var initPage=function(){$(\"#header\").show()},didEnterForestage=function(){$(\"#page-container\").removeClass(\"login\")},leaveForestage=function(){},destroyPage=function(){},toggleSidebar=function(){var e=jQuery(\"#page-container\"),o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;e.toggleClass(o>991?\"sidebar-o\":\"sidebar-o-xs\")},doLogout=function(){$.jsonrpcLogout(function(e,o){window.content.switchTo(\"login-login-page\",null,{action:\"reset\",channel:\"login\"}),delete $admin.token,delete $admin.sessions,delete $admin.account})},dockerToggle=function(){var e=jQuery(\"#page-container\");e.toggleClass(\"side-overlay-o\")},profile=function(){};module.exports={initPage:initPage,didEnterForestage:didEnterForestage,leaveForestage:leaveForestage,destroyPage:destroyPage,toggleSidebar:toggleSidebar,doLogout:doLogout,profile:profile,dockerToggle:dockerToggle};"}},"/admin/header/mainNav/style.css":{"url":"/admin/header/mainNav/style.css","content":{"encoding":"text","data":".storyboard-page {\n  width: 100%;\n  z-index: 10000;  \n}\n"}},"/admin/sidebar/_common/data.json":{"url":"/admin/sidebar/_common/data.json","content":{"encoding":"json","data":"{}"}},"/admin/sidebar/_common/script.js":{"url":"/admin/sidebar/_common/script.js","content":{"encoding":"text","data":"module.exports={didEnterForestage:function(){}};"}},"/admin/sidebar/_common/style.css":{"url":"/admin/sidebar/_common/style.css","content":{"encoding":"text","data":".storyboard {\n\tposition: absolute;\n\tbottom: 0px;\n\tz-index: 100000;\n}\n"}},"/admin/sidebar/backMenu/data.json":{"url":"/admin/sidebar/backMenu/data.json","content":{"encoding":"json","data":"{\"title\":\"编辑\"}"}},"/admin/sidebar/backMenu/en_us.lang.json":{"url":"/admin/sidebar/backMenu/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/sidebar/backMenu/index.xhtml":{"url":"/admin/sidebar/backMenu/index.xhtml","content":{"encoding":"text","data":"<div id=\"sidebar-scroll\">\n    <!-- Sidebar Content -->\n    <!-- Adding .sidebar-mini-hide to an element will hide it when the sidebar is in mini mode -->\n    <div class=\"sidebar-content\">\n        <div class=\"side-header side-content\">\n            <!-- Layout API, functionality initialized in App() -> uiLayoutApi() -->\n            <button class=\"btn btn-link text-gray pull-right visible-xs visible-sm\" tmpl:on-click=\"sidebarClose()\" data-action=\"sidebar_close\">\n                <i class=\"fa fa-times\"></i>\n            </button>\n            <!-- Themes functionality initialized in App() -> uiHandleTheme() -->\n            <!-- <div class=\"btn-group pull-right visible-md visible-lg\">\n                <a tmpl:on-safe-click=\"hideMenu()\"  >\n                    <button class=\"btn btn-link text-gray active\"  type=\"button\">\n                        <i class=\"fa fa-close\"></i>\n                    </button>\n                </a>\n            </div> -->\n            <a class=\"active h5 text-white\" href=\"javascript:void(0)\" >\n                ${if(title,title,'编辑')}\n            </a>\n        </div>\n    </div>\n    <div class=\"side-content\">\n        <ul class=\"nav-main\">\n            <li>\n                <a tmpl:on-safe-click=\"backwardAction()\" >\n                    <button class=\"btn btn-block btn-success\" type=\"button\">\n                        <i class=\"${if(icon,icon,'fa fa-save')}\"></i>\n                        保存\n                    </button>\n                </a>\n            </li>\n            <li>\n                <a tmpl:on-safe-click=\"cancelEdit()\" >\n                    <button class=\"btn btn-block btn-default\" type=\"button\">\n                        <i class=\"si si-action-undo\"></i>\n                        取消\n                    </button>\n                </a>\n            </li>\n        </ul>\n    </div>\n    <!-- Sidebar Content -->\n</div>\n"}},"/admin/sidebar/backMenu/script.js":{"url":"/admin/sidebar/backMenu/script.js","content":{"encoding":"text","data":"module.exports={backwardAction:function(){return $.async(function(){var t=this;if($.currentActivity.getMainboard()&&$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports.onBackwardAction){var e=function(e,r){e?console.error(e):$.currentActivity.getMainboard().goBackward(r),t.next()};$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports.onBackwardAction.apply($.currentActivity.getMainboard().currentPage.data,[e])}else $.currentActivity.getMainboard().goBackward(),t.next()})},hideMenu:function(){jQuery(\"#page-container\").removeClass(\"sidebar-o\"),$.currentActivity.getMainboard()&&$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports.onMenuHide&&$.currentActivity.getMainboard().options.pageSpecs[$.currentActivity.getMainboard().currentPage.id].module.exports.onMenuHide.apply($.currentActivity.getMainboard().currentPage.data,[])},sidebarClose:function(){jQuery(\"#page-container\").removeClass(\"sidebar-o-xs\")},cancelEdit:function(){$.currentActivity.getMainboard().goBackward()}};"}},"/admin/sidebar/backMenu/style.css":{"url":"/admin/sidebar/backMenu/style.css","content":{"encoding":"text","data":".storyboard-page {\n  width: 100%;\n  bottom: 0px;\n  border-top: 1px #ababab solid;\n  z-index: 1000;}\n\n.btn-fullw{\n    width: 100%;\n    text-align: center;\n}\n"}},"/admin/sidebar/hideMenu/data.json":{"url":"/admin/sidebar/hideMenu/data.json","content":{"encoding":"json","data":"{}"}},"/admin/sidebar/hideMenu/en_us.lang.json":{"url":"/admin/sidebar/hideMenu/en_us.lang.json","content":{"encoding":"json","data":"{}"}},"/admin/sidebar/hideMenu/index.xhtml":{"url":"/admin/sidebar/hideMenu/index.xhtml","content":{"encoding":"text","data":""}},"/admin/sidebar/hideMenu/script.js":{"url":"/admin/sidebar/hideMenu/script.js","content":{"encoding":"text","data":"var loadData=function(e,a){},initPage=function(){},didEnterForestage=function(){($(\"#page-container\").hasClass(\"sidebar-o\")||$(\"#page-container\").hasClass(\"sidebar-o-xs\"))&&($(\"#page-container\").removeClass(\"sidebar-o\"),$(\"#page-container\").removeClass(\"sidebar-o-xs\"))},leaveForestage=function(){},destroyPage=function(){};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,didEnterForestage:didEnterForestage,willUpdate:didEnterForestage};"}},"/admin/sidebar/hideMenu/style.css":{"url":"/admin/sidebar/hideMenu/style.css","content":{"encoding":"text","data":".storyboard-page {\n  display: none; }\n"}},"/admin/sidebar/mainMenu/data.json":{"url":"/admin/sidebar/mainMenu/data.json","content":{"encoding":"json","data":"{}"}},"/admin/sidebar/mainMenu/en_us.lang.json":{"url":"/admin/sidebar/mainMenu/en_us.lang.json","content":{"encoding":"json","data":"{\"系统设置\":\"System\",\"登出\":\"Logout\"}"}},"/admin/sidebar/mainMenu/index.xhtml":{"url":"/admin/sidebar/mainMenu/index.xhtml","content":{"encoding":"text","data":"<div id=\"sidebar-scroll\">\n    <!-- Sidebar Content -->\n    <!-- Adding .sidebar-mini-hide to an element will hide it when the sidebar is in mini mode -->\n    <div class=\"sidebar-content\">\n        <!-- Side Header -->\n        <div class=\"side-header side-content\">\n            <!-- Layout API, functionality initialized in App() -> uiLayoutApi() -->\n            <button class=\"btn btn-link text-gray pull-right visible-xs visible-sm\" tmpl:on-click=\"sidebarClose()\" data-action=\"sidebar_close\">\n                <i class=\"fa fa-times\"></i>\n            </button>\n            <!-- Themes functionality initialized in App() -> uiHandleTheme() -->\n            <div class=\"btn-group pull-right visible-md visible-lg\">\n                <button class=\"btn btn-link text-gray dropdown-toggle\" data-toggle=\"dropdown\" type=\"button\">\n                    <i class=\"fa fa-gears\"></i>\n                </button>\n                <ul class=\"dropdown-menu dropdown-menu-right font-s13 sidebar-mini-hide\">\n                    <li tmpl:on-click=\"doLogout()\">\n                        <a data-toggle=\"theme\" data-theme=\"default\" tabindex=\"-1\">\n                            <i class=\"si si-logout text-default pull-right\"></i>\n                            <span class=\"font-w600\">\n                                <x:lang>登出</x:lang>\n                            </span>\n                        </a>\n                    </li>\n                    <!--\n                    <li>\n                        <a data-toggle=\"theme\" data-theme=\"/assets/css/themes/amethyst.min.css\" tabindex=\"-1\" href=\"javascript:void(0)\">\n                            <i class=\"fa fa-circle text-amethyst pull-right\"></i> <span class=\"font-w600\">Amethyst</span>\n                        </a>\n                    </li>\n                    <li>\n                        <a data-toggle=\"theme\" data-theme=\"/assets/css/themes/city.min.css\" tabindex=\"-1\" href=\"javascript:void(0)\">\n                            <i class=\"fa fa-circle text-city pull-right\"></i> <span class=\"font-w600\">City</span>\n                        </a>\n                    </li>\n                    <li>\n                        <a data-toggle=\"theme\" data-theme=\"/assets/css/themes/flat.min.css\" tabindex=\"-1\" href=\"javascript:void(0)\">\n                            <i class=\"fa fa-circle text-flat pull-right\"></i> <span class=\"font-w600\">Flat</span>\n                        </a>\n                    </li>\n                    <li>\n                        <a data-toggle=\"theme\" data-theme=\"/assets/css/themes/modern.min.css\" tabindex=\"-1\" href=\"javascript:void(0)\">\n                            <i class=\"fa fa-circle text-modern pull-right\"></i> <span class=\"font-w600\">Modern</span>\n                        </a>\n                    </li>\n                    <li>\n                        <a data-toggle=\"theme\" data-theme=\"/assets/css/themes/smooth.min.css\" tabindex=\"-1\" href=\"javascript:void(0)\">\n                            <i class=\"fa fa-circle text-smooth pull-right\"></i> <span class=\"font-w600\">Smooth</span>\n                        </a>\n                    </li> -->\n                </ul>\n            </div>\n            <a class=\"active h5 text-white\" href=\"javascript:void(0)\" tmpl:on-safe-click=\"goHomepage()\">\n                ${application.name}\n            </a>\n        </div>\n        <!-- END Side Header -->\n\n        <!-- Side Content -->\n        <div class=\"side-content\">\n            <ul class=\"nav-main\">\n                <li>\n                    <a  tmpl:on-click=\"menuSwitch('template-markdown-editor')\" ><i class=\"si si-rocket\"></i><span class=\"sidebar-mini-hide\">Frontend</span></a>\n                </li>\n            </ul>\n        </div>\n        <!-- END Side Content -->\n    </div>\n    <!-- Sidebar Content -->\n</div>\n"}},"/admin/sidebar/mainMenu/script.js":{"url":"/admin/sidebar/mainMenu/script.js","content":{"encoding":"text","data":"var loadData=function(e,n){},initPage=function(){this.page.$('[data-toggle=\"nav-submenu\"]').on(\"click\",function(e){var n=jQuery(this),t=n.parent(\"li\");return t.hasClass(\"open\")?t.removeClass(\"open\"):(n.closest(\"ul\").find(\"> li\").removeClass(\"open\"),t.addClass(\"open\")),$lHtml.hasClass(\"no-focus\")&&n.blur(),!1})},didEnterForestage=function(){$(\"#page-container\").addClass(\"sidebar-o\"),$(\"#page-container\").removeClass(\"sidebar-o-xs\")},leaveForestage=function(){},destroyPage=function(){},menuSwitch=function(e,n){window.content.switchTo(e,null,{channel:n})},goHomepage=function(){this.application.homepage?window.location.href=this.application.homepage:window.content.switchTo(\"main-index-page\",null,{action:\"reset\",channel:\"main\"}).then(this.next)},doLogout=function(){$.jsonrpcLogout(function(e,n){window.content.switchTo(\"login-login-page\",null,{action:\"reset\",channel:\"login\"}),delete $admin.token,delete $admin.sessions,delete $admin.account})},loadData=function(e,n){var t={};if(e.application.menus)for(key in e.application.menus)t[key]=$.advancedMerge({pageID:{\"!valueType\":\"string\"},sessions:{\"!valueType\":\"array\",\"!operation\":\"union\",\"!stringDelimiter\":[\",\",\" \"],\"!ignoreEmptyElement\":!0,\"!autotrimString\":!0,\"!arrayElement\":{\"!valueType\":\"regex-asterisk-dot\"},\"!defaultValue\":[]}},{pageID:key,sessions:$.convert(e.application.menus[key],\"\")});n(null,{mainMenu:t})},getCurrentMenuPage=function(){return window.content.nextPage?window.content.nextPage.id:\"\"},sidebarClose=function(){jQuery(\"#page-container\").removeClass(\"sidebar-o-xs\")},shouldShowMenu=function(e){if(this.mainMenu[e]){if($admin.sessions){var n=!1;return this.mainMenu[e].sessions.forEach(function(e){$admin.sessions.forEach(function(t){e.test(t)&&(n=!0)})}),n}return!1}return!0},isActiveMenu=function(e){return(window.content.nextPage?window.content.nextPage.id:\"\")==e?\"active\":\"\"};module.exports={initPage:initPage,leaveForestage:leaveForestage,destroyPage:destroyPage,loadData:loadData,didEnterForestage:didEnterForestage,menuSwitch:menuSwitch,goHomepage:goHomepage,doLogout:doLogout,getCurrentMenuPage:getCurrentMenuPage,sidebarClose:sidebarClose,willUpdate:didEnterForestage,isActiveMenu:isActiveMenu};"}},"/admin/sidebar/mainMenu/style.css":{"url":"/admin/sidebar/mainMenu/style.css","content":{"encoding":"text","data":".storyboard-page {\n  width: 100%;\n  bottom: 0px;\n  border-top: 1px #ababab solid;\n  z-index: 1000;}\n\n.tabbarItem {\n  margin-top: 2px;\n  position: relative;\n  float: left;\n  width: 20%;\n  height: 60px;\n  text-align: center;\n  line-height: 60px; }\n\nimg {\n  width: 100%;\n  height: 50px;\n  margin-top: 2px; }\n\n.Tabbar-item-name {\n  display: none;\n  margin-top: -62px;\n  height: 10px;\n  width: 100%;\n  color: gray; }\n\n.Tabbbar-item-name-sel {\n  color: #51D1A6; }\n"}}}